if (self.CavalryLogger) { CavalryLogger.start_js(["eBNtX"]); }

__d("Asset3DBackgroundMap",[],(function(a,b,c,d,e,f){e.exports={one:{story:{normal:"3d-bkgrd-1.jpg",hd:"3d-bkgrd-1-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-1.jpg",hd:"3d-bkgrd-btn-1-2x.jpg"}},two:{story:{normal:"3d-bkgrd-2.jpg",hd:"3d-bkgrd-2-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-2.jpg",hd:"3d-bkgrd-btn-2-2x.jpg"}},three:{story:{normal:"3d-bkgrd-3.jpg",hd:"3d-bkgrd-3-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-3.jpg",hd:"3d-bkgrd-btn-3-2x.jpg"}},four:{story:{normal:"3d-bkgrd-4.jpg",hd:"3d-bkgrd-4-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-4.jpg",hd:"3d-bkgrd-btn-4-2x.jpg"}},five:{story:{normal:"3d-bkgrd-5.jpg",hd:"3d-bkgrd-5-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-5.jpg",hd:"3d-bkgrd-btn-5-2x.jpg"}},six:{story:{normal:"3d-bkgrd-6.jpg",hd:"3d-bkgrd-6-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-6.jpg",hd:"3d-bkgrd-btn-6-2x.jpg"}},seven:{story:{normal:"3d-bkgrd-7.jpg",hd:"3d-bkgrd-7-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-7.jpg",hd:"3d-bkgrd-btn-7-2x.jpg"}},eight:{story:{normal:"3d-bkgrd-8.jpg",hd:"3d-bkgrd-8-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-8.jpg",hd:"3d-bkgrd-btn-8-2x.jpg"}},nine:{story:{normal:"3d-bkgrd-9.jpg",hd:"3d-bkgrd-9-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-9.jpg",hd:"3d-bkgrd-btn-9-2x.jpg"}},ten:{story:{normal:"3d-bkgrd-10.jpg",hd:"3d-bkgrd-10-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-10.jpg",hd:"3d-bkgrd-btn-10-2x.jpg"}},eleven:{story:{normal:"3d-bkgrd-11.jpg",hd:"3d-bkgrd-11-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-11.jpg",hd:"3d-bkgrd-btn-11-2x.jpg"}},twelve:{story:{normal:"3d-bkgrd-12.jpg",hd:"3d-bkgrd-12-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-12.jpg",hd:"3d-bkgrd-btn-12-2x.jpg"}},thirteen:{story:{normal:"3d-bkgrd-13.jpg",hd:"3d-bkgrd-13-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-13.jpg",hd:"3d-bkgrd-btn-13-2x.jpg"}},fourteen:{story:{normal:"3d-bkgrd-14.jpg",hd:"3d-bkgrd-14-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-14.jpg",hd:"3d-bkgrd-btn-14-2x.jpg"}},fifteen:{story:{normal:"3d-bkgrd-15.jpg",hd:"3d-bkgrd-15-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-15.jpg",hd:"3d-bkgrd-btn-15-2x.jpg"}},sixteen:{story:{normal:"3d-bkgrd-16.jpg",hd:"3d-bkgrd-16-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-16.jpg",hd:"3d-bkgrd-btn-16-2x.jpg"}},seventeen:{story:{normal:"3d-bkgrd-17.jpg",hd:"3d-bkgrd-17-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-17.jpg",hd:"3d-bkgrd-btn-17-2x.jpg"}},eighteen:{story:{normal:"3d-bkgrd-18.jpg",hd:"3d-bkgrd-18-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-18.jpg",hd:"3d-bkgrd-btn-18-2x.jpg"}},twenty:{story:{normal:"3d-bkgrd-20.jpg",hd:"3d-bkgrd-20-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-20.jpg",hd:"3d-bkgrd-btn-20-2x.jpg"}},twentyone:{story:{normal:"3d-bkgrd-21.jpg",hd:"3d-bkgrd-21-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-21.jpg",hd:"3d-bkgrd-btn-21-2x.jpg"}},twentytwo:{story:{normal:"3d-bkgrd-22.jpg",hd:"3d-bkgrd-22-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-22.jpg",hd:"3d-bkgrd-btn-22-2x.jpg"}},twentythree:{story:{normal:"3d-bkgrd-23.jpg",hd:"3d-bkgrd-23-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-23.jpg",hd:"3d-bkgrd-btn-23-2x.jpg"}},twentyfour:{story:{normal:"3d-bkgrd-24.jpg",hd:"3d-bkgrd-24-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-24.jpg",hd:"3d-bkgrd-btn-24-2x.jpg"}},twentyfive:{story:{normal:"3d-bkgrd-25.jpg",hd:"3d-bkgrd-25-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-25.jpg",hd:"3d-bkgrd-btn-25-2x.jpg"}},twentysix:{story:{normal:"3d-bkgrd-26.jpg",hd:"3d-bkgrd-26-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-26.jpg",hd:"3d-bkgrd-btn-26-2x.jpg"}},twentyseven:{story:{normal:"3d-bkgrd-27.jpg",hd:"3d-bkgrd-27-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-27.jpg",hd:"3d-bkgrd-btn-27-2x.jpg"}},twentyeight:{story:{normal:"3d-bkgrd-28.jpg",hd:"3d-bkgrd-28-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-28.jpg",hd:"3d-bkgrd-btn-28-2x.jpg"}},twentynine:{story:{normal:"3d-bkgrd-29.jpg",hd:"3d-bkgrd-29-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-29.jpg",hd:"3d-bkgrd-btn-29-2x.jpg"}},thirty:{story:{normal:"3d-bkgrd-30.jpg",hd:"3d-bkgrd-30-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-30.jpg",hd:"3d-bkgrd-btn-30-2x.jpg"}},thirtyone:{story:{normal:"3d-bkgrd-31.jpg",hd:"3d-bkgrd-31-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-31.jpg",hd:"3d-bkgrd-btn-31-2x.jpg"}},thirtytwo:{story:{normal:"3d-bkgrd-32.jpg",hd:"3d-bkgrd-32-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-32.jpg",hd:"3d-bkgrd-btn-32-2x.jpg"}},thirtythree:{story:{normal:"3d-bkgrd-33.jpg",hd:"3d-bkgrd-33-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-33.jpg",hd:"3d-bkgrd-btn-33-2x.jpg"}},thirtyfour:{story:{normal:"3d-bkgrd-34.jpg",hd:"3d-bkgrd-34-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-34.jpg",hd:"3d-bkgrd-btn-34-2x.jpg"}},thirtyfive:{story:{normal:"3d-bkgrd-35.jpg",hd:"3d-bkgrd-35-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-35.jpg",hd:"3d-bkgrd-btn-35-2x.jpg"}},thirtysix:{story:{normal:"3d-bkgrd-36.jpg",hd:"3d-bkgrd-36-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-36.jpg",hd:"3d-bkgrd-btn-36-2x.jpg"}},"default":{story:{normal:null,hd:null},thumbnail:{normal:null,hd:null}},medium:{story:{normal:"3d-bkgrd-medium.jpg",hd:"3d-bkgrd-medium-2x.jpg"},thumbnail:{normal:null,hd:null}},spaces:{story:{normal:"3d-bkgrd-spaces.jpg",hd:"3d-bkgrd-spaces-2x.jpg"},thumbnail:{normal:null,hd:null}},creator:{story:{normal:"3d-bkgrd-creator.jpg",hd:"3d-bkgrd-creator-2x.jpg"},thumbnail:{normal:null,hd:null}}}}),null);
__d("Asset3DBackgroundSize",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({THUMBNAIL:"thumbnail",STORY:"story"})}),null);
__d("XAsset3DUpdateFallbackImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/update/",{id:{type:"FBID",required:!0}})}),null);
__d("dataUriToBlob",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();var b=a.split(",")[0].indexOf("base64")>=0,c=a.split(",")[0].split(":")[1].split(";")[0];a=b?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);if(b){b=new Uint8Array(a.length);for(var d=0;d<a.length;d++)b[d]=a.charCodeAt(d);d=[b]}else d=[a];return new Blob(d,{type:c})}e.exports=a}),null);
__d("isHDScreen",[],(function(a,b,c,d,e,f){"use strict";function a(){if(window.devicePixelRatio>1.5)return!0;var a="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";return window.matchMedia&&window.matchMedia(a).matches?!0:!1}e.exports=a}),null);
__d("Asset3DUtils",["ActorURI","AsyncRequest","XAsset3DUpdateFallbackImageController","dataUriToBlob","Asset3DBackgroundMap","Asset3DBackgroundSize","isHDScreen","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/images/asset3d/backgrounds/",h="/images/asset3d/backgrounds/thumbnails/";a={fileEquals:function(a,b){return!!a&&!!b&&a.name===b.name&&a.size===b.size&&a.lastModified===b.lastModified},getBackgroundStyles:function(a,c){__p&&__p();if(!a)return null;a=b("Asset3DBackgroundMap")[a];a&&(b("isHDScreen")()?a=a[c].hd:a=a[c].normal);if(a)switch(c){case b("Asset3DBackgroundSize").STORY:a=g+a;return{backgroundImage:"url("+a+")",backgroundSize:"cover"};case b("Asset3DBackgroundSize").THUMBNAIL:a=h+a;return{backgroundImage:"url("+a+")",backgroundSize:"100%"}}return null},takeScreenshot:function(a){return b("dataUriToBlob")(a.toDataURL("image/png"))},saveScreenshot:function(a,c,d){c=b("ActorURI").create(b("XAsset3DUpdateFallbackImageController").getURIBuilder().setFBID("id",String(c)).getURI(),d);d=new FormData();d.append("fallback_image",a);new(b("AsyncRequest"))().setURI(c).setMethod("POST").setRawData(d).setErrorHandler(function(a){a&&a.errorDescription&&!1}).send()}};e.exports=a}),null);
__d("GLTFSceneLogEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GLTF_SCENE_NETWORK_LOAD_START:"gltf_scene_network_load_start",GLTF_SCENE_NETWORK_LOAD_END:"gltf_scene_network_load_end",GLTF_SCENE_GLB_PARSING_START:"gltf_scene_glb_parsing_start",GLTF_SCENE_GLB_PARSING_END:"gltf_scene_glb_parsing_end",GLTF_SCENE_GPU_UPLOAD_START:"gltf_scene_gpu_upload_start",GLTF_SCENE_GPU_UPLOAD_END:"gltf_scene_gpu_upload_end",GLTF_SCENE_AVG_RENDER_FRAME_RATE:"gltf_scene_avg_render_frame_rate",GLTF_SCENE_ON_TOUCH_PAN_END:"gltf_scene_on_touch_pan_end",GLTF_SCENE_ON_TOUCH_PINCH_END:"gltf_scene_on_touch_pinch_end",GLTF_SCENE_WRITE_TIME:"gltf_scene_write_time",GLTF_SCENE_ON_FAKE_GYRO_END_WWW:"gltf_scene_on_fake_gyro_end_www",GLTF_SCENE_VIEWPORT_SIZE_ERROR:"gltf_scene_viewport_size_error"})}),null);
__d("GltfScenePerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setActiveDurationMs=function(a){this.$1.active_duration_ms=a;return this};a.prototype.setAsset3dID=function(a){this.$1.asset3d_id=a;return this};a.prototype.setCompressionLevel=function(a){this.$1.compression_level=a;return this};a.prototype.setCompressionType=function(a){this.$1.compression_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGltfSceneAvgRenderFrameRate=function(a){this.$1.gltf_scene_avg_render_frame_rate=a;return this};a.prototype.setSceneURL=function(a){this.$1.scene_url=a;return this};a.prototype.setStartTimeMs=function(a){this.$1.start_time_ms=a;return this};a.prototype.setStoryID=function(a){this.$1.story_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={active_duration_ms:!0,asset3d_id:!0,compression_level:!0,compression_type:!0,event:!0,gltf_scene_avg_render_frame_rate:!0,scene_url:!0,start_time_ms:!0,story_id:!0,vc:!0};e.exports=a}),null);
__d("GLTFSceneLoggerUtils",["GltfScenePerformanceTypedLogger","GLTFSceneLogEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.data={frameCount:0,timeSinceLastFPSLogMs:0,touchPanStartMs:0,fakeGyroStartMs:0},this.$1={asset3dID:a,sceneURL:b,storyID:c}}a.prototype.logNetworkLoadEvents=function(a,c,d){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_START,{startTimeMs:a.networkLoad.startTimeMs}),this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_NETWORK_LOAD_END,{activeDurationMs:a.networkLoad.durationMs,compressor:c,compressionLevel:d})};a.prototype.logGpuUploadStart=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_START)};a.prototype.logGpuUploadEnd=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GPU_UPLOAD_END,{activeDurationMs:a})};a.prototype.logAverageFrameRate=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_AVG_RENDER_FRAME_RATE,{averageFrameRate:a})};a.prototype.logGlbParsingEvents=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_START,{startTimeMs:a.glbParsing.startTimeMs}),this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_GLB_PARSING_END,{activeDurationMs:a.glbParsing.durationMs})};a.prototype.logOnTouchPanEnd=function(a){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_ON_TOUCH_PAN_END,{activeDurationMs:a})};a.prototype.logOnFakeGyroEnd=function(a){if(a<1e3)return;this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_ON_FAKE_GYRO_END_WWW,{activeDurationMs:a})};a.prototype.logViewportSizeError=function(){this.$2(b("GLTFSceneLogEvents").GLTF_SCENE_VIEWPORT_SIZE_ERROR)};a.prototype.$2=function(a){var c=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],d=new(b("GltfScenePerformanceTypedLogger"))().setEvent(a).setAsset3dID(this.$1.asset3dID).setSceneURL(this.$1.sceneURL).setActiveDurationMs(c.activeDurationMs).setStartTimeMs(c.startTimeMs).setGltfSceneAvgRenderFrameRate(c.averageFrameRate);this.$1.storyID&&d.setStoryID(this.$1.storyID);d.log()};e.exports=a}),null);
__d("degToRad",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a*Math.PI/180}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/szRD2xg2JXY/
 */
__d("gl-matrix-2.4.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g},i;function j(){__p&&__p();(function(a,b){if(typeof g==="object"&&typeof h==="object")h.exports=b();else if(typeof i==="function"&&i.amd)i([],b);else{b=b();for(var c in b)(typeof g==="object"?g:a)[c]=b[c]}})(this,function(){__p&&__p();return function(a){__p&&__p();var b={};function c(f){if(b[f])return b[f].exports;var d=b[f]={i:f,l:!1,exports:{}};a[f].call(d.exports,d,d.exports,c);d.l=!0;return d.exports}c.m=a;c.c=b;c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:d})};c.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};c.d(b,"a",b);return b};c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};c.p="";return c(c.s=4)}([function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.setMatrixArrayType=a;b.toRadian=c;b.equals=h;var d=b.EPSILON=1e-6;b.ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;b.RANDOM=Math.random;function a(a){b.ARRAY_TYPE=a}var g=Math.PI/180;function c(a){return a*g}function h(a,b){return Math.abs(a-b)<=d*Math.max(1,Math.abs(a),Math.abs(b))}},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=undefined;b.create=g;b.fromMat4=h;b.clone=i;b.copy=j;b.fromValues=k;b.set=l;b.identity=m;b.transpose=n;b.invert=o;b.adjoint=p;b.determinant=q;b.multiply=r;b.translate=s;b.rotate=t;b.scale=u;b.fromTranslation=v;b.fromRotation=w;b.fromScaling=x;b.fromMat2d=y;b.fromQuat=z;b.normalFromMat4=A;b.projection=B;b.str=C;b.frob=D;b.add=E;b.subtract=F;b.multiplyScalar=G;b.multiplyScalarAndAdd=H;b.exactEquals=I;b.equals=J;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){__p&&__p();var a=new d.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function h(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function i(a){__p&&__p();var b=new d.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b}function j(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function k(a,b,c,e,f,g,h,i,j){__p&&__p();var k=new d.ARRAY_TYPE(9);k[0]=a;k[1]=b;k[2]=c;k[3]=e;k[4]=f;k[5]=g;k[6]=h;k[7]=i;k[8]=j;return k}function l(a,b,c,d,e,f,g,h,i,j){__p&&__p();a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;return a}function m(a){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function n(a,b){__p&&__p();if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function o(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7];b=b[8];var k=b*g-h*j,l=-b*f+h*i,m=j*f-g*i,n=c*k+d*l+e*m;if(!n)return null;n=1/n;a[0]=k*n;a[1]=(-b*d+e*j)*n;a[2]=(h*d-e*g)*n;a[3]=l*n;a[4]=(b*c-e*i)*n;a[5]=(-h*c+e*f)*n;a[6]=m*n;a[7]=(-j*c+d*i)*n;a[8]=(g*c-d*f)*n;return a}function p(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7];b=b[8];a[0]=g*b-h*j;a[1]=e*j-d*b;a[2]=d*h-e*g;a[3]=h*i-f*b;a[4]=c*b-e*i;a[5]=e*f-c*h;a[6]=f*j-g*i;a[7]=d*i-c*j;a[8]=c*g-d*f;return a}function q(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];a=a[8];return b*(a*f-g*i)+c*(-a*e+g*h)+d*(i*e-f*h)}function r(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0],m=c[1],n=c[2],o=c[3],p=c[4],q=c[5],r=c[6],s=c[7];c=c[8];a[0]=l*d+m*g+n*j;a[1]=l*e+m*h+n*k;a[2]=l*f+m*i+n*b;a[3]=o*d+p*g+q*j;a[4]=o*e+p*h+q*k;a[5]=o*f+p*i+q*b;a[6]=r*d+s*g+c*j;a[7]=r*e+s*h+c*k;a[8]=r*f+s*i+c*b;return a}function s(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=h;a[5]=i;a[6]=l*d+c*g+j;a[7]=l*e+c*h+k;a[8]=l*f+c*i+b;return a}function t(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=Math.sin(c);c=Math.cos(c);a[0]=c*d+l*g;a[1]=c*e+l*h;a[2]=c*f+l*i;a[3]=c*g-l*d;a[4]=c*h-l*e;a[5]=c*i-l*f;a[6]=j;a[7]=k;a[8]=b;return a}function u(a,b,c){__p&&__p();var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function v(a,b){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function w(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function x(a,b){__p&&__p();a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function y(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}function z(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c+c,g=d+d,h=e+e;c=c*f;var i=d*f;d=d*g;var j=e*f,k=e*g;e=e*h;f=b*f;g=b*g;b=b*h;a[0]=1-d-e;a[3]=i-b;a[6]=j+g;a[1]=i+b;a[4]=1-c-e;a[7]=k-f;a[2]=j-g;a[5]=k+f;a[8]=1-c-d;return a}function A(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];var r=c*h-d*g,s=c*i-e*g,t=c*j-f*g,u=d*i-e*h,v=d*j-f*h,w=e*j-f*i,x=k*p-l*o,y=k*q-m*o;k=k*b-n*o;var z=l*q-m*p;l=l*b-n*p;m=m*b-n*q;n=r*m-s*l+t*z+u*k-v*y+w*x;if(!n)return null;n=1/n;a[0]=(h*m-i*l+j*z)*n;a[1]=(i*k-g*m-j*y)*n;a[2]=(g*l-h*k+j*x)*n;a[3]=(e*l-d*m-f*z)*n;a[4]=(c*m-e*k+f*y)*n;a[5]=(d*k-c*l-f*x)*n;a[6]=(p*w-q*v+b*u)*n;a[7]=(q*t-o*w-b*s)*n;a[8]=(o*v-p*t+b*r)*n;return a}function B(a,b,c){__p&&__p();a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/c;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function C(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function D(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}function E(a,b,c){__p&&__p();a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a}function F(a,b,c){__p&&__p();a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a}function G(a,b,c){__p&&__p();a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a}function H(b,c,d,a){__p&&__p();b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;b[6]=c[6]+d[6]*a;b[7]=c[7]+d[7]*a;b[8]=c[8]+d[8]*a;return b}function I(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function J(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7];a=a[8];var l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7];b=b[8];return Math.abs(c-l)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(e-m)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(f-n)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))&&Math.abs(g-o)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(o))&&Math.abs(h-p)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(i-q)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(q))&&Math.abs(j-r)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(r))&&Math.abs(k-s)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(s))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=r;b.sub=F},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.len=b.sqrDist=b.dist=b.div=b.mul=b.sub=undefined;b.create=g;b.clone=h;b.length=i;b.fromValues=j;b.copy=k;b.set=l;b.add=m;b.subtract=n;b.multiply=o;b.divide=p;b.ceil=q;b.floor=r;b.min=s;b.max=t;b.round=u;b.scale=v;b.scaleAndAdd=w;b.distance=x;b.squaredDistance=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.cross=E;b.lerp=F;b.hermite=G;b.bezier=H;b.random=I;b.transformMat4=J;b.transformMat3=K;b.transformQuat=L;b.rotateX=M;b.rotateY=N;b.rotateZ=O;b.angle=P;b.str=Q;b.exactEquals=R;b.equals=S;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a}function h(a){var b=new d.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function i(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function j(a,b,c){var e=new d.ARRAY_TYPE(3);e[0]=a;e[1]=b;e[2]=c;return e}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function l(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a}function m(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a}function n(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function o(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function p(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function q(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a}function r(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a}function s(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a}function t(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a}function u(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a}function v(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a}function w(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;return b}function x(a,b){var c=b[0]-a[0],d=b[1]-a[1];b=b[2]-a[2];return Math.sqrt(c*c+d*d+b*b)}function y(a,b){var c=b[0]-a[0],d=b[1]-a[1];b=b[2]-a[2];return c*c+d*d+b*b}function z(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a}function C(a,b){var c=b[0],d=b[1],e=b[2];c=c*c+d*d+e*e;c>0&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function E(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];a[0]=e*c-b*g;a[1]=b*f-d*c;a[2]=d*g-e*f;return a}function F(a,b,c,d){var e=b[0],f=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=b+d*(c[2]-b);return a}function G(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1);g=g*(3-2*f);a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*g;a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*g;a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*g;return a}function H(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g;h=3*f*h;g=3*i*g;i=i*f;a[0]=b[0]*j+c[0]*h+d[0]*g+e[0]*i;a[1]=b[1]*j+c[1]*h+d[1]*g+e[1]*i;a[2]=b[2]*j+c[2]*h+d[2]*g+e[2]*i;return a}function I(b,a){a=a||1;var c=d.RANDOM()*2*Math.PI,e=d.RANDOM()*2-1,f=Math.sqrt(1-e*e)*a;b[0]=Math.cos(c)*f;b[1]=Math.sin(c)*f;b[2]=e*a;return b}function J(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[3]*d+c[7]*e+c[11]*b+c[15];f=f||1;a[0]=(c[0]*d+c[4]*e+c[8]*b+c[12])/f;a[1]=(c[1]*d+c[5]*e+c[9]*b+c[13])/f;a[2]=(c[2]*d+c[6]*e+c[10]*b+c[14])/f;return a}function K(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=d*c[0]+e*c[3]+b*c[6];a[1]=d*c[1]+e*c[4]+b*c[7];a[2]=d*c[2]+e*c[5]+b*c[8];return a}function L(a,b,c){__p&&__p();var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1],h=c[2];c=c[3];var i=c*d+g*b-h*e,j=c*e+h*d-f*b,k=c*b+f*e-g*d;d=-f*d-g*e-h*b;a[0]=i*c+d*-f+j*-h-k*-g;a[1]=j*c+d*-g+k*-f-i*-h;a[2]=k*c+d*-h+i*-g-j*-f;return a}function M(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0];f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function N(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d);f[1]=e[1];f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function O(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);f[2]=e[2];a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function P(a,b){__p&&__p();a=j(a[0],a[1],a[2]);b=j(b[0],b[1],b[2]);C(a,a);C(b,b);a=D(a,b);if(a>1)return 0;else if(a<-1)return Math.PI;else return Math.acos(a)}function Q(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}function R(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function S(a,b){var c=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.sub=n;b.mul=o;b.div=p;b.dist=x;b.sqrDist=y;b.len=i;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=3);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.len=b.sqrDist=b.dist=b.div=b.mul=b.sub=undefined;b.create=g;b.clone=h;b.fromValues=i;b.copy=j;b.set=k;b.add=l;b.subtract=m;b.multiply=n;b.divide=o;b.ceil=p;b.floor=q;b.min=r;b.max=s;b.round=t;b.scale=u;b.scaleAndAdd=v;b.distance=w;b.squaredDistance=x;b.length=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.lerp=E;b.random=F;b.transformMat4=G;b.transformQuat=H;b.str=I;b.exactEquals=J;b.equals=K;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}function h(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function i(a,b,c,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f}function j(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function k(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a}function l(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a}function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function n(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a}function o(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a}function p(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a}function q(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a}function r(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a}function s(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a}function t(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a}function u(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a}function v(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;return b}function w(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];b=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+b*b)}function x(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];b=b[3]-a[3];return c*c+d*d+e*e+b*b}function y(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)}function z(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a}function C(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*c+d*d+e*e+b*b;f>0&&(f=1/Math.sqrt(f),a[0]=c*f,a[1]=d*f,a[2]=e*f,a[3]=b*f);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function E(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=g+d*(c[2]-g);a[3]=b+d*(c[3]-b);return a}function F(a,b){b=b||1;a[0]=d.RANDOM();a[1]=d.RANDOM();a[2]=d.RANDOM();a[3]=d.RANDOM();C(a,a);u(a,a,b);return a}function G(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*b;a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*b;a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*b;a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*b;return a}function H(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];c=c[3];var j=c*d+h*f-i*e,k=c*e+i*d-g*f,l=c*f+g*e-h*d;d=-g*d-h*e-i*f;a[0]=j*c+d*-g+k*-i-l*-h;a[1]=k*c+d*-h+l*-g-j*-i;a[2]=l*c+d*-i+j*-h-k*-g;a[3]=b[3];return a}function I(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function J(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function K(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],i=b[2];b=b[3];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.sub=m;b.mul=n;b.div=o;b.dist=w;b.sqrDist=x;b.len=y;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=4);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.vec4=b.vec3=b.vec2=b.quat=b.mat4=b.mat3=b.mat2d=b.mat2=b.glMatrix=undefined;var d=c(0);d=a(d);var g=c(5);g=a(g);var h=c(6);h=a(h);var i=c(1);i=a(i);var j=c(7);j=a(j);var k=c(8);k=a(k);var l=c(9);l=a(l);var m=c(2);m=a(m);c=c(3);a=a(c);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}b.glMatrix=d;b.mat2=g;b.mat2d=h;b.mat3=i;b.mat4=j;b.quat=k;b.vec2=l;b.vec3=m;b.vec4=a},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=undefined;b.create=g;b.clone=h;b.copy=i;b.identity=j;b.fromValues=k;b.set=l;b.transpose=m;b.invert=n;b.adjoint=o;b.determinant=p;b.multiply=q;b.rotate=r;b.scale=s;b.fromRotation=t;b.fromScaling=u;b.str=v;b.frob=w;b.LDU=x;b.add=y;b.subtract=z;b.exactEquals=A;b.equals=B;b.multiplyScalar=C;b.multiplyScalarAndAdd=D;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a}function h(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function i(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function j(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a}function k(a,b,c,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f}function l(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a}function m(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a}function n(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*b-e*d;if(!f)return null;f=1/f;a[0]=b*f;a[1]=-d*f;a[2]=-e*f;a[3]=c*f;return a}function o(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a}function p(a){return a[0]*a[3]-a[2]*a[1]}function q(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],i=c[2];c=c[3];a[0]=d*g+f*h;a[1]=e*g+b*h;a[2]=d*i+f*c;a[3]=e*i+b*c;return a}function r(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*g;a[1]=e*c+b*g;a[2]=d*-g+f*c;a[3]=e*-g+b*c;return a}function s(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0];c=c[1];a[0]=d*g;a[1]=e*g;a[2]=f*c;a[3]=b*c;return a}function t(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;return a}function u(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a}function v(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function w(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))}function x(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]}function y(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a}function z(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function A(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function B(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],i=b[2];b=b[3];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}function C(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a}function D(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;return b}b.mul=q;b.sub=z},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=undefined;b.create=g;b.clone=h;b.copy=i;b.identity=j;b.fromValues=k;b.set=l;b.invert=m;b.determinant=n;b.multiply=o;b.rotate=p;b.scale=q;b.translate=r;b.fromRotation=s;b.fromScaling=t;b.fromTranslation=u;b.str=v;b.frob=w;b.add=x;b.subtract=y;b.multiplyScalar=z;b.multiplyScalarAndAdd=A;b.exactEquals=B;b.equals=C;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function h(a){var b=new d.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b}function i(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function j(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function k(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);h[0]=a;h[1]=b;h[2]=c;h[3]=e;h[4]=f;h[5]=g;return h}function l(a,b,c,d,e,f,g){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;return a}function m(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4];b=b[5];var h=c*f-d*e;if(!h)return null;h=1/h;a[0]=f*h;a[1]=-d*h;a[2]=-e*h;a[3]=c*h;a[4]=(e*b-f*g)*h;a[5]=(d*g-c*b)*h;return a}function n(a){return a[0]*a[3]-a[1]*a[2]}function o(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0],j=c[1],k=c[2],l=c[3],m=c[4];c=c[5];a[0]=d*i+f*j;a[1]=e*i+g*j;a[2]=d*k+f*l;a[3]=e*k+g*l;a[4]=d*m+f*c+h;a[5]=e*m+g*c+b;return a}function p(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*i;a[1]=e*c+g*i;a[2]=d*-i+f*c;a[3]=e*-i+g*c;a[4]=h;a[5]=b;return a}function q(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0];c=c[1];a[0]=d*i;a[1]=e*i;a[2]=f*c;a[3]=g*c;a[4]=h;a[5]=b;return a}function r(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=d*i+f*c+h;a[5]=e*i+g*c+b;return a}function s(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a}function t(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a}function u(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a}function v(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"}function w(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)}function x(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a}function y(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a}function z(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a}function A(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;return b}function B(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]}function C(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4];a=a[5];var i=b[0],j=b[1],k=b[2],l=b[3],m=b[4];b=b[5];return Math.abs(c-i)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(i))&&Math.abs(e-j)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(j))&&Math.abs(f-k)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(g-l)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(h-m)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=o;b.sub=y},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=undefined;b.create=g;b.clone=h;b.copy=i;b.fromValues=j;b.set=k;b.identity=l;b.transpose=m;b.invert=n;b.adjoint=o;b.determinant=p;b.multiply=q;b.translate=r;b.scale=s;b.rotate=t;b.rotateX=u;b.rotateY=v;b.rotateZ=w;b.fromTranslation=x;b.fromScaling=y;b.fromRotation=z;b.fromXRotation=A;b.fromYRotation=B;b.fromZRotation=C;b.fromRotationTranslation=D;b.getTranslation=E;b.getScaling=F;b.getRotation=G;b.fromRotationTranslationScale=H;b.fromRotationTranslationScaleOrigin=I;b.fromQuat=J;b.frustum=K;b.perspective=L;b.perspectiveFromFieldOfView=M;b.ortho=N;b.lookAt=O;b.targetTo=P;b.str=Q;b.frob=R;b.add=S;b.subtract=T;b.multiplyScalar=U;b.multiplyScalarAndAdd=V;b.exactEquals=W;b.equals=X;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){__p&&__p();var a=new d.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a){__p&&__p();var b=new d.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}function i(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function j(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=new d.ARRAY_TYPE(16);r[0]=a;r[1]=b;r[2]=c;r[3]=e;r[4]=f;r[5]=g;r[6]=h;r[7]=i;r[8]=j;r[9]=k;r[10]=l;r[11]=m;r[12]=n;r[13]=o;r[14]=p;r[15]=q;return r}function k(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;a[9]=k;a[10]=l;a[11]=m;a[12]=n;a[13]=o;a[14]=p;a[15]=q;return a}function l(a){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function m(a,b){__p&&__p();if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function n(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];var r=c*h-d*g,s=c*i-e*g,t=c*j-f*g,u=d*i-e*h,v=d*j-f*h,w=e*j-f*i,x=k*p-l*o,y=k*q-m*o,z=k*b-n*o,A=l*q-m*p,B=l*b-n*p,C=m*b-n*q,D=r*C-s*B+t*A+u*z-v*y+w*x;if(!D)return null;D=1/D;a[0]=(h*C-i*B+j*A)*D;a[1]=(e*B-d*C-f*A)*D;a[2]=(p*w-q*v+b*u)*D;a[3]=(m*v-l*w-n*u)*D;a[4]=(i*z-g*C-j*y)*D;a[5]=(c*C-e*z+f*y)*D;a[6]=(q*t-o*w-b*s)*D;a[7]=(k*w-m*t+n*s)*D;a[8]=(g*B-h*z+j*x)*D;a[9]=(d*z-c*B-f*x)*D;a[10]=(o*v-p*t+b*r)*D;a[11]=(l*t-k*v-n*r)*D;a[12]=(h*y-g*A-i*x)*D;a[13]=(c*A-d*y+e*x)*D;a[14]=(p*s-o*u-q*r)*D;a[15]=(k*u-l*s+m*r)*D;return a}function o(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];a[0]=h*(m*b-n*q)-l*(i*b-j*q)+p*(i*n-j*m);a[1]=-(d*(m*b-n*q)-l*(e*b-f*q)+p*(e*n-f*m));a[2]=d*(i*b-j*q)-h*(e*b-f*q)+p*(e*j-f*i);a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i));a[4]=-(g*(m*b-n*q)-k*(i*b-j*q)+o*(i*n-j*m));a[5]=c*(m*b-n*q)-k*(e*b-f*q)+o*(e*n-f*m);a[6]=-(c*(i*b-j*q)-g*(e*b-f*q)+o*(e*j-f*i));a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i);a[8]=g*(l*b-n*p)-k*(h*b-j*p)+o*(h*n-j*l);a[9]=-(c*(l*b-n*p)-k*(d*b-f*p)+o*(d*n-f*l));a[10]=c*(h*b-j*p)-g*(d*b-f*p)+o*(d*j-f*h);a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h));a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l));a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l);a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h));a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h);return a}function p(a){__p&&__p();var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14];a=a[15];var q=b*g-c*f,r=b*h-d*f;b=b*i-e*f;f=c*h-d*g;c=c*i-e*g;g=d*i-e*h;d=j*o-k*n;i=j*p-l*n;e=j*a-m*n;h=k*p-l*o;j=k*a-m*o;n=l*a-m*p;return q*n-r*j+b*h+f*e-c*i+g*d}function q(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14];b=b[15];var s=c[0],t=c[1],u=c[2],v=c[3];a[0]=s*d+t*h+u*l+v*p;a[1]=s*e+t*i+u*m+v*q;a[2]=s*f+t*j+u*n+v*r;a[3]=s*g+t*k+u*o+v*b;s=c[4];t=c[5];u=c[6];v=c[7];a[4]=s*d+t*h+u*l+v*p;a[5]=s*e+t*i+u*m+v*q;a[6]=s*f+t*j+u*n+v*r;a[7]=s*g+t*k+u*o+v*b;s=c[8];t=c[9];u=c[10];v=c[11];a[8]=s*d+t*h+u*l+v*p;a[9]=s*e+t*i+u*m+v*q;a[10]=s*f+t*j+u*n+v*r;a[11]=s*g+t*k+u*o+v*b;s=c[12];t=c[13];u=c[14];v=c[15];a[12]=s*d+t*h+u*l+v*p;a[13]=s*e+t*i+u*m+v*q;a[14]=s*f+t*j+u*n+v*r;a[15]=s*g+t*k+u*o+v*b;return a}function r(a,b,c){__p&&__p();var d=c[0],e=c[1];c=c[2];var f;void 0;var g;void 0;var h;void 0;var i;void 0;var j;void 0;var k;void 0;var l;void 0;var m;void 0;var n;void 0;var o;void 0;var p;void 0;var q;void 0;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=i,a[4]=j,a[5]=k,a[6]=l,a[7]=m,a[8]=n,a[9]=o,a[10]=p,a[11]=q,a[12]=f*d+j*e+n*c+b[12],a[13]=g*d+k*e+o*c+b[13],a[14]=h*d+l*e+p*c+b[14],a[15]=i*d+m*e+q*c+b[15]);return a}function s(a,b,c){__p&&__p();var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function t(a,b,c,e){__p&&__p();var f=e[0],g=e[1];e=e[2];var h=Math.sqrt(f*f+g*g+e*e),i=void 0;void 0;void 0;var j;void 0;var k;void 0;var l;void 0;var m;void 0;var n;void 0;var o;void 0;var p;void 0;var q;void 0;var r;void 0;var s;void 0;var t;void 0;var u;void 0;var v;void 0;var w;void 0;var x;void 0;var y;void 0;var z;void 0;var A;void 0;var B;void 0;void 0;void 0;if(Math.abs(h)<d.EPSILON)return null;h=1/h;f*=h;g*=h;e*=h;i=Math.sin(c);h=Math.cos(c);c=1-h;j=b[0];k=b[1];l=b[2];m=b[3];n=b[4];o=b[5];p=b[6];q=b[7];r=b[8];s=b[9];t=b[10];u=b[11];v=f*f*c+h;w=g*f*c+e*i;x=e*f*c-g*i;y=f*g*c-e*i;z=g*g*c+h;A=e*g*c+f*i;B=f*e*c+g*i;g=g*e*c-f*i;f=e*e*c+h;a[0]=j*v+n*w+r*x;a[1]=k*v+o*w+s*x;a[2]=l*v+p*w+t*x;a[3]=m*v+q*w+u*x;a[4]=j*y+n*z+r*A;a[5]=k*y+o*z+s*A;a[6]=l*y+p*z+t*A;a[7]=m*y+q*z+u*A;a[8]=j*B+n*g+r*f;a[9]=k*B+o*g+s*f;a[10]=l*B+p*g+t*f;a[11]=m*B+q*g+u*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function u(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],i=b[8],j=b[9],k=b[10],l=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+i*d;a[5]=f*c+j*d;a[6]=g*c+k*d;a[7]=h*c+l*d;a[8]=i*c-e*d;a[9]=j*c-f*d;a[10]=k*c-g*d;a[11]=l*c-h*d;return a}function v(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],i=b[8],j=b[9],k=b[10],l=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-i*d;a[1]=f*c-j*d;a[2]=g*c-k*d;a[3]=h*c-l*d;a[8]=e*d+i*c;a[9]=f*d+j*c;a[10]=g*d+k*c;a[11]=h*d+l*c;return a}function w(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],i=b[4],j=b[5],k=b[6],l=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+i*d;a[1]=f*c+j*d;a[2]=g*c+k*d;a[3]=h*c+l*d;a[4]=i*c-e*d;a[5]=j*c-f*d;a[6]=k*c-g*d;a[7]=l*c-h*d;return a}function x(a,b){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function y(a,b){__p&&__p();a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,b,c){__p&&__p();var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c),h=void 0;void 0;void 0;if(Math.abs(g)<d.EPSILON)return null;g=1/g;e*=g;f*=g;c*=g;h=Math.sin(b);g=Math.cos(b);b=1-g;a[0]=e*e*b+g;a[1]=f*e*b+c*h;a[2]=c*e*b-f*h;a[3]=0;a[4]=e*f*b-c*h;a[5]=f*f*b+g;a[6]=c*f*b+e*h;a[7]=0;a[8]=e*c*b+f*h;a[9]=f*c*b-e*h;a[10]=c*c*b+g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function A(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function C(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function D(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2];b=b[3];var g=d+d,h=e+e,i=f+f,j=d*g,k=d*h;d=d*i;var l=e*h;e=e*i;f=f*i;g=b*g;h=b*h;b=b*i;a[0]=1-(l+f);a[1]=k+b;a[2]=d-h;a[3]=0;a[4]=k-b;a[5]=1-(j+f);a[6]=e+g;a[7]=0;a[8]=d+h;a[9]=e-g;a[10]=1-(j+l);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function E(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function F(a,b){var c=b[0],d=b[1],e=b[2],f=b[4],g=b[5],h=b[6],i=b[8],j=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+e*e);a[1]=Math.sqrt(f*f+g*g+h*h);a[2]=Math.sqrt(i*i+j*j+b*b);return a}function G(a,b){var c=b[0]+b[5]+b[10];c>0?(c=Math.sqrt(c+1)*2,a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=Math.sqrt(1+b[0]-b[5]-b[10])*2,a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=Math.sqrt(1+b[5]-b[0]-b[10])*2,a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=Math.sqrt(1+b[10]-b[0]-b[5])*2,a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a}function H(a,b,c,d){__p&&__p();var e=b[0],f=b[1],g=b[2];b=b[3];var h=e+e,i=f+f,j=g+g,k=e*h,l=e*i;e=e*j;var m=f*i;f=f*j;g=g*j;h=b*h;i=b*i;b=b*j;j=d[0];var n=d[1];d=d[2];a[0]=(1-(m+g))*j;a[1]=(l+b)*j;a[2]=(e-i)*j;a[3]=0;a[4]=(l-b)*n;a[5]=(1-(k+g))*n;a[6]=(f+h)*n;a[7]=0;a[8]=(e+i)*d;a[9]=(f-h)*d;a[10]=(1-(k+m))*d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function I(a,b,c,d,e){__p&&__p();var f=b[0],g=b[1],h=b[2];b=b[3];var i=f+f,j=g+g,k=h+h,l=f*i,m=f*j;f=f*k;var n=g*j;g=g*k;h=h*k;i=b*i;j=b*j;b=b*k;k=d[0];var o=d[1];d=d[2];var p=e[0],q=e[1];e=e[2];a[0]=(1-(n+h))*k;a[1]=(m+b)*k;a[2]=(f-j)*k;a[3]=0;a[4]=(m-b)*o;a[5]=(1-(l+h))*o;a[6]=(g+i)*o;a[7]=0;a[8]=(f+j)*d;a[9]=(g-i)*d;a[10]=(1-(l+n))*d;a[11]=0;a[12]=c[0]+p-(a[0]*p+a[4]*q+a[8]*e);a[13]=c[1]+q-(a[1]*p+a[5]*q+a[9]*e);a[14]=c[2]+e-(a[2]*p+a[6]*q+a[10]*e);a[15]=1;return a}function J(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c+c,g=d+d,h=e+e;c=c*f;var i=d*f;d=d*g;var j=e*f,k=e*g;e=e*h;f=b*f;g=b*g;b=b*h;a[0]=1-d-e;a[1]=i+b;a[2]=j-g;a[3]=0;a[4]=i-b;a[5]=1-c-e;a[6]=k+f;a[7]=0;a[8]=j+g;a[9]=k-f;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function K(a,b,c,d,e,f,g){__p&&__p();var h=1/(c-b),i=1/(e-d),j=1/(f-g);a[0]=f*2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f*2*i;a[6]=0;a[7]=0;a[8]=(c+b)*h;a[9]=(e+d)*i;a[10]=(g+f)*j;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f*2*j;a[15]=0;return a}function L(a,b,c,d,e){__p&&__p();b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a}function M(a,b,c,d){__p&&__p();var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),i=2/(e+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=i;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(e-f)*i*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a}function N(a,b,c,d,e,f,g){__p&&__p();var h=1/(b-c),i=1/(d-e),j=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*i;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*j;a[11]=0;a[12]=(b+c)*h;a[13]=(e+d)*i;a[14]=(g+f)*j;a[15]=1;return a}function O(a,b,c,e){__p&&__p();var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0;void 0;var o=b[0],p=b[1];b=b[2];var q=e[0],r=e[1];e=e[2];var s=c[0],t=c[1];c=c[2];if(Math.abs(o-s)<d.EPSILON&&Math.abs(p-t)<d.EPSILON&&Math.abs(b-c)<d.EPSILON)return mat4.identity(a);l=o-s;m=p-t;n=b-c;s=1/Math.sqrt(l*l+m*m+n*n);l*=s;m*=s;n*=s;f=r*n-e*m;g=e*l-q*n;h=q*m-r*l;s=Math.sqrt(f*f+g*g+h*h);!s?(f=0,g=0,h=0):(s=1/s,f*=s,g*=s,h*=s);i=m*h-n*g;j=n*f-l*h;k=l*g-m*f;s=Math.sqrt(i*i+j*j+k*k);!s?(i=0,j=0,k=0):(s=1/s,i*=s,j*=s,k*=s);a[0]=f;a[1]=i;a[2]=l;a[3]=0;a[4]=g;a[5]=j;a[6]=m;a[7]=0;a[8]=h;a[9]=k;a[10]=n;a[11]=0;a[12]=-(f*o+g*p+h*b);a[13]=-(i*o+j*p+k*b);a[14]=-(l*o+m*p+n*b);a[15]=1;return a}function P(a,b,c,d){__p&&__p();var e=b[0],f=b[1];b=b[2];var g=d[0],h=d[1];d=d[2];var i=e-c[0],j=f-c[1];c=b-c[2];var k=i*i+j*j+c*c;k>0&&(k=1/Math.sqrt(k),i*=k,j*=k,c*=k);k=h*c-d*j;d=d*i-g*c;g=g*j-h*i;a[0]=k;a[1]=d;a[2]=g;a[3]=0;a[4]=j*g-c*d;a[5]=c*k-i*g;a[6]=i*d-j*k;a[7]=0;a[8]=i;a[9]=j;a[10]=c;a[11]=0;a[12]=e;a[13]=f;a[14]=b;a[15]=1;return a}function Q(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function R(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}function S(a,b,c){__p&&__p();a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a}function T(a,b,c){__p&&__p();a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}function U(a,b,c){__p&&__p();a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a}function V(b,c,d,a){__p&&__p();b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;b[6]=c[6]+d[6]*a;b[7]=c[7]+d[7]*a;b[8]=c[8]+d[8]*a;b[9]=c[9]+d[9]*a;b[10]=c[10]+d[10]*a;b[11]=c[11]+d[11]*a;b[12]=c[12]+d[12]*a;b[13]=c[13]+d[13]*a;b[14]=c[14]+d[14]*a;b[15]=c[15]+d[15]*a;return b}function W(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function X(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14];a=a[15];var s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14];b=b[15];return Math.abs(c-s)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(s))&&Math.abs(e-t)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(f-u)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(g-v)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(v))&&Math.abs(h-w)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(i-x)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(j-y)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(y))&&Math.abs(k-z)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-A)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(m-B)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(n-C)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(o-D)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(p-E)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(q-F)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(F))&&Math.abs(r-G)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(G))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=q;b.sub=T},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.setAxes=b.sqlerp=b.rotationTo=b.equals=b.exactEquals=b.normalize=b.sqrLen=b.squaredLength=b.len=b.length=b.lerp=b.dot=b.scale=b.mul=b.add=b.set=b.copy=b.fromValues=b.clone=undefined;b.create=i;b.identity=j;b.setAxisAngle=k;b.getAxisAngle=l;b.multiply=m;b.rotateX=n;b.rotateY=o;b.rotateZ=p;b.calculateW=q;b.slerp=r;b.invert=s;b.conjugate=t;b.fromMat3=u;b.fromEuler=v;b.str=w;j=c(0);var d=a(j);l=c(1);var g=a(l);n=c(2);var h=a(n);o=c(3);p=a(o);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function i(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function j(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function k(a,b,c){c=c*.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function l(a,b){var c=Math.acos(b[3])*2,d=Math.sin(c/2);d!=0?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c}function m(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],i=c[2];c=c[3];a[0]=d*c+b*g+e*i-f*h;a[1]=e*c+b*h+f*g-d*i;a[2]=f*c+b*i+d*h-e*g;a[3]=b*c-d*g-e*h-f*i;return a}function n(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*g;a[1]=e*c+f*g;a[2]=f*c-e*g;a[3]=b*c-d*g;return a}function o(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-f*g;a[1]=e*c+b*g;a[2]=f*c+d*g;a[3]=b*c-e*g;return a}function p(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=e*c-d*g;a[2]=f*c+b*g;a[3]=b*c-f*g;return a}function q(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a}function r(a,b,c,d){__p&&__p();var e=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],i=c[1],j=c[2];c=c[3];var k=void 0,l;void 0;var m=void 0,n=void 0;void 0;l=e*h+f*i+g*j+b*c;l<0&&(l=-l,h=-h,i=-i,j=-j,c=-c);1-l>1e-6?(k=Math.acos(l),m=Math.sin(k),n=Math.sin((1-d)*k)/m,l=Math.sin(d*k)/m):(n=1-d,l=d);a[0]=n*e+l*h;a[1]=n*f+l*i;a[2]=n*g+l*j;a[3]=n*b+l*c;return a}function s(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*c+d*d+e*e+b*b;f=f?1/f:0;a[0]=-c*f;a[1]=-d*f;a[2]=-e*f;a[3]=b*f;return a}function t(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a}function u(a,b){__p&&__p();var c=b[0]+b[4]+b[8];void 0;if(c>0)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[d*3+d]&&(d=2);var e=(d+1)%3,f=(d+2)%3;c=Math.sqrt(b[d*3+d]-b[e*3+e]-b[f*3+f]+1);a[d]=.5*c;c=.5/c;a[3]=(b[e*3+f]-b[f*3+e])*c;a[e]=(b[e*3+d]+b[d*3+e])*c;a[f]=(b[f*3+d]+b[d*3+f])*c}return a}function v(a,b,c,d){__p&&__p();var e=.5*Math.PI/180;b*=e;c*=e;d*=e;e=Math.sin(b);b=Math.cos(b);var f=Math.sin(c);c=Math.cos(c);var g=Math.sin(d);d=Math.cos(d);a[0]=e*c*d-b*f*g;a[1]=b*f*d+e*c*g;a[2]=b*c*g-e*f*d;a[3]=b*c*d+e*f*g;return a}function w(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}b.clone=p.clone;b.fromValues=p.fromValues;b.copy=p.copy;b.set=p.set;b.add=p.add;b.mul=m;b.scale=p.scale;b.dot=p.dot;b.lerp=p.lerp;q=b.length=p.length;b.len=q;s=b.squaredLength=p.squaredLength;b.sqrLen=s;var x=b.normalize=p.normalize;b.exactEquals=p.exactEquals;b.equals=p.equals;b.rotationTo=function(){__p&&__p();var a=h.create(),b=h.fromValues(1,0,0),c=h.fromValues(0,1,0);return function(d,e,f){__p&&__p();var g=h.dot(e,f);if(g<-.999999){h.cross(a,b,e);h.len(a)<1e-6&&h.cross(a,c,e);h.normalize(a,a);k(d,a,Math.PI);return d}else if(g>.999999){d[0]=0;d[1]=0;d[2]=0;d[3]=1;return d}else{h.cross(a,e,f);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+g;return x(d,d)}}}();b.sqlerp=function(){var a=i(),b=i();return function(c,d,e,f,g,h){r(a,d,g,h);r(b,e,f,h);r(c,a,b,2*h*(1-h));return c}}();b.setAxes=function(){__p&&__p();var a=g.create();return function(b,c,d,e){__p&&__p();a[0]=d[0];a[3]=d[1];a[6]=d[2];a[1]=e[0];a[4]=e[1];a[7]=e[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return x(b,u(b,a))}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.sqrDist=b.dist=b.div=b.mul=b.sub=b.len=undefined;b.create=g;b.clone=h;b.fromValues=i;b.copy=j;b.set=k;b.add=l;b.subtract=m;b.multiply=n;b.divide=o;b.ceil=p;b.floor=q;b.min=r;b.max=s;b.round=t;b.scale=u;b.scaleAndAdd=v;b.distance=w;b.squaredDistance=x;b.length=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.cross=E;b.lerp=F;b.random=G;b.transformMat2=H;b.transformMat2d=I;b.transformMat3=J;b.transformMat4=K;b.str=L;b.exactEquals=M;b.equals=N;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a}function h(a){var b=new d.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b}function i(a,b){var c=new d.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c}function j(a,b){a[0]=b[0];a[1]=b[1];return a}function k(a,b,c){a[0]=b;a[1]=c;return a}function l(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function n(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function o(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function p(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a}function q(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a}function r(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a}function s(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a}function t(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a}function u(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function v(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;return b}function w(a,b){var c=b[0]-a[0];b=b[1]-a[1];return Math.sqrt(c*c+b*b)}function x(a,b){var c=b[0]-a[0];b=b[1]-a[1];return c*c+b*b}function y(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function z(a){var b=a[0];a=a[1];return b*b+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];return a}function C(a,b){var c=b[0],d=b[1];c=c*c+d*d;c>0&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]}function E(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a}function F(a,b,c,d){var e=b[0];b=b[1];a[0]=e+d*(c[0]-e);a[1]=b+d*(c[1]-b);return a}function G(b,a){a=a||1;var c=d.RANDOM()*2*Math.PI;b[0]=Math.cos(c)*a;b[1]=Math.sin(c)*a;return b}function H(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a}function I(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a}function J(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a}function K(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a}function L(a){return"vec2("+a[0]+", "+a[1]+")"}function M(a,b){return a[0]===b[0]&&a[1]===b[1]}function N(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];return Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.len=y;b.sub=m;b.mul=n;b.div=o;b.dist=w;b.sqrDist=x;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=2);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}()}])})}var k=!1,l=function(){k||(k=!0,j());return h.exports};a=function(a){switch(a){case undefined:return l()}};e.exports=a}),null);
__d("gl-matrix",["gl-matrix-2.4.0"],(function(a,b,c,d,e,f){e.exports=b("gl-matrix-2.4.0")()}),null);
__d("radToDeg",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a*180/Math.PI}e.exports=a}),null);
__d("SphericalPhotoProjectionUtils",["degToRad","gl-matrix","radToDeg"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("gl-matrix").glMatrix;var g=b("gl-matrix").mat4,h=b("gl-matrix").vec3;a={getMaxMinVfov:function(a,c){var d=b("degToRad")(a.partialRightDegrees||180),e=b("degToRad")(a.partialLeftDegrees||180),f=b("degToRad")(a.partialTopDegrees||90);a=b("degToRad")(a.partialBottomDegrees||90);d=(d+e)/2;e=(f+a)/2;f=2*Math.atan(d/c);a=this.getMinFullVfov(e,e);return{maxVfov:b("radToDeg")(Math.max(f,a)),minVfov:b("radToDeg")(Math.min(a,f/2))}},getMaxVfov:function(a,b){return this.getMaxMinVfov(a,b).maxVfov},getMinFullVfov:function(a,b){a=(a+b)/2;return 2*Math.atan(a)},getMinFullHfov:function(a,b){a=(a+b)/2;return 2*Math.atan(a)},getZoomProgressFromFov:function(a,b,c){return Math.max(0,Math.min(1,(a-c)/(b-c)))},getZoomProgress:function(a,b,c){b=this.getMaxMinVfov(b,c);c=b.maxVfov;b=b.minVfov;return this.getZoomProgressFromFov(a,c,b)},getHfov:function(a,b){a=2*Math.atan(Math.tan(a/2)*b);return a},normalizeLimits:function(a){__p&&__p();var b=a.partialLeftDegrees||0,c=a.partialRightDegrees||0,d=a.partialTopDegrees||0;a=a.partialBottomDegrees||0;if(b<0&&c<0){var e=Math.max(b,c);b-=e;c-=e}if(d<0&&a<0){e=Math.max(d,a);d-=e;a-=e}return{partialLeftDegrees:b,partialRightDegrees:c,partialTopDegrees:d,partialBottomDegrees:a}},getPartialLimits:function(a,c,d){__p&&__p();var e=this.getMaxMinVfov(d,c),f=e.maxVfov;e=e.minVfov;var g=b("degToRad")(a);c=this.getHfov(g,c);e=this.getZoomProgressFromFov(a,f,e);c=Math.tan(c/2);g=Math.tan(g/2);var h=Math.sin(c)*e+c*(1-e);c=Math.cos(c)*e+1*(1-e);var i=Math.sin(g)*e+g*(1-e);g=Math.cos(g)*e+1*(1-e);e=function(c,d,e){var g=Math.sin(c);c=Math.cos(c);return a>f?0:b("radToDeg")(Math.atan2(g*e-c*d,g*d+c*e))};var j=b("degToRad")(d.partialLeftDegrees||180),k=b("degToRad")(d.partialRightDegrees||180),l=b("degToRad")(d.partialTopDegrees||90);d=b("degToRad")(d.partialBottomDegrees||90);return this.normalizeLimits({partialLeftDegrees:e(j,h,c),partialRightDegrees:e(k,h,c),partialTopDegrees:e(l,i,g),partialBottomDegrees:e(d,i,g)})},projectVertex:function(a,b,c,d){__p&&__p();var e=a[0];a=a[1];var f=c?Math.sin(e):Math.sin(e)*Math.cos(a),g=c?a:Math.sin(a);c=c?Math.cos(e):Math.cos(e)*Math.cos(a);f=d*f+(1-d)*e;g=d*g+(1-d)*a;c=d*c+(1-d)*1;e=h.fromValues(f,g,c);h.transformMat4(e,e,b);return e},getSphericalFromVertex:function(a){var b=a[0],c=a[1];a=a[2];var d=Math.atan2(b,a);c=Math.atan2(c,Math.sqrt(b*b+a*a));return{yaw:d,pitch:c}},getRelativeHfov:function(a,c,d){a=this.getPartialLimits(a,c,d);c=d.partialLeftDegrees||180;d=d.partialRightDegrees||180;var e=a.partialLeftDegrees||0;a=a.partialRightDegrees||0;return b("degToRad")(d-a+c-e)},getRelativeVfov:function(a,c,d){a=this.getPartialLimits(a,c,d);c=d.partialTopDegrees||90;d=d.partialBottomDegrees||90;var e=a.partialTopDegrees||0;a=a.partialBottomDegrees||0;return b("degToRad")(c-e+d-a)},convert2dTo3d:function(a,c,d,e,f,i){__p&&__p();var j=e/f,k=e/2,l=f/2;a=(a-k)*(2/e);k=(c-l)*(2/f);e=b("degToRad")(d.fov);c=this.getHfov(e,j);l=this.getMinFullHfov(b("degToRad")(i.partialLeftDegrees||180),b("degToRad")(i.partialRightDegrees||180));f=Math.tan(e/2);e=Math.tan(c/2);c=Math.tan(Math.min(c,l)/2);l=a*e;a=-k*f;if(l>c||l<-c)return null;e=this.getZoomProgress(d.fov,i,j);k=g.create();g.rotateY(k,k,b("degToRad")(d.yaw));g.rotateX(k,k,-b("degToRad")(d.pitch));f=this.projectVertex(h.fromValues(l,a,-1),k,!1,e);c=this.getSphericalFromVertex(f);i=b("radToDeg")(c.yaw);return{yaw:i<0?360+i:i,pitch:b("radToDeg")(c.pitch)}},convert3dTo2d:function(a,c,d,e,f,i){__p&&__p();a=b("degToRad")(a);c=b("degToRad")(c);var j=b("degToRad")(d.fov),k=e/f,l=this.getHfov(j,k),m=this.getMinFullHfov(b("degToRad")(i.partialLeftDegrees||180),b("degToRad")(i.partialRightDegrees||180)),n=Math.tan(l/2);l=Math.tan(Math.min(l,m)/2);m=l/n;l=this.getMinFullVfov(b("degToRad")(i.partialTopDegrees||90),b("degToRad")(i.partialBottomDegrees||90));n=Math.tan(j/2);j=Math.tan(Math.min(j,l)/2);l=j/n;j=this.getRelativeHfov(d.fov,k,i);n=this.getRelativeVfov(d.fov,k,i);k=g.create();g.rotateY(k,k,b("degToRad")(d.yaw));g.rotateX(k,k,-b("degToRad")(d.pitch));g.invert(k,k);i=a+Math.PI;d=c+Math.PI/2;a=-Math.sin(d)*Math.sin(i);c=-Math.cos(d);d=-Math.sin(d)*Math.cos(i);i=h.fromValues(a,c,d);h.transformMat4(i,i,k);a=Math.atan2(i[0],i[2]);c=Math.atan2(i[1],Math.sqrt(i[0]*i[0]+i[2]*i[2]));d=.5+a*m/j;k=.5-c*l/n;return{x:d*e,y:k*f}}};e.exports=a}),null);
__d("createExponentialMovingAverage",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){var b=arguments.length<=1||arguments[1]===undefined?0:arguments[1],c=b;return function(b){return c+=a*(b-c)}}function g(a){return function(b){return 1-Math.exp(-b/a)}}function b(a){var b=arguments.length<=1||arguments[1]===undefined?0:arguments[1],c=b,d=g(a);return function(a,b){return c+=d(b)*(a-c)}}a.createContinuous=b;e.exports=a}),null);
__d("VelocityTracker",["createExponentialMovingAverage","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();function a(){var a=arguments.length<=0||arguments[0]===undefined?50:arguments[0],c=arguments.length<=1||arguments[1]===undefined?{x:0,y:0}:arguments[1];this.$5=c.x;this.$6=c.y;this.$1=b("performanceNow")();this.$2=b("createExponentialMovingAverage").createContinuous(a,this.$5);this.$3=b("createExponentialMovingAverage").createContinuous(a,this.$6)}a.prototype.update=function(a,c){"use strict";var d=0;this.$4?(d=b("performanceNow")()-this.$1,d=this.updateVelocity((a-this.$4.x)*1e3/d,(c-this.$4.y)*1e3/d)):this.$1=b("performanceNow")();this.$4={x:a,y:c};return d};a.prototype.updateVelocity=function(a,c){"use strict";var d=b("performanceNow")(),e=d-this.$1;this.$1=d;this.$5=this.$2(a,e);this.$6=this.$3(c,e);return e};a.prototype.getVelocityX=function(){"use strict";return Math.trunc(this.$5)};a.prototype.getVelocityY=function(){"use strict";return Math.trunc(this.$6)};a.prototype.getSpeed=function(){"use strict";return Math.trunc(Math.sqrt(this.$5*this.$5+this.$6*this.$6))};e.exports=a}),null);
__d("calculateHFOVFromVFOV",["degToRad","radToDeg"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){a=b("radToDeg")(Math.atan(Math.tan(b("degToRad")(a/2))*c)*2);return(a%360+360)%360};e.exports=a}),null);
__d("calculateVFOVFromHFOV",["degToRad","radToDeg"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){a=b("radToDeg")(Math.atan(Math.tan(b("degToRad")(a)/2)/c))*2;return(a%360+360)%360};e.exports=a}),null);
__d("SphericalViewportControl",["csx","cx","invariant","Bootloader","CSS","DOMQuery","Event","EventEmitter","Keys","Parent","SubscriptionsHandler","UserAgent","VelocityTracker","SphericalPhotoProjectionUtils","calculateHFOVFromVFOV","calculateVFOVFromHFOV","debounce","getElementRect","gkx","performanceNow","requestAnimationFrame","throttle","uniqueID","degToRad","radToDeg","queryThenMutateDOM"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("DOMQuery").scry(window.document.body,"_li")[0]||window.document.body,l=navigator===undefined||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),m=.6,n=2.5,o=20,p=110,q=179,r=.01,s=1e3,t=.5,u=["W","A","S","D"].reduce(function(a,b){a[b]=b.charCodeAt(0);return a},{}),v={Up:"__tu",Down:"__tz",Left:"_2a6u",Right:"_2a6v",UpLeft:"__t-",UpRight:"__u0",DownLeft:"__u1",DownRight:"__u3"};c=babelHelpers.inherits(a,b("EventEmitter"));j=c&&c.prototype;function a(a,c){__p&&__p();var d=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=arguments.length<=4||arguments[4]===undefined?k:arguments[4];j.constructor.call(this);this.$SphericalViewportControl18=!1;this.$SphericalViewportControl19=!1;this.$SphericalViewportControl20=!1;this.$SphericalViewportControl45=!1;this.$SphericalViewportControl62=!1;this.$SphericalViewportControl64={x:1,y:1};this.$SphericalViewportControl65=!1;this.$SphericalViewportControl66=null;this.$SphericalViewportControl69=!1;this.$SphericalViewportControl89=function(a){__p&&__p();a.deliberateSync=!0;if(this.$SphericalViewportControl67){if(a.shiftKey){var c=this.$SphericalViewportControl113(a),d=b("getElementRect")(this.$SphericalViewportControl32);if(c.x>d.left&&c.x<d.right&&c.y>d.top&&c.y<d.bottom){var e=(a.deltaX||0)+(a.deltaY||0)+(a.deltaZ||0),f=.5*(d.left+d.right),g=.5*(d.top+d.bottom);f={x:(c.x-f)/(d.right-d.left),y:(c.y-g)/(d.bottom-d.top)};this.emit("wheelScrollWithShiftKey",e,f)}a.preventDefault()}return}this.$SphericalViewportControl38&&a.preventDefault();this.$SphericalViewportControl123(a);this.$SphericalViewportControl46&&b("Event").kill(a)}.bind(this);this.$SphericalViewportControl126=function(a){this.emit("panningWithRightMouse",this.$SphericalViewportControl110());if(this.$SphericalViewportControl69){this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl126);return}this.emit("updateViewportEnd",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y);this.$SphericalViewportControl15=!1;this.$SphericalViewportControl66=null}.bind(this);this.$SphericalViewportControl127=function(a){__p&&__p();var c=(a-this.$SphericalViewportControl59)/1e3;this.$SphericalViewportControl59=a;this.$SphericalViewportControl128();this.$SphericalViewportControl60||b("queryThenMutateDOM")(this.$SphericalViewportControl90.bind(this),function(){return null});a=this.$SphericalViewportControl110();var d=!1;if(this.$SphericalViewportControl42&&this.$SphericalViewportControl54&&this.$SphericalViewportControl47&&!this.$SphericalViewportControl19&&!this.$SphericalViewportControl20){var e=this.$SphericalViewportControl129()*c;a.x+=e;var f=this.$SphericalViewportControl130()*c;a.y+=f;(e||f)&&(d=!0)}a.x+=this.$SphericalViewportControl8.getVelocityX()*c;a.y+=this.$SphericalViewportControl8.getVelocityY()*c;a.x+=this.$SphericalViewportControl9.getVelocityX()*c;a.y+=this.$SphericalViewportControl9.getVelocityY()*c;a.x*=this.$SphericalViewportControl64.x;a.y*=this.$SphericalViewportControl64.y;this.$SphericalViewportControl131(a.x,a.y);e=this.$SphericalViewportControl8.getSpeed()>0||this.$SphericalViewportControl9.getSpeed()>0;if(this.$SphericalViewportControl19||this.$SphericalViewportControl18||this.$SphericalViewportControl20||this.$SphericalViewportControl57||this.$SphericalViewportControl45||e||d)this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl127);else{this.$SphericalViewportControl15=!1;this.$SphericalViewportControl66=null;f={yaw:this.$SphericalViewportControl26.x,pitch:this.$SphericalViewportControl26.y};c=this.getCurrentViewport();this.$SphericalViewportControl4.pitch+=f.pitch-c.pitch;this.$SphericalViewportControl4.yaw-=f.yaw-c.yaw;this.emit("updateViewportEnd",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y)}}.bind(this);this.$SphericalViewportControl123=b("throttle")(function(a){this.emit("wheelScroll",a);if(!this.$SphericalViewportControl46)return;a=(a.deltaX||0)+(a.deltaY||0)+(a.deltaZ||0);a=a/120*45/10;this.$SphericalViewportControl98(a)}.bind(this),30);this.$SphericalViewportControl4={pitch:0,yaw:0};this.$SphericalViewportControl5=c.dragVelocityFactor||m;this.$SphericalViewportControl3=!1;this.$SphericalViewportControl8=new(b("VelocityTracker"))(300);this.$SphericalViewportControl9=new(b("VelocityTracker"))(300);this.$SphericalViewportControl13=new(b("SubscriptionsHandler"))();this.$SphericalViewportControl32=a;this.$SphericalViewportControl10=f;this.$SphericalViewportControl51=o;this.$SphericalViewportControl52=p;this.$SphericalViewportControl53=q;this.$SphericalViewportControl63=e;this.$SphericalViewportControl70(c);this.$SphericalViewportControl21={x:0,y:0};this.$SphericalViewportControl59=0;this.$SphericalViewportControl17={left:0,right:0,up:0,down:0};this.$SphericalViewportControl23={x:0,y:0};this.$SphericalViewportControl24={x:0,y:0};this.$SphericalViewportControl25=new(b("VelocityTracker"))();this.$SphericalViewportControl30=new Map();this.$SphericalViewportControl38=!1;this.$SphericalViewportControl22=!1;this.$SphericalViewportControl27=!1;this.$SphericalViewportControl71(d);this.$SphericalViewportControl57=!1;this.$SphericalViewportControl58=0;this.$SphericalViewportControl56=b("debounce")(function(){return this.emit("zoomStart")}.bind(this),s);this.$SphericalViewportControl37=this.$SphericalViewportControl72();this.$SphericalViewportControl61=[];this.$SphericalViewportControl31=this.addNewLayer(this.$SphericalViewportControl32);var g=b("gkx")("AT6wort62ftT8nJ8tjXEnN_v1U7sMjgy49hKFdpNSQKKjigxquMojqnjaxkK4KUOQBxZ1-sDcK46ktB7tNKfJQMq");l&&g&&b("Bootloader").loadModules(["FullTilt"],function(a){a.getDeviceOrientation({type:"game"}).then(function(a){return this.$SphericalViewportControl73(a,c)}.bind(this))["catch"](function(a){return this.$SphericalViewportControl74(a)}.bind(this))}.bind(this),"SphericalViewportControl")}a.prototype.$SphericalViewportControl73=function(a,c){"use strict";if(c.partialLimits){var d=c.partialLimits,e=this.getVerticalFieldOfView(),f=this.getHorizontalFieldOfView();this.$SphericalViewportControl6={top:(d.partialTopDegrees||Infinity)-e/2,bottom:-(d.partialBottomDegrees||Infinity)+e/2,left:-(d.partialLeftDegrees||Infinity)+f/2,right:(d.partialRightDegrees||Infinity)-f/2}}b("Bootloader").loadModules(["MSphericalViewportControlEuler"],function(b){this.$SphericalViewportControl2=new b(a,c,this.$SphericalViewportControl6),this.$SphericalViewportControl2.setActive(!0),this.$SphericalViewportControl1=a,this.$SphericalViewportControl1.start(function(){return this.$SphericalViewportControl75()}.bind(this)),this.$SphericalViewportControl3=!0}.bind(this),"SphericalViewportControl")};a.prototype.$SphericalViewportControl75=function(){"use strict";var a={yaw:b("degToRad")(this.$SphericalViewportControl4.yaw-this.$SphericalViewportControl28.x),pitch:b("degToRad")(this.$SphericalViewportControl4.pitch+this.$SphericalViewportControl28.y)};this.$SphericalViewportControl2.onSensorUpdate();this.$SphericalViewportControl2.getRotationMatrix(a);a=this.getCurrentViewport();this.$SphericalViewportControl15||this.emit("viewportChange",a.yaw,a.pitch,this.$SphericalViewportControl11)};a.prototype.getCurrentViewport=function(){"use strict";var a={yaw:b("degToRad")(this.$SphericalViewportControl4.yaw-this.$SphericalViewportControl28.x),pitch:b("degToRad")(this.$SphericalViewportControl4.pitch+this.$SphericalViewportControl28.y)};return!this.$SphericalViewportControl3?{pitch:b("radToDeg")(a.pitch),yaw:b("radToDeg")(a.yaw)}:this.$SphericalViewportControl2.getCurrentViewport(a)||{pitch:b("radToDeg")(a.pitch),yaw:b("radToDeg")(a.yaw)}};a.prototype.$SphericalViewportControl74=function(a){"use strict";this.emit("sensorSetupError",{error:"SPHERICAL_GYROSCOPE_SETUP_FAILED",message:a})};a.prototype.isListening=function(a){"use strict";return Boolean(this.getSubscriptionKeyFromElement(a))};a.prototype.getSubscriptionKeyFromElement=function(a){"use strict";__p&&__p();for(var b=this.$SphericalViewportControl30,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(e.element===a)return f}return null};a.prototype.addNewLayer=function(a){"use strict";var c=this.getSubscriptionKeyFromElement(a);if(!c){c=b("uniqueID")();var d=new(b("SubscriptionsHandler"))();this.$SphericalViewportControl76(d,a);this.$SphericalViewportControl30.set(c,{handler:d,element:a})}return c};a.prototype.removeLayer=function(a){"use strict";var b=this.$SphericalViewportControl30.get(a);b&&(b.handler.release(),this.$SphericalViewportControl30["delete"](a))};a.prototype.destroy=function(){"use strict";this.removeAllListeners(),this.getSubscriptions().remove()};a.prototype.$SphericalViewportControl76=function(a,c){"use strict";__p&&__p();a.addSubscriptions(b("Event").listen(c,"mousedown",function(a){return this.$SphericalViewportControl77(a)}.bind(this)),b("Event").listen(c,"mouseenter",function(a){return this.$SphericalViewportControl78(a,c)}.bind(this)),b("Event").listen(c,"mouseleave",function(a){return this.$SphericalViewportControl79(a,c)}.bind(this)),b("Event").listen(c,"mousemove",function(a){return this.$SphericalViewportControl80(a)}.bind(this)),b("Event").listen(c,"mouseup",function(a){return this.$SphericalViewportControl81(a)}.bind(this)),b("Event").listen(c,"click",function(a){return this.$SphericalViewportControl82(a)}.bind(this)),b("Event").listen(c,"keydown",function(a){return this.$SphericalViewportControl83(a)}.bind(this)),b("Event").listen(c,"keyup",function(a){return this.$SphericalViewportControl84(a)}.bind(this)),b("Event").listen(c,"blur",function(a){return this.$SphericalViewportControl85(a)}.bind(this)),b("Event").listen(c,"touchstart",function(a){return this.$SphericalViewportControl86(a)}.bind(this)),b("Event").listen(c,"touchmove",function(a){return this.$SphericalViewportControl87(a)}.bind(this)),b("Event").listen(c,"touchend",function(a){return this.$SphericalViewportControl88(a)}.bind(this)),b("Event").listen(c,"touchcancel",function(a){return this.$SphericalViewportControl88(a)}.bind(this)),{remove:function(){c.removeEventListener("wheel",this.$SphericalViewportControl89)}.bind(this)})};a.prototype.$SphericalViewportControl70=function(a){"use strict";__p&&__p();this.$SphericalViewportControl90();this.$SphericalViewportControl7=this.$SphericalViewportControl34/this.$SphericalViewportControl35;var b=a.fieldOfView;this.$SphericalViewportControl46=Boolean(a.enableZoom);this.$SphericalViewportControl29=(a.panningVelocityFactor||0)/15*80||80;this.$SphericalViewportControl16=(a.keyboardVelocityFactor||0)*1e3||80;a.partialLimits?(this.$SphericalViewportControl39=a.partialLimits,this.$SphericalViewportControl42=!0):(this.$SphericalViewportControl42=!1,this.$SphericalViewportControl39={partialLeftDegrees:null,partialRightDegrees:null,partialTopDegrees:null,partialBottomDegrees:null});this.$SphericalViewportControl40=this.$SphericalViewportControl39;this.$SphericalViewportControl41=1;this.$SphericalViewportControl63&&(this.$SphericalViewportControl42=!0);this.$SphericalViewportControl28={x:a.initialHeading,y:a.initialPitch};a=this.$SphericalViewportControl39;var c=a.partialTopDegrees;a=a.partialBottomDegrees;if(!this.$SphericalViewportControl63&&(c||c===0)&&(a||a===0)){c=c;a=a;var d=c+a;b>d&&(b=d,this.$SphericalViewportControl28.y=(c-a)/2)}this.$SphericalViewportControl11=this.$SphericalViewportControl91(b);this.$SphericalViewportControl12=this.$SphericalViewportControl11;this.$SphericalViewportControl92();this.$SphericalViewportControl26={x:this.$SphericalViewportControl28.x,y:this.$SphericalViewportControl28.y}};a.prototype.$SphericalViewportControl71=function(){__p&&__p();var a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.$SphericalViewportControl43=a.enableGyro||!1;this.$SphericalViewportControl44=a.slipFactor||0;this.$SphericalViewportControl47=a.springFactor||0;this.$SphericalViewportControl48=a.maxSpringDegrees||15;this.$SphericalViewportControl49=a.maxStretchXDegrees||20;this.$SphericalViewportControl50=a.maxStretchYDegrees||20;this.$SphericalViewportControl55=a.rubberBandConstant||0;this.$SphericalViewportControl54=a.enableRubberBanding||!1;this.$SphericalViewportControl67=a.enableZoomWithShiftKey||!1;this.$SphericalViewportControl68=a.enablePanningWithRightMouse||!1;this.$SphericalViewportControl60=a.disableAutoClientSizeUpdate||!1};a.prototype.reconfigure=function(a){"use strict";this.$SphericalViewportControl70(a)};a.prototype.reconfigureControlConfig=function(){var a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.$SphericalViewportControl71(a)};a.prototype.setEnableGyro=function(a){"use strict";this.$SphericalViewportControl43=a};a.prototype.$SphericalViewportControl77=function(a){"use strict";this.$SphericalViewportControl65&&this.$SphericalViewportControl93(),this.isListening(a.target)&&(this.$SphericalViewportControl19=!0,this.$SphericalViewportControl94(a))};a.prototype.$SphericalViewportControl86=function(a){"use strict";this.$SphericalViewportControl62=!1,this.$SphericalViewportControl65&&this.$SphericalViewportControl93(),this.$SphericalViewportControl20?(this.$SphericalViewportControl95(a),this.$SphericalViewportControl20=!1):this.$SphericalViewportControl20=!0,this.$SphericalViewportControl94(a)};a.prototype.$SphericalViewportControl95=function(a){"use strict";a.touches.length===2&&this.$SphericalViewportControl46&&(this.$SphericalViewportControl57=!0,this.$SphericalViewportControl58=this.$SphericalViewportControl96(a))};a.prototype.$SphericalViewportControl87=function(a){"use strict";this.$SphericalViewportControl62=!0,this.$SphericalViewportControl57&&(this.$SphericalViewportControl97(a),this.$SphericalViewportControl46&&b("Event").kill(a))};a.prototype.$SphericalViewportControl97=function(a){"use strict";a=this.$SphericalViewportControl96(a);var b=this.$SphericalViewportControl11*(this.$SphericalViewportControl58/a);b=b-this.$SphericalViewportControl11;this.$SphericalViewportControl98(b);this.$SphericalViewportControl58=a};a.prototype.$SphericalViewportControl96=function(a){"use strict";var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;return Math.sqrt(Math.pow(b,2)+Math.pow(a,2))};a.prototype.$SphericalViewportControl88=function(a){"use strict";this.$SphericalViewportControl62||(a.target.focus(a),this.$SphericalViewportControl82(a)),this.$SphericalViewportControl57?this.$SphericalViewportControl57=!1:this.$SphericalViewportControl20&&this.$SphericalViewportControl99(a)};a.prototype.$SphericalViewportControl94=function(a){"use strict";this.emit("onMovementStart"),this.$SphericalViewportControl100(),this.$SphericalViewportControl101(a),this.$SphericalViewportControl102(a),this.$SphericalViewportControl68&&(a.which===3||a.button===2)&&(this.$SphericalViewportControl69=!0,this.$SphericalViewportControl15=!1),this.$SphericalViewportControl103(),a.preventDefault()};a.prototype.$SphericalViewportControl99=function(a){"use strict";this.$SphericalViewportControl45&&!this.$SphericalViewportControl19&&(this.$SphericalViewportControl104(),this.$SphericalViewportControl45=!1)};a.prototype.$SphericalViewportControl105=function(a){"use strict";this.$SphericalViewportControl65&&this.$SphericalViewportControl93()};a.prototype.$SphericalViewportControl106=function(a){"use strict";this.$SphericalViewportControl102(a),this.$SphericalViewportControl14=!0,this.emit("updateViewportMove")};a.prototype.$SphericalViewportControl107=function(a){"use strict";this.$SphericalViewportControl45&&(this.$SphericalViewportControl108(a),this.emit("updateViewportMove"))};a.prototype.$SphericalViewportControl100=function(){"use strict";this.$SphericalViewportControl15=!1,this.$SphericalViewportControl45=!1,this.$SphericalViewportControl43=!1};a.prototype.$SphericalViewportControl109=function(a){"use strict";this.$SphericalViewportControl102(a),this.$SphericalViewportControl110(),this.$SphericalViewportControl93(),this.$SphericalViewportControl104(),a.preventDefault()};a.prototype.$SphericalViewportControl93=function(a){"use strict";this.$SphericalViewportControl65=!1,b("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl32.style.cursor=""}.bind(this)),this.$SphericalViewportControl20=!1,this.$SphericalViewportControl19=!1,this.$SphericalViewportControl69=!1,this.$SphericalViewportControl13.release(),this.$SphericalViewportControl36&&(b("CSS").removeClass(this.$SphericalViewportControl10,this.$SphericalViewportControl36),this.$SphericalViewportControl36="")};a.prototype.$SphericalViewportControl111=function(a){"use strict";if(this.$SphericalViewportControl20&&a.changedTouches)return a.changedTouches[0];else if(this.$SphericalViewportControl19)return a;else if(this.$SphericalViewportControl45)return a;return null};a.prototype.setMovementPosition=function(a){"use strict";this.$SphericalViewportControl23=this.$SphericalViewportControl112(a)};a.prototype.$SphericalViewportControl112=function(a){"use strict";a=this.$SphericalViewportControl111(a);return!a?this.$SphericalViewportControl23:{x:a.screenX,y:a.screenY}};a.prototype.$SphericalViewportControl113=function(a){"use strict";a=this.$SphericalViewportControl111(a);return!a?this.$SphericalViewportControl24:{x:a.clientX,y:a.clientY}};a.prototype.$SphericalViewportControl101=function(a){"use strict";__p&&__p();this.$SphericalViewportControl65=!0;this.$SphericalViewportControl23=this.$SphericalViewportControl112(a);this.$SphericalViewportControl21={x:0,y:0};this.$SphericalViewportControl25=new(b("VelocityTracker"))();this.$SphericalViewportControl9=new(b("VelocityTracker"))(300);b("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl32.style.cursor=this.$SphericalViewportControl37}.bind(this));this.$SphericalViewportControl13.engage();a=this.$SphericalViewportControl10;this.$SphericalViewportControl20?this.$SphericalViewportControl13.addSubscriptions(b("Event").listen(a,"touchmove",function(a){return this.$SphericalViewportControl106(a)}.bind(this)),b("Event").listen(a,"touchend",function(a){return this.$SphericalViewportControl109(a)}.bind(this)),b("Event").listen(a,"touchcancel",function(a){return this.$SphericalViewportControl105(a)}.bind(this))):this.$SphericalViewportControl13.addSubscriptions(b("Event").listen(a,"mousemove",function(a){return this.$SphericalViewportControl106(a)}.bind(this)),b("Event").listen(a,"mouseup",function(a){return this.$SphericalViewportControl109(a)}.bind(this)),b("Event").listen(a,"mouseleave",function(a){return this.$SphericalViewportControl105(a)}.bind(this)))};a.prototype.$SphericalViewportControl108=function(a){"use strict";this.$SphericalViewportControl114(a,this.$SphericalViewportControl44)};a.prototype.$SphericalViewportControl102=function(a){"use strict";this.$SphericalViewportControl114(a,1)};a.prototype.reEnableGyro=function(){"use strict";this.$SphericalViewportControl21={x:0,y:0},this.$SphericalViewportControl43=!0,this.$SphericalViewportControl45=!0,this.$SphericalViewportControl93()};a.prototype.$SphericalViewportControl114=function(a,b){"use strict";var c=this.$SphericalViewportControl112(a),d=c.x-this.$SphericalViewportControl23.x,e=c.y-this.$SphericalViewportControl23.y,f=this.$SphericalViewportControl22?{x:0,y:0}:this.$SphericalViewportControl21;this.$SphericalViewportControl21={x:b*(c.x-this.$SphericalViewportControl23.x)+f.x,y:b*(c.y-this.$SphericalViewportControl23.y)+f.y};this.$SphericalViewportControl4.yaw+=d*this.$SphericalViewportControl5;this.$SphericalViewportControl4.pitch+=e*this.$SphericalViewportControl5;this.$SphericalViewportControl22=!1;this.$SphericalViewportControl23=c;this.$SphericalViewportControl25.update(c.x,c.y);this.$SphericalViewportControl24=this.$SphericalViewportControl113(a)};a.prototype.$SphericalViewportControl115=function(){"use strict";var a=this.$SphericalViewportControl116(),b=-this.$SphericalViewportControl25.getVelocityX()*a;a=this.$SphericalViewportControl25.getVelocityY()*a;var c=this.$SphericalViewportControl45?this.$SphericalViewportControl44:1;this.$SphericalViewportControl117()&&(b=-b);return{x:b*c,y:a*c}};a.prototype.$SphericalViewportControl118=function(a,c){"use strict";return b("radToDeg")(Math.atan(a/c))};a.prototype.$SphericalViewportControl119=function(a,b,c){"use strict";return{x:this.$SphericalViewportControl118(a.x-this.$SphericalViewportControl34/2,c),y:-this.$SphericalViewportControl118(a.y-this.$SphericalViewportControl35/2,b)}};a.prototype.$SphericalViewportControl120=function(a,c){"use strict";__p&&__p();var d={x:a.x-c.x,y:a.y-c.y},e=this.$SphericalViewportControl35/(2*Math.tan(b("degToRad")(this.getVerticalFieldOfView()/2))),f=e*Math.cos(b("degToRad")(this.$SphericalViewportControl26.y));f=f-(this.$SphericalViewportControl35/2-a.y)*Math.sin(b("degToRad")(this.$SphericalViewportControl26.y));if(this.$SphericalViewportControl26.y==-90&&c.y<0||this.$SphericalViewportControl26.y==90&&c.y>0){c=this.$SphericalViewportControl118(d.y-this.$SphericalViewportControl35/2,d.x-this.$SphericalViewportControl34/2);var g=this.$SphericalViewportControl118(a.y-this.$SphericalViewportControl35/2,a.x-this.$SphericalViewportControl34/2);g=g-c;g>90?g=180-g:g<-90&&(g=180+g);return{x:g*Math.sign(this.$SphericalViewportControl26.y),y:0}}else{c=this.$SphericalViewportControl119(d,e,f);g=this.$SphericalViewportControl119(a,e,f);return{x:c.x-g.x,y:c.y-g.y}}};a.prototype.$SphericalViewportControl117=function(){"use strict";var a=this.$SphericalViewportControl33?this.$SphericalViewportControl33.top:b("getElementRect")(this.$SphericalViewportControl32).top;a=this.$SphericalViewportControl24.y-a;var c=this.$SphericalViewportControl35/(2*Math.tan(b("degToRad")(this.getVerticalFieldOfView()/2)));c=-c/Math.tan(b("degToRad")(this.$SphericalViewportControl26.y))+this.$SphericalViewportControl35/2;a=a>c&&this.$SphericalViewportControl26.y<0||a<c&&this.$SphericalViewportControl26.y>0;return a};a.prototype.$SphericalViewportControl110=function(){"use strict";__p&&__p();if(this.$SphericalViewportControl69){var a={x:0,y:0};this.$SphericalViewportControl22||(this.$SphericalViewportControl22=!0,a.x=this.$SphericalViewportControl21.x/this.$SphericalViewportControl34,a.y=this.$SphericalViewportControl21.y/this.$SphericalViewportControl35);return a}a={x:0,y:0};if(!this.$SphericalViewportControl22){this.$SphericalViewportControl22=!0;var b=this.$SphericalViewportControl33,c=this.$SphericalViewportControl24.x<b.left,d=this.$SphericalViewportControl24.x>b.right,e=this.$SphericalViewportControl24.y<b.top,f=this.$SphericalViewportControl24.y>b.bottom;this.$SphericalViewportControl121(c,d,e,f);b={x:this.$SphericalViewportControl24.x-b.left,y:this.$SphericalViewportControl24.y-b.top};!c&&!d?a.x=this.$SphericalViewportControl120(b,this.$SphericalViewportControl21).x:a.x=-this.$SphericalViewportControl21.x*this.$SphericalViewportControl116()*t;!e&&!f?a.y=this.$SphericalViewportControl120(b,this.$SphericalViewportControl21).y:a.y=this.$SphericalViewportControl21.y*this.$SphericalViewportControl116()*t}this.$SphericalViewportControl9.updateVelocity(0,0);return this.$SphericalViewportControl122(a)};a.prototype.$SphericalViewportControl122=function(a){"use strict";__p&&__p();if(!this.$SphericalViewportControl54||!this.$SphericalViewportControl42)return a;var b=this.$SphericalViewportControl26,c=b.x;b=b.y;var d=this.$SphericalViewportControl40,e=d.partialLeftDegrees,f=d.partialRightDegrees,g=d.partialTopDegrees;d=d.partialBottomDegrees;var h=a.x;a=a.y;var i=c+h;b=b+a;var j=!0,k=!0;!0;!0;if(this.$SphericalViewportControl63){var l=this.$SphericalViewportControl39.partialLeftDegrees,m=this.$SphericalViewportControl39.partialRightDegrees,n=this.$SphericalViewportControl41===0;(i<180&&h<0||i>180&&h>0)&&(i=c-h);(l!=null||!n)&&e!=null&&(j=e<0?(i<180?i+360:i)>360-e:i>360-e);(m!=null||!n)&&f!=null&&(k=f<0?(i<180?i+360:i)<360+f:(i>180?360-i:i)<f);c=g!=null?b<g:!0;l=d!=null?b>-d:!0}else{m=this.getVerticalFieldOfView();n=this.getHorizontalFieldOfView();var o=i<180?i+360:i;i=i>180?i-360:i;j=e!=null?o>360-e+n/2:!0;k=f!=null?i<f-n/2:!0;c=g!=null?b<g-m/2:!0;l=d!=null?b>-d+m/2:!0}!j&&!k&&(h*=this.$SphericalViewportControl55);(!c||!l)&&(a*=this.$SphericalViewportControl55);return{x:h,y:a}};a.prototype.$SphericalViewportControl78=function(a,c){"use strict";c.addEventListener("wheel",this.$SphericalViewportControl89),this.emit("mouseEnter"),this.$SphericalViewportControl19?this.$SphericalViewportControl9=new(b("VelocityTracker"))(300):this.$SphericalViewportControl43&&this.$SphericalViewportControl44&&(this.$SphericalViewportControl9=new(b("VelocityTracker"))(300),this.$SphericalViewportControl45=!0,this.$SphericalViewportControl23=this.$SphericalViewportControl112(a),this.$SphericalViewportControl21={x:0,y:0},this.$SphericalViewportControl103())};a.prototype.$SphericalViewportControl79=function(a,b){"use strict";b.removeEventListener("wheel",this.$SphericalViewportControl89),this.emit("mouseLeave",a),this.$SphericalViewportControl99(a)};a.prototype.$SphericalViewportControl80=function(a){"use strict";this.emit("mouseMove",a),this.$SphericalViewportControl43&&this.$SphericalViewportControl107(a)};a.prototype.$SphericalViewportControl81=function(a){"use strict";this.emit("mouseUp",a)};a.prototype.$SphericalViewportControl82=function(a){"use strict";__p&&__p();if(this.isListening(a.target)){a.target.focus();var c=b("Parent").bySelector(a.target,"._24cp");if(!this.$SphericalViewportControl14){this.emit("DOM/click",a);if(c)return!0}this.$SphericalViewportControl14=!1}return!1};a.prototype.$SphericalViewportControl98=function(a){"use strict";a=this.setFieldOfView(this.$SphericalViewportControl11+a);a&&this.$SphericalViewportControl56()};a.prototype.disableKeyboard=function(){"use strict";this.$SphericalViewportControl27=!0};a.prototype.enableKeyboard=function(){"use strict";this.$SphericalViewportControl27=!1};a.prototype.$SphericalViewportControl83=function(a){"use strict";a=this.$SphericalViewportControl124(a);if(a&&!this.$SphericalViewportControl27){this.$SphericalViewportControl17[a]=1;this.$SphericalViewportControl18||(this.$SphericalViewportControl18=!0,this.$SphericalViewportControl100(),this.$SphericalViewportControl103(),this.emit("updateViewportMove"));return!1}return!0};a.prototype.$SphericalViewportControl84=function(a){"use strict";__p&&__p();a=this.$SphericalViewportControl124(a);if(a&&!this.$SphericalViewportControl27){this.$SphericalViewportControl17[a]=0;a=!1;for(var b in this.$SphericalViewportControl17)if(Object.prototype.hasOwnProperty.call(this.$SphericalViewportControl17,b)&&this.$SphericalViewportControl17[b]>0){a=!0;break}this.$SphericalViewportControl18=a;return!1}return!0};a.prototype.$SphericalViewportControl104=function(){"use strict";var a=this.$SphericalViewportControl115();this.$SphericalViewportControl9=new(b("VelocityTracker"))(300,a)};a.prototype.$SphericalViewportControl103=function(){__p&&__p();var a,c=this;if(!this.$SphericalViewportControl15){var a=function(){__p&&__p();c.$SphericalViewportControl60&&c.$SphericalViewportControl125();c.$SphericalViewportControl15=!0;c.$SphericalViewportControl8.updateVelocity(0,0);c.emit("updateViewportBegin",c.$SphericalViewportControl26.x,c.$SphericalViewportControl26.y);var a=c.once("updateViewportMove",function(){return this.emit("updateViewportMoveStart",this.$SphericalViewportControl45)}.bind(c));c.once("updateViewportEnd",function(){return a.remove()});c.$SphericalViewportControl59=b("performanceNow")();if(c.$SphericalViewportControl69){c.$SphericalViewportControl66&&cancelAnimationFrame(c.$SphericalViewportControl66);c.$SphericalViewportControl66=b("requestAnimationFrame")(c.$SphericalViewportControl126);return{v:void 0}}c.$SphericalViewportControl66||(c.$SphericalViewportControl66=b("requestAnimationFrame")(c.$SphericalViewportControl127))}();if(typeof a==="object")return a.v}};a.prototype.$SphericalViewportControl125=function(){"use strict";this.$SphericalViewportControl33=b("getElementRect")(this.$SphericalViewportControl32)};a.prototype.updateViewportClientSize=function(a){"use strict";this.$SphericalViewportControl34=a.width,this.$SphericalViewportControl35=a.height};a.prototype.updateMinVFOV=function(a){"use strict";this.$SphericalViewportControl51=Math.max(n,Math.min(o,a))};a.prototype.updateMaxVFOV=function(a){"use strict";this.$SphericalViewportControl52=a};a.prototype.updateMaxHFOV=function(a){"use strict";this.$SphericalViewportControl53=a};a.prototype.$SphericalViewportControl90=function(){"use strict";this.$SphericalViewportControl33=b("getElementRect")(this.$SphericalViewportControl32),this.$SphericalViewportControl34=this.$SphericalViewportControl32.clientWidth||1,this.$SphericalViewportControl35=this.$SphericalViewportControl32.clientHeight||1};a.prototype.setAngularVelocityScaleFactor=function(a){"use strict";this.$SphericalViewportControl64=a};a.prototype.$SphericalViewportControl129=function(){"use strict";__p&&__p();var a=180,b=0,c=this.$SphericalViewportControl40,d=c.partialLeftDegrees;c=c.partialRightDegrees;d!=null&&c!=null&&(a=(c-d)/2+180);if(this.$SphericalViewportControl63){var e=this.$SphericalViewportControl39.partialLeftDegrees,f=this.$SphericalViewportControl39.partialRightDegrees,g=this.$SphericalViewportControl41===0;if((e!=null||!g)&&d!=null){e=d<0&&this.$SphericalViewportControl26.x<180?this.$SphericalViewportControl26.x+360:this.$SphericalViewportControl26.x;if(e>a){e=360-d-e;e>0&&(b=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}if((f!=null||!g)&&c!=null){e=c<0&&this.$SphericalViewportControl26.x>180?this.$SphericalViewportControl26.x-360:this.$SphericalViewportControl26.x;if(e<a){f=c-e;f<0&&(b=Math.max(f,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}}else{g=this.getHorizontalFieldOfView();e=this.$SphericalViewportControl26.x<180?this.$SphericalViewportControl26.x+360:this.$SphericalViewportControl26.x;f=this.$SphericalViewportControl26.x>180?this.$SphericalViewportControl26.x-360:this.$SphericalViewportControl26.x;if(d!=null&&c!=null&&d+c<g){var h=(c-d)/2-f;h>0?b=Math.min(h,this.$SphericalViewportControl48)*this.$SphericalViewportControl47:h<0&&(b=Math.max(h,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47);return Math.abs(b)<r?0:b}if(d!=null&&e>=a){h=360-d+g/2-e;h>0&&(b=Math.min(h,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null&&f<=a){d=c-g/2-f;d<0&&(b=Math.max(d,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}return Math.abs(b)<r?0:b};a.prototype.$SphericalViewportControl130=function(){"use strict";__p&&__p();var a=0,b=0,c=this.$SphericalViewportControl40,d=c.partialTopDegrees;c=c.partialBottomDegrees;if(this.$SphericalViewportControl63){if(c!=null&&d!=null){if(c<0&&d<-c||d<0&&-d>c)return 0;b=(d-c)/2}if(d!=null&&this.$SphericalViewportControl26.y>b){var e=d-this.$SphericalViewportControl26.y;e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null&&this.$SphericalViewportControl26.y<b){e=-c-this.$SphericalViewportControl26.y;e>0&&(a=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}else{b=this.getVerticalFieldOfView();if(c!=null&&d!=null&&c+d<b){e=(d-c)/2-this.$SphericalViewportControl26.y;e>0?a=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47:e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47);return Math.abs(a)<r?0:a}if(d!=null){e=d-b/2-this.$SphericalViewportControl26.y;e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null){d=-c+b/2-this.$SphericalViewportControl26.y;d>0&&(a=Math.min(d,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}return Math.abs(a)<r?0:a};a.prototype.$SphericalViewportControl121=function(a,c,d,e){"use strict";var f="";if(a||c||d||e){a=a?"Left":c?"Right":"";c=d?"Up":e?"Down":"";f=v[c+a]}this.$SphericalViewportControl36!=f&&(this.$SphericalViewportControl36&&(b("CSS").removeClass(this.$SphericalViewportControl10,this.$SphericalViewportControl36),this.$SphericalViewportControl36=""),f&&(this.$SphericalViewportControl36=f,b("CSS").addClass(this.$SphericalViewportControl10,f)))};a.prototype.getSubscriptions=function(){"use strict";return{remove:function(){this.$SphericalViewportControl30.forEach(function(a){a=a.handler;return a.release()}),this.$SphericalViewportControl30.clear(),this.$SphericalViewportControl13.release()}.bind(this)}};a.prototype.$SphericalViewportControl85=function(a){"use strict";for(var b in this.$SphericalViewportControl17)this.$SphericalViewportControl17[b]=0;this.$SphericalViewportControl18=!1};a.prototype.getOrientation=function(){"use strict";return this.$SphericalViewportControl26};a.prototype.$SphericalViewportControl92=function(a){"use strict";if(this.$SphericalViewportControl63){a=a!=null?a:this.getVerticalFieldOfView();var c=this.getAspectRatio();this.$SphericalViewportControl40=b("SphericalPhotoProjectionUtils").getPartialLimits(a,c,this.$SphericalViewportControl39);this.$SphericalViewportControl41=b("SphericalPhotoProjectionUtils").getZoomProgress(a,this.$SphericalViewportControl39,c)}};a.prototype.$SphericalViewportControl132=function(a,b){"use strict";__p&&__p();a=(a+360)%360;b=Math.max(-90,Math.min(90,b));if(!this.$SphericalViewportControl42)return{x:a,y:b};var c=this.$SphericalViewportControl39.partialLeftDegrees,d=this.$SphericalViewportControl39.partialRightDegrees,e=this.$SphericalViewportControl41===0,f=this.$SphericalViewportControl40.partialLeftDegrees,g=this.$SphericalViewportControl40.partialRightDegrees,h=this.$SphericalViewportControl40.partialTopDegrees,i=this.$SphericalViewportControl40.partialBottomDegrees,j=this.getVerticalFieldOfView(),k=this.getHorizontalFieldOfView(),l=0,m=0;if(this.$SphericalViewportControl63)this.$SphericalViewportControl54&&(f!=null&&g!=null&&(l=Math.min(Math.abs((f+g)/2),this.$SphericalViewportControl49)),h!=null&&i!=null&&h>=-i&&(m=Math.min(Math.abs((h+i)/2),this.$SphericalViewportControl50))),(c!=null||!e)&&f!=null&&(f<0?a=Math.max(a>180?a:a+360,360-f-l)%360:a>180&&(a=Math.max(a,360-f-l))),(d!=null||!e)&&g!=null&&(g<0?a=Math.min(a<180?a+360:a,360+g+l)%360:a<180&&(a=Math.min(a,g+l))),h!=null&&(i!=null&&h<0&&-h>i?b=Math.min(b,-i):b=Math.min(b,h+m)),i!=null&&(h!=null&&i<0&&h<-i?b=Math.max(b,h):b=Math.max(b,-i-m));else{this.$SphericalViewportControl54&&(l=this.$SphericalViewportControl49,m=this.$SphericalViewportControl50);if(f!=null&&g!=null&&f+g<k){c=(g-f)/2;d=a>180?a-360:a;d<c?a=Math.max(d,c-l):a=Math.min(d,c+l)}else f!=null&&(a=a<=180?a:Math.max(a,360-f+k/2-l)),g!=null&&(a=a>=180?a:Math.min(a,g-k/2+l));if(h!=null&&i!=null&&h+i<j){e=(h-i)/2;b<e?b=Math.max(b,e-m):b=Math.min(b,e+m)}else h!=null&&(b=Math.min(b,h-j/2+m)),i!=null&&(b=Math.max(b,-i+j/2-m))}return{x:a,y:b}};a.prototype.setInitialOrientation=function(){"use strict";var a=this.$SphericalViewportControl132(0,0),b=a.x;a=a.y;var c=!Number.isNaN(b+a)&&(b!==this.$SphericalViewportControl26.x||a!==this.$SphericalViewportControl26.y);c&&(this.$SphericalViewportControl26={x:b,y:a},this.emit("initialViewportChange",b,a),this.emit("viewportChange",b,a,this.$SphericalViewportControl11))};a.prototype.setSphericalOrientation=function(a,b){"use strict";a===null&&(a=this.$SphericalViewportControl26.x);b===null&&(b=this.$SphericalViewportControl26.y);typeof a==="number"&&typeof b==="number"||i(0);a=this.$SphericalViewportControl132(a,b);b=a.x;a=a.y;var c=!Number.isNaN(b+a)&&(b!==this.$SphericalViewportControl26.x||a!==this.$SphericalViewportControl26.y);c&&(this.$SphericalViewportControl26={x:b,y:a},this.emit("viewportChange",b,a,this.$SphericalViewportControl11))};a.prototype.setRelativeSphericalOrientation=function(a,b){"use strict";this.setSphericalOrientation(a+this.$SphericalViewportControl28.x,b+this.$SphericalViewportControl28.y)};a.prototype.$SphericalViewportControl131=function(a,b){"use strict";this.setSphericalOrientation(this.$SphericalViewportControl26.x+a,this.$SphericalViewportControl26.y+b)};a.prototype.$SphericalViewportControl91=function(a){"use strict";__p&&__p();if(this.$SphericalViewportControl63){var c=b("SphericalPhotoProjectionUtils").getMaxVfov(this.$SphericalViewportControl39,this.getAspectRatio());return Math.min(c,Math.max(this.$SphericalViewportControl51,a))}else{c=Math.min(b("calculateVFOVFromHFOV")(this.$SphericalViewportControl53,this.getAspectRatio()),this.$SphericalViewportControl52);if(this.$SphericalViewportControl42&&this.$SphericalViewportControl39){var d=this.$SphericalViewportControl39.partialTopDegrees||this.$SphericalViewportControl39.partialTopDegrees===0,e=this.$SphericalViewportControl39.partialBottomDegrees||this.$SphericalViewportControl39.partialBottomDegrees===0;if(d&&e){d=this.$SphericalViewportControl39.partialTopDegrees||0;e=this.$SphericalViewportControl39.partialBottomDegrees||0;c=Math.min(c,d+e)}}return Math.min(c,Math.max(this.$SphericalViewportControl51,a))}};a.prototype.setFieldOfView=function(a){"use strict";__p&&__p();var c=this.$SphericalViewportControl11;a=this.$SphericalViewportControl91(a);this.$SphericalViewportControl92(a);var d=this.$SphericalViewportControl40,e=d.partialTopDegrees,f=d.partialBottomDegrees,g=d.partialLeftDegrees;d=d.partialRightDegrees;var h=e||e===0,i=f||f===0,j=g||g===0,k=d||d===0,l=g||d;e=e||0;f=f||0;g=g||0;d=d||0;var m=!1,n=this.$SphericalViewportControl26.x,o=this.$SphericalViewportControl26.y;if(this.$SphericalViewportControl63){e=h?e:90;f=i?f:90;g=j?g:180;d=k?d:180;-o>f&&(f<0&&e<-f?o=e:o=-f,m=!0);o>e&&(e<0&&e<-f?o=-f:o=e,m=!0);j=((d-g)/2+180)%360;n>j&&360-n>g&&(n=360-g,m=!0);n<j&&n>d&&(n=d,m=!0)}else{k=b("calculateHFOVFromVFOV")(a,this.getAspectRatio());i&&a/2-o>f&&(o=a/2-f,m=!0);h&&o+a/2>e&&(o=e-a/2,m=!0);h&&i&&e+f<a&&(o=(e-f)/2,m=!0);if(l){j=((d-g)/2+180)%360;n>j&&k/2+360-n>g&&(n=360+k/2-g,m=!0);n<j&&n+k/2>d&&(n=d-k/2,m=!0);g+d<k&&(n=(d-g)/2%360,m=!0)}}!this.$SphericalViewportControl19&&!this.$SphericalViewportControl20&&m&&!Number.isNaN(n+o)&&(this.$SphericalViewportControl54?this.$SphericalViewportControl66||(this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl127)):this.$SphericalViewportControl26={x:n,y:o});if(!Number.isNaN(a)&&c!==a||m){this.$SphericalViewportControl11=a;this.emit("viewportChange",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y,a);return!0}return!1};a.prototype.getVerticalFieldOfView=function(){"use strict";return this.$SphericalViewportControl11};a.prototype.getAspectRatio=function(){"use strict";return this.$SphericalViewportControl32&&this.$SphericalViewportControl34&&this.$SphericalViewportControl35?this.$SphericalViewportControl34/this.$SphericalViewportControl35:this.$SphericalViewportControl7};a.prototype.getHorizontalFieldOfView=function(){"use strict";return b("calculateHFOVFromVFOV")(this.$SphericalViewportControl11,this.getAspectRatio())};a.prototype.setPreventScrollDefaultAction=function(a){"use strict";this.$SphericalViewportControl38=a};a.prototype.setEnableZoom=function(a){"use strict";this.$SphericalViewportControl46=a,a||this.setFieldOfView(this.$SphericalViewportControl12)};a.prototype.updateViewport=function(a,b,c){"use strict";this.$SphericalViewportControl26={x:a,y:b},this.$SphericalViewportControl11=this.$SphericalViewportControl91(c),this.$SphericalViewportControl92()};a.prototype.isUpdating=function(){"use strict";return this.$SphericalViewportControl15};a.prototype.$SphericalViewportControl128=function(){"use strict";var a=this.$SphericalViewportControl16*(this.$SphericalViewportControl17.right-this.$SphericalViewportControl17.left),b=this.$SphericalViewportControl16*(this.$SphericalViewportControl17.up-this.$SphericalViewportControl17.down);this.$SphericalViewportControl8.updateVelocity(a,b)};a.prototype.$SphericalViewportControl124=function(a){"use strict";__p&&__p();a=b("Event").getKeyCode(a);var c=null;switch(a){case b("Keys").LEFT:case u.A:c="left";break;case b("Keys").UP:case u.W:c="up";break;case b("Keys").RIGHT:case u.D:c="right";break;case b("Keys").DOWN:case u.S:c="down";break}return c};a.prototype.$SphericalViewportControl116=function(){"use strict";return this.$SphericalViewportControl11/this.$SphericalViewportControl35};a.prototype.$SphericalViewportControl72=function(){"use strict";var a="grabbing";b("UserAgent").isEngine("WebKit")?a="-webkit-"+a:b("UserAgent").isEngine("Gecko")&&(a="-moz-"+a);return a};e.exports=a}),null);
__d("Asset3dCameraControl",["ThreeJS.r88","degToRad","SphericalViewportControl","GLTFSceneLoggerUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("SphericalViewportControl").SphericalViewportControl;b("SphericalViewportControl").Vector;var g=.01,h=2e3,i=b("degToRad")(270),j=b("degToRad")(0),k=50,l=5e3;function a(a,c,d,e,f){this.__cameraTarget=new(b("ThreeJS.r88").Vector3)(),this.__cameraAnchor=new(b("ThreeJS.r88").Object3D)(),this.__width=0,this.__height=0,this.__yaw=i,this.__pitch=j,this.__dirty=!0,this.__initialOrientation=null,this.__cameraInitialPosition=null,this.__cameraInitialTarget=null,this.__isInAttractMode=!1,this.__attractModeAnimationFrameID=null,this.$1=null,this.__fullVisibility=!1,this.__pageVisibility=!0,this.__width=c,this.__height=d,this.__camera=new(b("ThreeJS.r88").PerspectiveCamera)(k,this.__width/this.__height,g,h),this.__cameraAnchor.add(this.__camera),f.add(this.__cameraAnchor),this.__sphericalViewportControl=a,this.__loggerUtils=e,this.setupViewportListeners(),this.setDirty(!0),document.addEventListener("visibilitychange",function(){this.__pageVisibility=document.visibilityState==="visible",this.setDirty(!0,!0)}.bind(this))}a.prototype.modelLoad=function(a){};a.prototype.setupViewportListeners=function(){};a.prototype.update=function(a){};a.prototype.camera=function(){return this.__camera};a.prototype.destroy=function(){this.$1&&(clearTimeout(this.$1),this.$1=null)};a.prototype.isDirty=function(){return this.__dirty};a.prototype.setDirty=function(a){var b=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];this.__dirty=a;a&&b&&(this.__isInAttractMode&&this.__exitAttractMode(),this.$1&&clearTimeout(this.$1),this.__fullVisibility&&this.__pageVisibility&&(this.$1=setTimeout(function(){this.$1=null,this.__enterAttractMode()}.bind(this),l)))};a.prototype.setFullVisibility=function(a){this.__fullVisibility=a};a.prototype.resetCamera=function(){};a.prototype.__updateResetCamera=function(){};a.prototype.shouldSuppressNux=function(){return!0};a.prototype.__updateCameraAnchor=function(a,b){var c=-.001*Math.cos(a)*Math.cos(b),d=.001*Math.sin(a);a=-.001*Math.cos(a)*Math.sin(b);this.__cameraAnchor.position.set(c+this.__cameraTarget.x,d+this.__cameraTarget.y,a+this.__cameraTarget.z);this.__cameraAnchor.lookAt(this.__cameraTarget)};a.prototype.__enterAttractMode=function(){this.__isInAttractMode=!0};a.prototype.__exitAttractMode=function(){this.__attractModeAnimationFrameID!==null&&(cancelAnimationFrame(this.__attractModeAnimationFrameID),this.__attractModeAnimationFrameID=null),this.__isInAttractMode=!1};e.exports=a}),null);
__d("Asset3dContextMenu",["EventListener","UserAgent","CurrentUser","React","ReactXUIMenu","MountedContextMenu.react","ReactDOM","Event"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReactXUIMenu").Item;function a(a,c,d){this.$5=function(a){var c=/^a$/i.test(a.target.nodeName||""),d=b("UserAgent").isPlatform("Mac OS X")?a.getModifiers().meta:a.getModifiers().ctrl;c=!c&&b("CurrentUser").isEmployee()&&d;c?(a.preventDefault(),this.$6()):(b("ReactDOM").unmountComponentAtNode(this.$1),delete this.$3)}.bind(this),this.$1=a,this.$2=c,this.$4=d,b("EventListener").listen(c,"contextmenu",this.$5)}a.prototype.$6=function(){if(this.$2){var a=void 0;this.$4&&(a=b("React").createElement(g,{href:this.$4,target:"_blank"},"Download 3D File"));a=b("React").createElement(b("ReactXUIMenu"),null,a);a=b("React").createElement(b("MountedContextMenu.react"),{mountedTriggerElem:this.$2,menu:a});this.$3=b("ReactDOM").render(a,this.$1)}};e.exports=a}),null);
__d("Asset3dComponentContextMenu.react",["React","Asset3dContextMenu"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){this.props.target&&(this.$1=new(b("Asset3dContextMenu"))(this.refs.container,this.props.target,this.props.fileURL))};a.prototype.render=function(){return b("React").createElement("div",{ref:"container"})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("Asset3DBackground",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DEFAULT:"default",CREATOR:"creator",MEDIUM:"medium",SPACES:"spaces",ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five",SIX:"six",SEVEN:"seven",EIGHT:"eight",NINE:"nine",TEN:"ten",ELEVEN:"eleven",TWELVE:"twelve",THIRTEEN:"thirteen",FOURTEEN:"fourteen",FIFTEEN:"fifteen",SIXTEEN:"sixteen",SEVENTEEN:"seventeen",EIGHTEEN:"eighteen",TWENTY:"twenty",TWENTYONE:"twentyone",TWENTYTWO:"twentytwo",TWENTYTHREE:"twentythree",TWENTYFOUR:"twentyfour",TWENTYFIVE:"twentyfive",TWENTYSIX:"twentysix",TWENTYSEVEN:"twentyseven",TWENTYEIGHT:"twentyeight",TWENTYNINE:"twentynine",THIRTY:"thirty",THIRTYONE:"thirtyone",THIRTYTWO:"thirtytwo",THIRTYTHREE:"thirtythree",THIRTYFOUR:"thirtyfour",THIRTYFIVE:"thirtyfive",THIRTYSIX:"thirtysix"})}),null);
__d("Asset3DCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSPECIFIED:"unspecified",MEDIUM:"medium",SPACES_MARKER_DRAWING:"spaces_marker_drawing",METAVERSITY:"metaversity",PHOTOS_3D:"photos_3d",THIRD_PARTY:"third_party",LINK_SCRAPE:"link_scrape",COMPOSER:"composer",QUILLUSTRATION:"quillustration"})}),null);
__d("Asset3DStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UPLOADING:"uploading",SUCCESS:"success",FAIL:"fail"})}),null);
__d("Asset3dEnterVrButton.react",["ix","cx","fbt","invariant","AbstractButton.react","React","SUIBusinessTheme","SUITooltip.react","asset","Image.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state={inVr:!1},b}a.prototype.setInVr=function(a){this.setState({inVr:a})};a.prototype.render=function(){var a=void 0,c=void 0,d=void 0,e=void 0;this.state.inVr?(a=b("React").createElement(b("Image.react"),{src:g("528152")}),c=b("React").createElement("div",{className:"_27aw"},i._("VR mode on")),d=i._("Exit VR"),e="_27ax"):(a=b("React").createElement(b("Image.react"),{src:g("556058")}),d=i._("Enter VR"),e="_27ax");var f={position:"absolute",bottom:"11px",right:"22px",display:"flex",flexDirection:"row",alignItems:"center"};f=b("React").createElement("div",{style:f},c,b("React").createElement(b("SUITooltip.react"),{ref:function(a){return this.$1=a}.bind(this),theme:b("SUIBusinessTheme"),tooltip:d,tooltipDelay:500},b("React").createElement(b("AbstractButton.react"),{label:d,labelIsHidden:!0,className:e,image:a,onClick:function(){!this.state.inVr?this.props.enterVrCallback():this.props.exitVrCallback(),this.$1||j(0),this.$1.hide()}.bind(this)})));return f};a.defaultProps={};e.exports=a}),null);
__d("VertexAlphaMaterial",["ThreeJS.r88"],(function(a,b,c,d,e,f){var g,h=!1;c=babelHelpers.inherits(a,b("ThreeJS.r88").ShaderMaterial);g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.name="CustomVertexAlphaShader",this.vertexShader="#include <common>\n          #include <skinning_pars_vertex>\n          #include <clipping_planes_pars_vertex>\n          #include <fog_pars_vertex>\n          attribute vec4 color;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <skinbase_vertex>\n            #include <begin_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <fog_vertex>\n            colorAlpha = color;\n          }",this.fragmentShader="#include <common>\n          #include <fog_pars_fragment>\n          #include <clipping_planes_pars_fragment>\n          uniform float opacity;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <clipping_planes_fragment>\n            gl_FragColor = colorAlpha;\n            gl_FragColor.a *= opacity;\n            #include <fog_fragment>\n            #include <premultiplied_alpha_fragment>\n            "+(h?"gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);":"")+"\n          }",this.uniforms.fogColor={value:new(b("ThreeJS.r88").Color)()},this.uniforms.fogNear={value:0},this.uniforms.fogFar={value:0},this.uniforms.fogDensity={value:0},this.uniforms.opacity={value:1}}e.exports=a}),null);
__d("Asset3dThreeJsHelpers",["ThreeJS.r88","VertexAlphaMaterial"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={createRoundedCorneredPlane:function(a,c,d){__p&&__p();var e=new(b("ThreeJS.r88").Shape)();e.moveTo(0,d);e.lineTo(0,c-d);e.quadraticCurveTo(0,c,d,c);e.lineTo(a-d,c);e.quadraticCurveTo(a,c,a,c-d);e.lineTo(a,d);e.quadraticCurveTo(a,0,a-d,0);e.lineTo(d,0);e.quadraticCurveTo(0,0,0,d);return new(b("ThreeJS.r88").ShapeBufferGeometry)(e)},onModelLoad:function(a){__p&&__p();a.traverse(function(a){__p&&__p();if(a.isMesh){a=a;if(!a.geometry.isBufferGeometry)return;var c=a.material;c.map&&c.map.isTexture&&c.map.anisotropy===1&&(c.map.anisotropy=4);var d=a.geometry;d=d.getAttribute("color");var e=!1;if(d&&d.itemSize===4){for(var f=0,g=3;f<d.count;f++,g+=4)if(d.array[g]<1){e=!0;break}e&&(c=new(b("VertexAlphaMaterial"))({flatShading:c.flatShading,skinning:c.skinning,transparent:c.transparent,morphTargets:c.morphTargets,fog:!0,clipping:!0}));c.needsUpdate=!0;a.material=c}}})},disposeModel:function(a){a.traverse(function(a){a.isMesh&&(a.geometry&&a.geometry.dispose(),a.material&&(Object.values(a.material).forEach(function(a){a instanceof b("ThreeJS.r88").Texture&&a.dispose()}),a.material.dispose()))})}};e.exports=a}),null);
__d("Ease",[],(function(a,b,c,d,e,f){__p&&__p();var g={makePowerOut:function(a){var b=g.makePowerIn(a);return function(a){return 1-b(1-a)}},makePowerIn:function(a){return function(b){b=Math.pow(b,a);return(b*1e4|0)/1e4}},makePowerInOut:function(a){var b=g.makePowerIn(a),c=g.makePowerOut(a);return function(a){return a<.5?.5*b(a*2):.5*c(a*2-1)+.5}},expoOut:function(a){return 1-Math.pow(2,-10*a)},expoIn:function(a){return 1-g.expoOut(1-a)},expoInOut:function(a){return a<.5?.5*g.expoIn(a*2):.5*g.expoOut(a*2-1)+.5},sineOut:function(a){return Math.sin(a*Math.PI*.5)},sineIn:function(a){return 1-Math.cos(a*Math.PI*.5)},sineInOut:function(a){return-.5*(Math.cos(Math.PI*a)-1)},circOut:function(a){a--;return Math.sqrt(1-a*a)},circIn:function(a){return 1-g.circOut(1-a)},circInOut:function(a){return a<.5?.5*g.circIn(a*2):.5*g.circOut(a*2-1)+.5},bounceOut:function(a){if(a<1/2.75)return 7.5625*a*a;else if(a<2/2.75)return 7.5625*(a-=1.5/2.75)*a+.75;else if(a<2.5/2.75)return 7.5625*(a-=2.25/2.75)*a+.9375;else return 7.5625*(a-=2.625/2.75)*a+.984375},bounceIn:function(a){return 1-g.bounceOut(1-a)},bounceInOut:function(a){return a<.5?.5*g.bounceIn(a*2):.5*g.bounceOut(a*2-1)+.5},makeBounceOut:function(a){a=a||1;return function(b){b=(1-Math.cos(b*Math.PI*a))*(1-b)+b;return 1-Math.abs(1-b)}},makeBounceIn:function(a){var b=g.makeBounceOut(a);return function(a){return 1-b(1-a)}},makeElasticOut:function(a,b){a<1&&(a=1);var c=Math.PI*2;return function(d){if(d===0||d===1)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}},makeElasticIn:function(a,b){var c=g.makeElasticOut(a,b);return function(a){return 1-c(1-a)}},makeElasticInOut:function(a,b){b*=1.5;var c=g.makeElasticIn(a,b),d=g.makeElasticOut(a,b);return function(a){return a<.5?.5*c(a*2):.5*d(a*2-1)+.5}},makeBackOut:function(a){var b=g.makeBackIn(a);return function(a){return 1-b(1-a)}},makeBackIn:function(a){return function(b){return b*b*((a+1)*b-a)}},makeBackInOut:function(a){a*=1.525;var b=g.makeBackIn(a),c=g.makeBackOut(a);return function(a){return a<.5?.5*b(a*2):.5*c(a*2-1)+.5}}};g.elasticOut=g.makeElasticOut(1,.3);g.elasticIn=g.makeElasticIn(1,.3);g.elasticInOut=g.makeElasticInOut(1,.3);g.backOut=g.makeBackOut(1.7);g.backIn=g.makeBackIn(1.7);g.backInOut=g.makeBackInOut(1.7);e.exports=g}),null);
__d("Tween",["cancelAnimationFrame","requestAnimationFrame"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.start=function(a,c,d){"use strict";__p&&__p();this.$7=a;this.$6=c;this.$8=d||Math.min;this.$3=0;this.$4=Date.now();var e=function(){if(!this.$2){this.$4=Date.now()-this.$3;this.$1=b("requestAnimationFrame")(e);return}this.$3=Date.now()-this.$4;this.$3<this.$6&&(this.$1=b("requestAnimationFrame")(e),this.$7(this.$8(this.$3/this.$6),!1))}.bind(this);this.$1=b("requestAnimationFrame")(e);this.$2=setTimeout(function(){this.$7(this.$8(1),!0)}.bind(this),this.$6)};a.prototype.stop=function(){"use strict";b("cancelAnimationFrame")(this.$1),clearTimeout(this.$2),this.$1=null,this.$2=null};a.prototype.pause=function(){"use strict";this.$2&&(clearTimeout(this.$2),this.$2=null)};a.prototype.resume=function(){"use strict";this.$2||(this.$2=setTimeout(function(){this.$7(this.$8(1),!0)}.bind(this),this.$6-this.$3))};a.scale=function(a,b,c){"use strict";return(b-a)*c+a};function a(){"use strict"}e.exports=a}),null);
__d("Asset3dTurntableCameraControl",["Asset3dCameraControl","Ease","ThreeJS.r88","Tween","degToRad","radToDeg","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("degToRad")(-70),i=b("degToRad")(100),j=1.2,k=.01,l=30,m=.95,n=.1,o=10,p=.05,q=.001,r=6.5,s=1.2,t=Object.freeze({FAKE_GYRO_INITIAL:"fake_gyro_initial",FOCUS_STATE:"focus_state",FAKE_GYRO_AFTER_FOCUS:"fake_gyro_after_focus"});c=babelHelpers.inherits(a,b("Asset3dCameraControl"));g=c&&c.prototype;function a(a,c,d,e,f){__p&&__p();g.constructor.call(this,a,c,d,e,f),this.$Asset3dTurntableCameraControl1=new(b("ThreeJS.r88").Object3D)(),this.$Asset3dTurntableCameraControl2=new(b("ThreeJS.r88").Object3D)(),this.$Asset3dTurntableCameraControl3=new(b("ThreeJS.r88").Vector3)(),this.$Asset3dTurntableCameraControl4=new(b("ThreeJS.r88").Vector3)(),this.$Asset3dTurntableCameraControl8=0,this.$Asset3dTurntableCameraControl9=!1,this.$Asset3dTurntableCameraControl11=t.FAKE_GYRO_INITIAL,this.$Asset3dTurntableCameraControl14=null,this.__updateResetCamera=function(){__p&&__p();var a=this.__sphericalViewportControl.getOrientation();Math.abs(a.x-this.__initialOrientation.x)>180&&(a.x>this.__initialOrientation.x?a.x-=360:a.x+=360);this.__sphericalViewportControl.setSphericalOrientation(a.x+p*(this.__initialOrientation.x-a.x),a.y+p*(this.__initialOrientation.y-a.y));var c=this.__camera.position;c.set(c.x+p*(this.__cameraInitialPosition.x-c.x),c.y+p*(this.__cameraInitialPosition.y-c.y),c.z+p*(this.__cameraInitialPosition.z-c.z));var d=this.__cameraTarget;d.set(d.x+p*(this.__cameraInitialTarget.x-d.x),d.y+p*(this.__cameraInitialTarget.y-d.y),d.z+p*(this.__cameraInitialTarget.z-d.z));this.$Asset3dTurntableCameraControl1.position.x+=p*(this.$Asset3dTurntableCameraControl12-this.$Asset3dTurntableCameraControl1.position.x);this.$Asset3dTurntableCameraControl2.position.y+=p*(this.$Asset3dTurntableCameraControl13-this.$Asset3dTurntableCameraControl2.position.y);var e=Math.abs(a.x);a=Math.abs(a.y);var f=Math.abs(c.x-this.__cameraInitialPosition.x),g=Math.abs(c.y-this.__cameraInitialPosition.y);c=Math.abs(c.z-this.__cameraInitialPosition.z);var h=Math.abs(d.x-this.__cameraInitialTarget.x),i=Math.abs(d.y-this.__cameraInitialTarget.y);d=Math.abs(d.z-this.__cameraInitialTarget.z);(e>q||a>q||f>q||g>q||c>q||h>q||i>q||d>q)&&this.$Asset3dTurntableCameraControl14?this.$Asset3dTurntableCameraControl14=b("requestAnimationFrame")(this.__updateResetCamera):this.$Asset3dTurntableCameraControl14=null}.bind(this),this.__camera.name="Turntable Camera",this.$Asset3dTurntableCameraControl10=new(b("Tween"))()}a.prototype.setupViewportListeners=function(){__p&&__p();this.__sphericalViewportControl.addListener("viewportChange",function(a,c,d){this.__yaw=b("degToRad")(a),this.__pitch=b("degToRad")(-c),this.$Asset3dTurntableCameraControl11===t.FOCUS_STATE&&(this.__pitch=Math.min(b("degToRad")(45),Math.max(this.__pitch,b("degToRad")(-45)))),this.setDirty(!0)}.bind(this)),this.__sphericalViewportControl.addListener("mouseMove",function(a){this.$Asset3dTurntableCameraControl9&&(this.__sphericalViewportControl.setMovementPosition(a),this.$Asset3dTurntableCameraControl9=!1),this.setDirty(!0)}.bind(this)),this.__sphericalViewportControl.addListener("wheelScrollWithShiftKey",function(a,b){this.setDirty(!0);this.$Asset3dTurntableCameraControl14=null;var c=this.__camera.position.length();a>0?c<this.$Asset3dTurntableCameraControl6&&(this.$Asset3dTurntableCameraControl15((1-1/m)*b.x,(1/m-1)*b.y),this.__camera.position.divideScalar(m),this.$Asset3dTurntableCameraControl1.position.divideScalar(m),this.$Asset3dTurntableCameraControl2.position.divideScalar(m)):a<0&&(c>this.$Asset3dTurntableCameraControl5&&(this.$Asset3dTurntableCameraControl15((1-m)*b.x,(m-1)*b.y),this.__camera.position.multiplyScalar(m),this.$Asset3dTurntableCameraControl1.position.multiplyScalar(m),this.$Asset3dTurntableCameraControl2.position.multiplyScalar(m)))}.bind(this)),this.__sphericalViewportControl.addListener("panningWithRightMouse",function(a){this.$Asset3dTurntableCameraControl15(-a.x,a.y),this.setDirty(!0),this.$Asset3dTurntableCameraControl14=null}.bind(this)),this.__sphericalViewportControl.addListener("updateViewportMoveStart",function(a){this.$Asset3dTurntableCameraControl14=null,this.__loggerUtils.data.fakeGyroStartMs=Date.now()}.bind(this)),this.__sphericalViewportControl.addListener("updateViewportMove",function(a){this.$Asset3dTurntableCameraControl10.stop(),this.setDirty(!0)}.bind(this)),this.__sphericalViewportControl.addListener("updateViewportEnd",function(a,c){this.$Asset3dTurntableCameraControl7=c,this.$Asset3dTurntableCameraControl8=a,this.$Asset3dTurntableCameraControl11===t.FOCUS_STATE?(this.$Asset3dTurntableCameraControl11=t.FAKE_GYRO_AFTER_FOCUS,this.__sphericalViewportControl.setSphericalOrientation(b("radToDeg")(this.__yaw),b("radToDeg")(-this.__pitch)),this.__sphericalViewportControl.setAngularVelocityScaleFactor({x:1,y:1}),this.__sphericalViewportControl.reEnableGyro(),this.$Asset3dTurntableCameraControl9=!0,this.__loggerUtils.logOnTouchPanEnd(Date.now()-this.__loggerUtils.data.touchPanStartMs),this.__loggerUtils.data.fakeGyroStartMs=Date.now()):this.__loggerUtils.logOnFakeGyroEnd(Date.now()-this.__loggerUtils.data.fakeGyroStartMs),this.$Asset3dTurntableCameraControl16()}.bind(this)),this.__sphericalViewportControl.addListener("onMovementStart",function(a){this.$Asset3dTurntableCameraControl14=null,this.$Asset3dTurntableCameraControl10.stop(),this.setDirty(!0),this.$Asset3dTurntableCameraControl11!==t.FOCUS_STATE&&(this.$Asset3dTurntableCameraControl11=t.FOCUS_STATE,this.__sphericalViewportControl.setAngularVelocityScaleFactor({x:r,y:s}),this.__loggerUtils.data.touchPanStartMs=Date.now(),this.__loggerUtils.logOnFakeGyroEnd(Date.now()-this.__loggerUtils.data.fakeGyroStartMs))}.bind(this))};a.prototype.modelLoad=function(a){__p&&__p();this.setDirty(!0);var c=null,d=null;a.traverse(function(a){a.name==="FB_Post_Camera"?c=a:a.name==="FB_Post_Target"&&(d=a)});var e=void 0;if(c&&d){c.updateMatrixWorld();d.updateMatrixWorld();var f=new(b("ThreeJS.r88").Vector3)().setFromMatrixPosition(c.matrixWorld),g=new(b("ThreeJS.r88").Vector3)().setFromMatrixPosition(d.matrixWorld);this.__cameraTarget.copy(g);this.__camera.near=c.near;this.__camera.far=c.far;this.__camera.fov=c.fov;f.sub(g);e=f.length();f.normalize();g=Math.asin(f.y);f=Math.atan2(f.x,f.z);this.__sphericalViewportControl.setRelativeSphericalOrientation(b("radToDeg")(f),b("radToDeg")(g))}else{f=new(b("ThreeJS.r88").Box3)().setFromObject(a);g=f.getSize();a=g.length();this.__cameraTarget=f.getCenter();this.__camera.near=a*k;this.__camera.far=a*l;e=a*j}this.$Asset3dTurntableCameraControl5=n*e;this.$Asset3dTurntableCameraControl6=o*e;this.__cameraAnchor.position.copy(this.__cameraTarget);this.__camera.position.set(0,0,e);this.$Asset3dTurntableCameraControl2.position.y=2*e*Math.tan(b("degToRad")(this.__camera.fov*.5));this.$Asset3dTurntableCameraControl1.position.x=this.$Asset3dTurntableCameraControl2.position.y*this.__camera.aspect;this.__cameraAnchor.add(this.$Asset3dTurntableCameraControl1);this.__cameraAnchor.add(this.$Asset3dTurntableCameraControl2);this.__camera.updateProjectionMatrix();this.__initialOrientation=this.__sphericalViewportControl.getOrientation();this.__cameraInitialTarget=this.__cameraTarget.clone();this.__cameraInitialPosition=this.__camera.position.clone();this.$Asset3dTurntableCameraControl13=this.$Asset3dTurntableCameraControl2.position.y;this.$Asset3dTurntableCameraControl12=this.$Asset3dTurntableCameraControl1.position.x};a.prototype.update=function(a){if(!this.isDirty())return;a=h+i*(1-a);this.__updateCameraAnchor(this.__pitch+a,-this.__yaw)};a.prototype.$Asset3dTurntableCameraControl15=function(a,b){__p&&__p();var c=this.$Asset3dTurntableCameraControl3,d=this.$Asset3dTurntableCameraControl4;c.set(0,0,0);this.__cameraAnchor.updateMatrixWorld();d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl1.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,a);d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl2.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,b);this.__cameraTarget.add(c);this.__cameraAnchor.position.add(c)};a.prototype.$Asset3dTurntableCameraControl16=function(){this.$Asset3dTurntableCameraControl11===t.FAKE_GYRO_INITIAL&&this.$Asset3dTurntableCameraControl10.start(function(a,c){this.setDirty(!0);c=b("Tween").scale(this.$Asset3dTurntableCameraControl8,this.__initialOrientation.x,a);a=b("Tween").scale(this.$Asset3dTurntableCameraControl7,this.__initialOrientation.y,a);this.__sphericalViewportControl.setSphericalOrientation(c,a)}.bind(this),2e3,b("Ease").makePowerIn(3))};a.prototype.resetCamera=function(){this.$Asset3dTurntableCameraControl14||(this.$Asset3dTurntableCameraControl14=b("requestAnimationFrame")(this.__updateResetCamera))};a.prototype.shouldSuppressNux=function(){return this.$Asset3dTurntableCameraControl11===t.FOCUS_STATE};e.exports=a}),null);
__d("Asset3dVrController",["ThreeJS.r88"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2e3;function a(a,b,c){this.__lastPressedTime=null,this.__hand=a,this.__validChangedCallback=b,this.__controllerEventListener=c,this.__needsRecenter=!0,this.__findGamepad(),window.addEventListener("gamepadconnected",this.__findGamepad.bind(this)),window.addEventListener("gamepaddisconnected",this.__findGamepad.bind(this))}a.prototype.model=function(){return this.__model};a.prototype.__findGamepad=function(){__p&&__p();var a=this.isValid();this.__gamepadIndex=-1;if(navigator.getGamepads){var b=navigator.getGamepads();for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.pose&&d.hand===this.__hand){this.__gamepadIndex=c;break}}}a!==this.isValid()&&this.__validChangedCallback(this)};a.prototype.render=function(a){if(navigator.getGamepads&&this.isValid()){a=navigator.getGamepads();a=a[this.__gamepadIndex];this.__handleRecenteringAction(a)}};a.prototype.__handleRecenteringAction=function(a){if(this.__hasButtonPressed(a)){a=Date.now();!this.__lastPressedTime?this.__lastPressedTime=a:this.__needsRecenter&&a-this.__lastPressedTime>g&&(this.__needsRecenter=!1,this.__controllerEventListener(this,"recenter"))}else this.__lastPressedTime=null,this.__needsRecenter=!0};a.prototype.isValid=function(){return this.__gamepadIndex!==-1};a.prototype.__hasButtonPressed=function(a){a=a.buttons;for(var b=0;b<a.length;b++)if(a[b].pressed)return!0;return!1};e.exports=a}),null);
__d("Asset3dVr3dModelController",["invariant","Asset3dVrController","ThreeJS.r88"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.005,j=[.2,-.5,-.4],k=[-.2,-.5,-.4];c=babelHelpers.inherits(a,b("Asset3dVrController"));h=c&&c.prototype;function a(a,b,c,d,e,f){h.constructor.call(this,a,d,e),this.$Asset3dVr3dModelController1=b,this.$Asset3dVr3dModelController2=c,this.$Asset3dVr3dModelController3=f,this.__model=this.$Asset3dVr3dModelController5(b)}a.prototype.$Asset3dVr3dModelController5=function(a){var c=new(b("ThreeJS.r88").Object3D)(),d=new(b("ThreeJS.r88").BoxGeometry)(.05,.05,.05);a=new(b("ThreeJS.r88").MeshBasicMaterial)({color:a});d=new(b("ThreeJS.r88").Mesh)(d,a);c.add(d);return c};a.prototype.render=function(a){__p&&__p();if(navigator.getGamepads&&this.isValid()){var c=navigator.getGamepads();c=c[this.__gamepadIndex];var d=c.pose.orientation,e=c.pose.position,f=this.__model;f||g(0);if(!e&&d){var h=new(b("ThreeJS.r88").Vector3)();this.__hand=="right"?h.fromArray(j):h.fromArray(k);var l=new(b("ThreeJS.r88").Quaternion)(d[0],d[1],d[2],d[3]);h.applyQuaternion(l);e=[h.x,h.y,h.z]}if(!e){f.visible=!1;return}f.visible=!0;d&&f.quaternion.set(d[0],d[1],d[2],d[3]);f.position.set(e[0]+a.position.x,e[1]+a.position.y,e[2]+a.position.z);l=!1;if(this.__hasButtonPressed(c)){f.children[0].material.setValues({color:this.$Asset3dVr3dModelController2});h=this.$Asset3dVr3dModelController4;if(d&&h){e=d[0]-h[0];Math.abs(e)>=i&&(e>0?this.$Asset3dVr3dModelController3(this,"down"):this.$Asset3dVr3dModelController3(this,"up"),l=!0);a=d[1]-h[1];Math.abs(a)>=i&&(a>0?this.$Asset3dVr3dModelController3(this,"right"):this.$Asset3dVr3dModelController3(this,"left"),l=!0)}this.$Asset3dVr3dModelController4=c.pose.orientation}else f.children[0].material.setValues({color:this.$Asset3dVr3dModelController1}),this.$Asset3dVr3dModelController4=null;l||this.__handleRecenteringAction(c)}};e.exports=a}),null);
__d("Asset3dVrViewer",["invariant","Asset3dThreeJsHelpers","Asset3dVrController","ThreeJS.r88"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=750;function a(a){this.__frameData=new window.VRFrameData(),this.__helperEuler=new(b("ThreeJS.r88").Euler)(),this.__helperVector3=new(b("ThreeJS.r88").Vector3)(),this.__helperQuaternion=new(b("ThreeJS.r88").Quaternion)(),this.__helperArray=[],a&&(this.__leftController=new(b("Asset3dVrController"))("left",this.__controllerValidChange.bind(this),this.__controllerEvent.bind(this)),this.__rightController=new(b("Asset3dVrController"))("right",this.__controllerValidChange.bind(this),this.__controllerEvent.bind(this))),this.$2=[{type:"position",upperLimit:.3,lowerLimit:-.3,arrayIndex:0},{type:"position",upperLimit:.3,lowerLimit:-.3,arrayIndex:1},{type:"position",upperLimit:.6,lowerLimit:-.6,arrayIndex:2},{type:"orientation",eulerOrder:"YXZ",upperLimit:b("ThreeJS.r88").Math.degToRad(45),lowerLimit:b("ThreeJS.r88").Math.degToRad(-45),arrayIndex:1}]}a.prototype.setup=function(a,b,c){this.__model=b,this.__2dCamera=a,this.__storyProps=c};a.prototype.onEnterVr=function(a,b){this.__onEnterVr(a)};a.prototype.__onEnterVr=function(a){__p&&__p();this.__scene=new(b("ThreeJS.r88").Scene)();a=new(b("ThreeJS.r88").AmbientLight)(13421772,.5);this.__scene.add(a);this.__scene.add(this.__model);this.__vrCamera=new(b("ThreeJS.r88").PerspectiveCamera)(75,1,.1,2e3);this.__vrCameraPositionAnchor=new(b("ThreeJS.r88").Object3D)();this.__vrCameraPositionAnchor.add(this.__vrCamera);this.__vrCameraOrientationAnchor=new(b("ThreeJS.r88").Object3D)();this.__vrCameraOrientationAnchor.add(this.__vrCameraPositionAnchor);this.__applyFrameOrientation=!0;this.__isAutoRecentering=!1};a.prototype.onExitVr=function(){this.__onExitVr()};a.prototype.__onExitVr=function(){this.__vrCamera=null,this.__vrCameraPositionAnchor=null,this.__vrCameraOrientationAnchor=null,this.__scene=null,b("Asset3dThreeJsHelpers").disposeModel(this.__model),this.__model=null,this.__applyFrameOrientation=!0,this.__isAutoRecentering=!1};a.prototype.render=function(a){};a.prototype.__render=function(a){a.vr.getDevice().getFrameData(this.__frameData),this.__detectAutoRecenter(),this.__recenter(),this.__leftController.render(this.__vrCameraOrientationAnchor),this.__rightController.render(this.__vrCameraOrientationAnchor)};a.prototype.markNeedsRecentering=function(){this.__applyFrameOrientation=!0};a.prototype.__detectAutoRecenter=function(){__p&&__p();if(this.__isAutoRecentering){var a=this.$1;a||g(0);var b=Date.now();b-a>h&&(this.$1=null,this.__isAutoRecentering=!1,this.__applyFrameOrientation=!0)}else this.__vrCamera.getWorldPosition(this.__helperVector3),this.__vrCamera.getWorldQuaternion(this.__helperQuaternion),this.$2.some(function(a,b){a.type==="orientation"?(this.__helperEuler.setFromQuaternion(this.__helperQuaternion,a.eulerOrder),this.__helperEuler.toArray(this.__helperArray)):this.__helperVector3.toArray(this.__helperArray);a.arrayIndex>=0&&a.arrayIndex<this.__helperArray.length||g(0);b=this.__helperArray[a.arrayIndex];if(b<a.lowerLimit||b>a.upperLimit){this.$1=Date.now();this.__isAutoRecentering=!0;return!0}return!1}.bind(this))};a.prototype.__recenter=function(){this.__frameData.pose&&(this.__applyFrameOrientation&&(this.__applyFrameOrientation=!1,this.__frameData.pose.position&&(this.__helperVector3.fromArray(this.__frameData.pose.position),this.__vrCameraPositionAnchor.position.copy(this.__helperVector3.negate()),this.__vrCameraPositionAnchor.updateMatrixWorld(!0)),this.__frameData.pose.orientation&&(this.__helperQuaternion.fromArray(this.__frameData.pose.orientation),this.__helperEuler.setFromQuaternion(this.__helperQuaternion,"YXZ"),this.__vrCameraOrientationAnchor.rotation.y=-this.__helperEuler.y,this.__vrCameraOrientationAnchor.updateMatrixWorld(!0))))};a.prototype.__controllerValidChange=function(a){};a.prototype.__controllerEvent=function(a,b){if(this.__model)switch(b){case"recenter":this.__applyFrameOrientation=!0;break}};e.exports=a}),null);
__d("Asset3dModelVrViewer",["invariant","Asset3dVr3dModelController","Asset3dVrController","Asset3dVrViewer","ThreeJS.r88"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.05;c=babelHelpers.inherits(a,b("Asset3dVrViewer"));h=c&&c.prototype;function a(){h.constructor.call(this,!1),this.__leftController=new(b("Asset3dVr3dModelController"))("left","#ff0000","#0000ff",this.$Asset3dModelVrViewer2.bind(this),this.__controllerEvent.bind(this),this.$Asset3dModelVrViewer3.bind(this)),this.__rightController=new(b("Asset3dVr3dModelController"))("right","#00ff00","#0000ff",this.$Asset3dModelVrViewer2.bind(this),this.__controllerEvent.bind(this),this.$Asset3dModelVrViewer3.bind(this))}a.prototype.$Asset3dModelVrViewer3=function(a,b){__p&&__p();if(this.__model)switch(b){case"left":this.__model.rotation.y-=i;break;case"right":this.__model.rotation.y+=i;break;case"up":this.__model.rotation.x-=i;break;case"down":this.__model.rotation.x+=i;break}};a.prototype.$Asset3dModelVrViewer2=function(a){this.__scene&&(a.isValid()?this.__scene.add(a.model()):this.__scene.remove(a.model()))};a.prototype.onEnterVr=function(a,c){this.__onEnterVr(a),c.autoClear=!0,c.vr.autoSubmitFrame=!0,c.setClearColor(new(b("ThreeJS.r88").Color)("white"),1),this.__leftController.isValid()&&this.__scene.add(this.__leftController.model()),this.__rightController.isValid()&&this.__scene.add(this.__rightController.model()),this.$Asset3dModelVrViewer1=new(b("ThreeJS.r88").Object3D)(),this.$Asset3dModelVrViewer1.add(this.__vrCameraOrientationAnchor),this.$Asset3dModelVrViewer1.matrix.identity(),this.__2dCamera||g(0),this.$Asset3dModelVrViewer1.applyMatrix(this.__2dCamera.matrixWorld),this.$Asset3dModelVrViewer1.updateMatrixWorld()};a.prototype.onExitVr=function(){this.__onExitVr(),this.$Asset3dModelVrViewer1=null};a.prototype.render=function(a){this.__render(a),a.render(this.__scene,this.__vrCamera)};e.exports=a}),null);
__d("Asset3dImageDataURLLoader",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){this.$1=document.createElement("canvas")}g.getInstance=function(){g.singleAsset3dImageDataURLLoader||(g.singleAsset3dImageDataURLLoader=new g());return g.singleAsset3dImageDataURLLoader};g.prototype.loadHtml=function(a,b,c,d,e){b=g.WORLD_TO_PIXELS*b;c=g.WORLD_TO_PIXELS*c;a='<svg xmlns="http://www.w3.org/2000/svg" background-color="blue" width="'+b+'" height="'+c+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="height:100%;width:100%; xbackground:green;">'+a+"</div></foreignObject></svg>";a=encodeURIComponent(a);d.onload=this.$2.bind(this,d,e,b,c);d.src="data:image/svg+xml,"+a};g.prototype.$2=function(a,b,c,d){var e=this.$1.getContext("2d");this.$1.width=c;this.$1.height=d;e.clearRect(0,0,this.$1.width,this.$1.height);e.drawImage(a,0,0);a.onload=undefined;b(this.$1.toDataURL("image/png"))};g.prototype.loadPicture=function(a,b,c){b.crossOrigin="Anonymous",b.onload=this.$3.bind(this,b,c),b.src=a};g.prototype.$3=function(a,b){var c=this.$1.getContext("2d");this.$1.width=a.width;this.$1.height=a.height;c.clearRect(0,0,this.$1.width,this.$1.height);c.drawImage(a,0,0);a.onload=undefined;b(this.$1.toDataURL("image/png"))};g.WORLD_TO_PIXELS=1024;e.exports=g}),null);
__d("Asset3dVrStoryHeader",["Asset3dImageDataURLLoader","ThreeJS.r88"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){this.$1=new(b("ThreeJS.r88").Object3D)(),this.$6=new Image(),this.$9=new Image(),this.$3=a,this.$4=c*g.maxRows(),this.$5=new(b("ThreeJS.r88").Texture)(),this.$5.image=this.$6,this.$5.wrapS=b("ThreeJS.r88").RepeatWrapping,this.$5.wrapT=b("ThreeJS.r88").RepeatWrapping,this.$5.repeat.x=1,this.$5.repeat.y=1,this.$7=new(b("ThreeJS.r88").Mesh)(new(b("ThreeJS.r88").PlaneGeometry)(this.$3,this.$4,32),new(b("ThreeJS.r88").MeshBasicMaterial)({map:this.$5,transparent:!0})),this.$1.add(this.$7)}g.prototype.model=function(){return this.$1};g.prototype.showStory=function(a){this.$2=a;a=this.$2.owningPictureURI;a&&b("Asset3dImageDataURLLoader").getInstance().loadPicture(a,this.$9,function(a){this.$8=a,this.$10()}.bind(this));this.$10()};g.prototype.numberOfRows=function(){var a=2;this.$2.message&&(a+=1.5);return a};g.maxRows=function(){return 3.5};g.prototype.$10=function(){__p&&__p();var a=(this.$4*b("Asset3dImageDataURLLoader").WORLD_TO_PIXELS-8)/g.maxRows(),c=a-2,d='<div style="height:100%;padding:4px;font-family:Helvetica, Arial, sans-serif;white-space:nowrap;font-size:'+c+"px;line-height:"+a+'px;">';d+='<div style="height: '+a*2+'px; width: 100%;">';d+='<div style="display:block; float: left; width:'+a*2+"px; height:"+a*2+"px;";this.$8&&(d+="background-image: url("+this.$8+");");d+='background-size:cover;border-radius:50%;">';d+="</div>";d+='<div style="display:block; width:auto; padding-left: '+(a*2+10)+'px; ">';this.$2.title&&(d+="<div>"+this.$2.title+"</div>");this.$2.creationTime&&(d+='<div style="font-size: '+c*.8+'px;">'+this.$2.creationTime+"</div>");d+="</div>";d+="</div>";this.$2.message&&(d+='<div style="height: '+a/2+'px; width: 100%;"></div>',d+='<div style="text-overflow:ellipsis;overflow:hidden;">'+this.$2.message+"</div>");d+="</div>";b("Asset3dImageDataURLLoader").getInstance().loadHtml(d,this.$3,this.$4,this.$6,function(a){this.$6.onload=function(){this.$5.needsUpdate=!0}.bind(this),this.$6.src=a}.bind(this))};e.exports=g}),null);
__d("Asset3dVrStoryReactions",["invariant","Asset3dImageDataURLLoader","ThreeJS.r88"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c){this.$1=new(b("ThreeJS.r88").Object3D)(),this.$6=new Image(),this.$3=a,this.$4=c*h.maxRows(),this.$5=new(b("ThreeJS.r88").Texture)(),this.$5.image=this.$6,this.$5.wrapS=b("ThreeJS.r88").RepeatWrapping,this.$5.wrapT=b("ThreeJS.r88").RepeatWrapping,this.$5.repeat.x=1,this.$5.repeat.y=1,this.$7=new(b("ThreeJS.r88").Mesh)(new(b("ThreeJS.r88").PlaneGeometry)(this.$3,this.$4,32),new(b("ThreeJS.r88").MeshBasicMaterial)({map:this.$5,transparent:!0})),this.$1.add(this.$7)}h.prototype.model=function(){return this.$1};h.prototype.showStory=function(a){this.$2=a,this.$2&&this.$2.supportedReactions&&(this.$8={},this.$2.supportedReactions.forEach(function(a){a.URI&&a.count&&a.count>0&&this.$9.bind(this,a.URI)()}.bind(this))),this.$10()};h.prototype.hasContentToDisplay=function(){var a=this.$2;return a?a.reactionsText!==null:!1};h.prototype.numberOfRows=function(){return this.hasContentToDisplay()?1:0};h.maxRows=function(){return 1};h.prototype.$9=function(a){var c=new Image();b("Asset3dImageDataURLLoader").getInstance().loadPicture(a,c,function(b){this.$8[a]=b,this.$10()}.bind(this))};h.prototype.$10=function(){__p&&__p();if(!this.hasContentToDisplay())this.$7.visible=!1;else{this.$2&&this.$2.reactionsText||g(0);this.$7.visible=!0;var a=40,c='<div style="background:white;height:100%; font-family:Helvetica, Arial, sans-serif; display:flex;flex-direction:row;align-items:center">';if(this.$2.supportedReactions){c+='<div style="padding-right:20px">';var d=3,e=Object.keys(this.$8);for(var f=0;f<e.length&&f<d;f++){var h=e[f];h=this.$8[h];c+='<div style="border:2px solid white;display:inline-block;position:relative;margin-right:-10px;width:'+a+"px; height:"+a+"px;";c+="z-index: "+(e.length-f)+";";c+="background-image: url("+h+");";c+='background-size:cover;border-radius:50%;"></div>'}c+="</div>"}h=this.$2.reactionsText;h&&(c+='<div style="font-size: '+a+'px; white-space: nowrap; text-overflow:ellipsis;overflow:hidden;">'+h+"</div>");c+="</div>";b("Asset3dImageDataURLLoader").getInstance().loadHtml(c,this.$3,this.$4,this.$6,function(a){this.$6.src=a,this.$5.needsUpdate=!0}.bind(this))}};e.exports=h}),null);
__d("Asset3dVrStory",["invariant","Asset3dThreeJsHelpers","Asset3dVrStoryHeader","Asset3dVrStoryReactions","ThreeJS.r88"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=.045,i=.03,j=.025;function a(a,c){__p&&__p();this.$5=a;var d=new(b("ThreeJS.r88").Vector3)();c.getSize(d);this.$1=new(b("ThreeJS.r88").Object3D)();this.$2=new(b("Asset3dVrStoryHeader"))(d.x,h);this.$3=new(b("Asset3dVrStoryReactions"))(d.x,h);c=d.x+2*i;var e=d.y+4*i+(b("Asset3dVrStoryReactions").maxRows()+b("Asset3dVrStoryHeader").maxRows())*h;this.$4=d.y;e=new(b("ThreeJS.r88").Mesh)(b("Asset3dThreeJsHelpers").createRoundedCorneredPlane(c,e,j),new(b("ThreeJS.r88").MeshBasicMaterial)({color:new(b("ThreeJS.r88").Color)("white"),colorWrite:!0,depthWrite:!1}));this.$1.add(e);var f=this.$2.model();f.translateX(h+d.x/2);e.add(f);f=this.$3.model();f.translateX(h+d.x/2);e.add(f);this.$1.position.copy(a);this.$1.position.x+=-(c-d.x)/2}a.prototype.model=function(){return this.$1};a.prototype.showStory=function(a){__p&&__p();a.header||g(0);this.$2.showStory(a.header);this.$3.showStory(a.reactions);a=this.$3.numberOfRows();a=a>0?a*h:0;var c=this.$2.numberOfRows()*h;c=this.$4+3*i+c+a+(a>0?i:0);var d=this.$4+4*i+(b("Asset3dVrStoryReactions").maxRows()+b("Asset3dVrStoryHeader").maxRows())*h,e=i*d/c;a=a+e+(a>0?e:0);this.$1.scale.y=c/d;this.$1.position.y=this.$5.y;this.$1.translateY(-a);c=this.$2.model();c.position.y=0;c.translateY(d-e-b("Asset3dVrStoryHeader").maxRows()*h/2);a=this.$3.model();a.position.y=0;a.translateY(e+h*b("Asset3dVrStoryReactions").maxRows()/2)};e.exports=a}),null);
__d("Asset3dPhotoVrViewer",["Asset3dThreeJsHelpers","Asset3dVrStory","Asset3dVrViewer","ThreeJS.r88"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1,i=1.3,j=.0125,k=[0,0,-1.25],l=[1.5,1.5,1],m=[0,0,0],n=12501961,o=15922165;c=babelHelpers.inherits(a,b("Asset3dVrViewer"));g=c&&c.prototype;function a(){g.constructor.call(this,!0),this.$Asset3dPhotoVrViewer5()}a.prototype.$Asset3dPhotoVrViewer5=function(){__p&&__p();this.$Asset3dPhotoVrViewer3=new(b("ThreeJS.r88").Scene)();this.$Asset3dPhotoVrViewer1=new(b("ThreeJS.r88").Mesh)(b("Asset3dThreeJsHelpers").createRoundedCorneredPlane(h,i,j),new(b("ThreeJS.r88").MeshBasicMaterial)({stencilWrite:!0,colorWrite:!0,color:o,depthWrite:!1}));this.$Asset3dPhotoVrViewer1.position.fromArray(k);this.$Asset3dPhotoVrViewer1.translateY(-i/2);this.$Asset3dPhotoVrViewer1.translateX(-h/2);this.$Asset3dPhotoVrViewer2=new(b("ThreeJS.r88").Scene)();this.$Asset3dPhotoVrViewer2.add(this.$Asset3dPhotoVrViewer1);var a=new(b("ThreeJS.r88").Box3)().setFromObject(this.$Asset3dPhotoVrViewer1);this.$Asset3dPhotoVrViewer4=new(b("Asset3dVrStory"))(this.$Asset3dPhotoVrViewer1.position,a);this.$Asset3dPhotoVrViewer3.add(this.$Asset3dPhotoVrViewer4.model())};a.prototype.onEnterVr=function(a,c){this.__onEnterVr(a),this.$Asset3dPhotoVrViewer4.showStory(this.__storyProps),c.autoClear=!1,c.vr.autoSubmitFrame=!1,c.setClearColor(new(b("ThreeJS.r88").Color)(n),1),this.__model.scale.fromArray(l),this.__model.position.fromArray(m)};a.prototype.onExitVr=function(){this.__onExitVr()};a.prototype.render=function(a){__p&&__p();this.__render(a);if(this.__isAutoRecentering)a.setClearColor(new(b("ThreeJS.r88").Color)("white"),1),a.clear(!0,!0,!0);else{a.setClearColor(new(b("ThreeJS.r88").Color)(n),1);var c=a.state.buffers.stencil,d=a.state.buffers.depth,e=a.context;a.clearColor();d.setTest(!0);c.setTest(!0);c.setFunc(e.ALWAYS,1,255);c.setOp(e.REPLACE,e.REPLACE,e.REPLACE);a.render(this.$Asset3dPhotoVrViewer2,this.__vrCamera);a.clearDepth();c.setFunc(e.EQUAL,1,255);c.setOp(e.KEEP,e.KEEP,e.KEEP);a.render(this.__scene,this.__vrCamera);c.setFunc(e.NOTEQUAL,1,255);c.setOp(e.KEEP,e.KEEP,e.KEEP);d.setTest(!1);a.render(this.$Asset3dPhotoVrViewer3,this.__vrCamera);a.clearStencil();a.clearDepth()}a.vr.submitFrame()};e.exports=a}),null);
__d("Asset3dVrManager",["invariant","Promise","Asset3DCategory","Asset3dModelVrViewer","Asset3dPhotoVrViewer","Asset3dVrViewer","ThreeJS.r88","UserAgent","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=1.5;function a(a){__p&&__p();this.$6=[],this.$14=function(){var a=this.$1;this.inVr()&&a&&(this.$4.requestAnimationFrame(this.$14),a.render(this.$5))}.bind(this),this.$5=a,b("UserAgent").isBrowser("Oculus Browser")&&(this.$8=!0,this.$5.vr.setScaling(h)),this.$9(),window.addEventListener("vrdisplayconnect",function(){this.$9()}.bind(this)),window.addEventListener("vrdisplaydisconnect",function(){this.$9()}.bind(this)),document.addEventListener("visibilitychange",function(){document.visibilityState!=="visible"&&b("promiseDone")(this.exitVr())}.bind(this)),window.addEventListener("vrdisplaypresentchange",function(){this.$4.isPresenting?this.$10():this.$11()}.bind(this)),window.addEventListener("vrdisplayblur",function(){this.$1&&this.$1.markNeedsRecentering()}.bind(this)),window.addEventListener("vrdisplayfocus",function(){this.$1&&this.$1.markNeedsRecentering()}.bind(this)),window.addEventListener("vrdisplayactivate",function(a){this.$1&&this.$1.markNeedsRecentering()}.bind(this)),window.addEventListener("vrdisplaydeactivate",function(a){this.$1&&this.$1.markNeedsRecentering()}.bind(this))}a.prototype.addDeviceReadyListner=function(a){this.$6.push(a),a(this.$4!==null)};a.prototype.removeDeviceReadyListner=function(a){a=this.$6.indexOf(a);a>=0&&this.$6.splice(a,1)};a.prototype.$12=function(){this.$6.forEach(function(a){a(this.$4!==null)}.bind(this))};a.prototype.$9=function(){this.$4=null,navigator.getVRDisplays&&b("promiseDone")(b("Promise").resolve(navigator.getVRDisplays().then(function(a){a.length>0&&(this.$4=a[0],this.$2||(this.$2=new(b("Asset3dModelVrViewer"))()),this.$3||(this.$3=new(b("Asset3dPhotoVrViewer"))())),this.$5.vr.setDevice(this.$4),this.$12()}.bind(this))))};a.prototype.$13=function(a){if(a===b("Asset3DCategory").PHOTOS_3D){this.$3||g(0);return this.$3}else{this.$2||g(0);return this.$2}};a.prototype.enterVr=function(a,c,d,e,f){__p&&__p();if(this.$4){d=d.clone(!0);this.$8&&d.traverse(function(a){if(a.isMesh){a=a;if(!a.geometry.isBufferGeometry)return;a=a.material;a.map&&a.map.isTexture&&(a.map.minFilter=b("ThreeJS.r88").LinearMipMapLinearFilter)}});if(this.$4.isPresenting){this.$11();this.$1=this.$13(a);this.$1.setup(c,d,f);this.$7=e;this.$10();return b("Promise").resolve()}this.$1=this.$13(a);this.$1.setup(c,d,f);this.$7=e;return b("Promise").all([this.$4.requestPresent([{source:this.$5.domElement}])])}return b("Promise").resolve()};a.prototype.$10=function(){var a=this.$1;a&&(a.onEnterVr(this.$4,this.$5),this.$5.vr.enabled=!0,this.$4.requestAnimationFrame(this.$14))};a.prototype.exitVr=function(){return this.$4&&this.$4.isPresenting?b("Promise").all([this.$4.exitPresent()]):b("Promise").resolve()};a.prototype.$11=function(){var a=this.$1;a&&(this.$4.cancelAnimationFrame(this.$14),this.$5.vr.enabled=!1,a.onExitVr(),this.$1=null,this.$7&&(this.$7(),this.$7=null))};a.prototype.domElement=function(){return this.$5.domElement};a.prototype.inVr=function(){return this.$4&&this.$4.isPresenting};e.exports=a}),null);
__d("GLTFLoader.r88",["Promise","ThreeJS.r88"],(function(a,b,c,d,e,f){__p&&__p();GLTFLoader=function(){__p&&__p();function a(a){this.manager=a!==undefined?a:b("ThreeJS.r88").DefaultLoadingManager}a.prototype={constructor:a,crossOrigin:"Anonymous",load:function(a,c,d,e){var f=this,g=this.path!==undefined?this.path:b("ThreeJS.r88").Loader.prototype.extractUrlBase(a),h=new(b("ThreeJS.r88").FileLoader)(f.manager);h.setResponseType("arraybuffer");h.load(a,function(a){try{f.parse(a,g,c,e)}catch(a){e!==undefined&&e(a.constructor===Error?a:new Error("THREE.GLTFLoader: Unable to parse model."))}},d,e)},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a},parse:function(a,b,c,i){__p&&__p();var j,m={};if(typeof a==="string")j=a;else{var n=y(new Uint8Array(a,0,4));n===h?(m[d.KHR_BINARY_GLTF]=new k(a),j=m[d.KHR_BINARY_GLTF].content):j=y(new Uint8Array(a))}n=JSON.parse(j);if(n.asset===undefined||n.asset.version[0]<2){i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}n.extensionsUsed&&(n.extensionsUsed.indexOf(d.KHR_LIGHTS)>=0&&(m[d.KHR_LIGHTS]=new e(n)),n.extensionsUsed.indexOf(d.KHR_MATERIALS_COMMON)>=0&&(m[d.KHR_MATERIALS_COMMON]=new f(n)),n.extensionsUsed.indexOf(d.KHR_MATERIALS_UNLIT)>=0&&(m[d.KHR_MATERIALS_UNLIT]=new g(n)),n.extensionsUsed.indexOf(d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0&&(m[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new l()));console.time("GLTFLoader");a=new B(n,m,{path:b||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});a.parse(function(a,b,d,e){console.timeEnd("GLTFLoader");a={scene:a,scenes:b,cameras:d,animations:e};c(a)},i)}};function c(){var a={};return{get:function(b){return a[b]},add:function(b,c){a[b]=c},remove:function(b){delete a[b]},removeAll:function(){a={}}}}var d={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};function e(a){__p&&__p();this.name=d.KHR_LIGHTS;this.lights={};a=a.extensions&&a.extensions[d.KHR_LIGHTS]||{};a=a.lights||{};for(var c in a){var e=a[c],f,g=new(b("ThreeJS.r88").Color)().fromArray(e.color);switch(e.type){case"directional":f=new(b("ThreeJS.r88").DirectionalLight)(g);f.position.set(0,0,1);break;case"point":f=new(b("ThreeJS.r88").PointLight)(g);break;case"spot":f=new(b("ThreeJS.r88").SpotLight)(g);f.position.set(0,0,1);break;case"ambient":f=new(b("ThreeJS.r88").AmbientLight)(g);break}f&&(e.constantAttenuation!==undefined&&(f.intensity=e.constantAttenuation),e.linearAttenuation!==undefined&&(f.distance=1/e.linearAttenuation),e.quadraticAttenuation!==undefined&&(f.decay=e.quadraticAttenuation),e.fallOffAngle!==undefined&&(f.angle=e.fallOffAngle),e.fallOffExponent!==undefined&&!1,f.name=e.name||"light_"+c,this.lights[c]=f)}}function f(a){this.name=d.KHR_MATERIALS_COMMON}f.prototype.getMaterialType=function(a){a=a.extensions[this.name];switch(a.type){case"commonBlinn":case"commonPhong":return b("ThreeJS.r88").MeshPhongMaterial;case"commonLambert":return b("ThreeJS.r88").MeshLambertMaterial;case"commonConstant":default:return b("ThreeJS.r88").MeshBasicMaterial}};f.prototype.extendParams=function(a,c,d){__p&&__p();var e=c.extensions[this.name];c=[];var f=[];switch(e.type){case"commonBlinn":case"commonPhong":f.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case"commonLambert":f.push("diffuseFactor","diffuseTexture");break;case"commonConstant":default:break}var g={};f.forEach(function(a){e[a]!==undefined&&(g[a]=e[a])});g.diffuseFactor!==undefined&&(a.color=new(b("ThreeJS.r88").Color)().fromArray(g.diffuseFactor),a.opacity=g.diffuseFactor[3]);g.diffuseTexture!==undefined&&c.push(d.assignTexture(a,"map",g.diffuseTexture.index));g.specularFactor!==undefined&&(a.specular=new(b("ThreeJS.r88").Color)().fromArray(g.specularFactor));g.specularTexture!==undefined&&c.push(d.assignTexture(a,"specularMap",g.specularTexture.index));g.shininessFactor!==undefined&&(a.shininess=g.shininessFactor);return b("Promise").all(c)};function g(a){this.name=d.KHR_MATERIALS_UNLIT}g.prototype.getMaterialType=function(a){return b("ThreeJS.r88").MeshBasicMaterial};g.prototype.extendParams=function(a,c,d){__p&&__p();var e=[];delete c.emissiveFactor;delete c.emissiveTexture;a.color=new(b("ThreeJS.r88").Color)(1,1,1);a.opacity=1;c=c.pbrMetallicRoughness;if(c!==undefined){if(Array.isArray(c.baseColorFactor)){var f=c.baseColorFactor;a.color.fromArray(f);a.opacity=f[3]}c.baseColorTexture!==undefined&&e.push(d.assignTexture(a,"map",c.baseColorTexture.index))}return b("Promise").all(e)};var h="glTF",i=12,j={JSON:1313821514,BIN:5130562};function k(a){__p&&__p();this.name=d.KHR_BINARY_GLTF;this.content=null;this.body=null;var b=new DataView(a,0,i);this.header={magic:y(new Uint8Array(a.slice(0,4))),version:b.getUint32(4,!0),length:b.getUint32(8,!0)};if(this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use GLTFLoader instead.");b=new DataView(a,i);var c=0;while(c<b.byteLength){var e=b.getUint32(c,!0);c+=4;var f=b.getUint32(c,!0);c+=4;if(f===j.JSON){var g=new Uint8Array(a,i+c,e);this.content=y(g)}else if(f===j.BIN){g=i+c;this.body=a.slice(g,g+e)}c+=e}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function l(){__p&&__p();return{name:d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return b("ThreeJS.r88").ShaderMaterial},extendParams:function(a,c,d){__p&&__p();c=c.extensions[this.name];var e=b("ThreeJS.r88").ShaderLib.standard,f=b("ThreeJS.r88").UniformsUtils.clone(e.uniforms),g=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),h=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),j=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),k=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n");g=e.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",g).replace("#include <metalnessmap_pars_fragment>",h).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",j).replace("#include <lights_physical_fragment>",k);delete f.roughness;delete f.metalness;delete f.roughnessMap;delete f.metalnessMap;f.specular={value:new(b("ThreeJS.r88").Color)().setHex(1118481)};f.glossiness={value:.5};f.specularMap={value:null};f.glossinessMap={value:null};a.vertexShader=e.vertexShader;a.fragmentShader=g;a.uniforms=f;a.defines={STANDARD:""};a.color=new(b("ThreeJS.r88").Color)(1,1,1);a.opacity=1;h=[];if(Array.isArray(c.diffuseFactor)){i=c.diffuseFactor;a.color.fromArray(i);a.opacity=i[3]}c.diffuseTexture!==undefined&&h.push(d.assignTexture(a,"map",c.diffuseTexture.index));a.emissive=new(b("ThreeJS.r88").Color)(0,0,0);a.glossiness=c.glossinessFactor!==undefined?c.glossinessFactor:1;a.specular=new(b("ThreeJS.r88").Color)(1,1,1);Array.isArray(c.specularFactor)&&a.specular.fromArray(c.specularFactor);if(c.specularGlossinessTexture!==undefined){j=c.specularGlossinessTexture.index;h.push(d.assignTexture(a,"glossinessMap",j));h.push(d.assignTexture(a,"specularMap",j))}return b("Promise").all(h)},createMaterial:function(a){__p&&__p();var c=new(b("ThreeJS.r88").ShaderMaterial)({defines:a.defines,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms,fog:!0,lights:!0,opacity:a.opacity,transparent:a.transparent});c.isGLTFSpecularGlossinessMaterial=!0;c.color=a.color;c.map=a.map===undefined?null:a.map;c.lightMap=null;c.lightMapIntensity=1;c.aoMap=a.aoMap===undefined?null:a.aoMap;c.aoMapIntensity=1;c.emissive=a.emissive;c.emissiveIntensity=1;c.emissiveMap=a.emissiveMap===undefined?null:a.emissiveMap;c.bumpMap=a.bumpMap===undefined?null:a.bumpMap;c.bumpScale=1;c.normalMap=a.normalMap===undefined?null:a.normalMap;a.normalScale&&(c.normalScale=a.normalScale);c.displacementMap=null;c.displacementScale=1;c.displacementBias=0;c.specularMap=a.specularMap===undefined?null:a.specularMap;c.specular=a.specular;c.glossinessMap=a.glossinessMap===undefined?null:a.glossinessMap;c.glossiness=a.glossiness;c.alphaMap=null;c.envMap=a.envMap===undefined?null:a.envMap;c.envMapIntensity=1;c.refractionRatio=.98;c.extensions.derivatives=!0;return c},cloneMaterial:function(a){var b=a.clone();b.isGLTFSpecularGlossinessMaterial=!0;var c=this.specularGlossinessParams;for(var d=0;d<c.length;d++)b[c[d]]=a[c[d]];return b},refreshUniforms:function(a,b,c,d,e,f){__p&&__p();a=e.uniforms;b=e.defines;a.opacity.value=e.opacity;a.diffuse.value.copy(e.color);a.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);a.map.value=e.map;a.specularMap.value=e.specularMap;a.alphaMap.value=e.alphaMap;a.lightMap.value=e.lightMap;a.lightMapIntensity.value=e.lightMapIntensity;a.aoMap.value=e.aoMap;a.aoMapIntensity.value=e.aoMapIntensity;var g;e.map?g=e.map:e.specularMap?g=e.specularMap:e.displacementMap?g=e.displacementMap:e.normalMap?g=e.normalMap:e.bumpMap?g=e.bumpMap:e.glossinessMap?g=e.glossinessMap:e.alphaMap?g=e.alphaMap:e.emissiveMap&&(g=e.emissiveMap);if(g!==undefined){g.isWebGLRenderTarget&&(g=g.texture);if(g.matrix!==undefined){if(g.matrixAutoUpdate===!0){c=g.offset;d=g.repeat;f=g.rotation;var h=g.center;g.matrix.setUvTransform(c.x,c.y,d.x,d.y,f,h.x,h.y)}a.uvTransform.value.copy(g.matrix)}else c=g.offset,d=g.repeat,a.offsetRepeat.value.set(c.x,c.y,d.x,d.y)}a.envMap.value=e.envMap;a.envMapIntensity.value=e.envMapIntensity;a.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1;a.refractionRatio.value=e.refractionRatio;a.specular.value.copy(e.specular);a.glossiness.value=e.glossiness;a.glossinessMap.value=e.glossinessMap;a.emissiveMap.value=e.emissiveMap;a.bumpMap.value=e.bumpMap;a.normalMap.value=e.normalMap;a.displacementMap.value=e.displacementMap;a.displacementScale.value=e.displacementScale;a.displacementBias.value=e.displacementBias;a.glossinessMap.value!==null&&b.USE_GLOSSINESSMAP===undefined&&(b.USE_GLOSSINESSMAP="",b.USE_ROUGHNESSMAP="");a.glossinessMap.value===null&&b.USE_GLOSSINESSMAP!==undefined&&(delete b.USE_GLOSSINESSMAP,delete b.USE_ROUGHNESSMAP)}}}var m={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123};({5126:Number,35675:b("ThreeJS.r88").Matrix3,35676:b("ThreeJS.r88").Matrix4,35664:b("ThreeJS.r88").Vector2,35665:b("ThreeJS.r88").Vector3,35666:b("ThreeJS.r88").Vector4,35678:b("ThreeJS.r88").Texture});var n={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},o={9728:b("ThreeJS.r88").NearestFilter,9729:b("ThreeJS.r88").LinearFilter,9984:b("ThreeJS.r88").NearestMipMapNearestFilter,9985:b("ThreeJS.r88").LinearMipMapNearestFilter,9986:b("ThreeJS.r88").NearestMipMapLinearFilter,9987:b("ThreeJS.r88").LinearMipMapLinearFilter},p={33071:b("ThreeJS.r88").ClampToEdgeWrapping,33648:b("ThreeJS.r88").MirroredRepeatWrapping,10497:b("ThreeJS.r88").RepeatWrapping},q={6406:b("ThreeJS.r88").AlphaFormat,6407:b("ThreeJS.r88").RGBFormat,6408:b("ThreeJS.r88").RGBAFormat,6409:b("ThreeJS.r88").LuminanceFormat,6410:b("ThreeJS.r88").LuminanceAlphaFormat},r={5121:b("ThreeJS.r88").UnsignedByteType,32819:b("ThreeJS.r88").UnsignedShort4444Type,32820:b("ThreeJS.r88").UnsignedShort5551Type,33635:b("ThreeJS.r88").UnsignedShort565Type};({1028:b("ThreeJS.r88").BackSide,1029:b("ThreeJS.r88").FrontSide});({512:b("ThreeJS.r88").NeverDepth,513:b("ThreeJS.r88").LessDepth,514:b("ThreeJS.r88").EqualDepth,515:b("ThreeJS.r88").LessEqualDepth,516:b("ThreeJS.r88").GreaterEqualDepth,517:b("ThreeJS.r88").NotEqualDepth,518:b("ThreeJS.r88").GreaterEqualDepth,519:b("ThreeJS.r88").AlwaysDepth});({32774:b("ThreeJS.r88").AddEquation,32778:b("ThreeJS.r88").SubtractEquation,32779:b("ThreeJS.r88").ReverseSubtractEquation});({0:b("ThreeJS.r88").ZeroFactor,1:b("ThreeJS.r88").OneFactor,768:b("ThreeJS.r88").SrcColorFactor,769:b("ThreeJS.r88").OneMinusSrcColorFactor,770:b("ThreeJS.r88").SrcAlphaFactor,771:b("ThreeJS.r88").OneMinusSrcAlphaFactor,772:b("ThreeJS.r88").DstAlphaFactor,773:b("ThreeJS.r88").OneMinusDstAlphaFactor,774:b("ThreeJS.r88").DstColorFactor,775:b("ThreeJS.r88").OneMinusDstColorFactor,776:b("ThreeJS.r88").SrcAlphaSaturateFactor});var s={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},t={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},u={CATMULLROMSPLINE:b("ThreeJS.r88").InterpolateSmooth,CUBICSPLINE:b("ThreeJS.r88").InterpolateSmooth,LINEAR:b("ThreeJS.r88").InterpolateLinear,STEP:b("ThreeJS.r88").InterpolateDiscrete};({2884:"CULL_FACE",2929:"DEPTH_TEST",3042:"BLEND",3089:"SCISSOR_TEST",32823:"POLYGON_OFFSET_FILL",32926:"SAMPLE_ALPHA_TO_COVERAGE"});var v={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function w(a,c,d){__p&&__p();if(!a)return b("Promise").resolve();var e,f=[];if(Object.prototype.toString.call(a)==="[object Array]"){e=[];var g=a.length;for(var h=0;h<g;h++){var i=c.call(d||this,a[h],h);i&&(i instanceof b("Promise")?i=i.then(function(b,a){e[b]=a}.bind(this,h)):e[h]=i,f.push(i))}}else{e={};for(var j in a)if(Object.prototype.hasOwnProperty.call(a,j)){var i=c.call(d||this,a[j],j);i&&(i instanceof b("Promise")?i=i.then(function(b,a){e[b]=a}.bind(this,j)):e[j]=i,f.push(i))}}return b("Promise").all(f).then(function(){return e})}function x(a,b){if(typeof a!=="string"||a==="")return"";if(/^(https?:)?\/\//i.test(a))return a;if(/^data:.*,.*$/i.test(a))return a;return/^blob:.*$/i.test(a)?a:b+a}function y(a){if(window.TextDecoder!==undefined)return new TextDecoder().decode(a);var b="";for(var c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return b}function z(){return new(b("ThreeJS.r88").MeshStandardMaterial)({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:b("ThreeJS.r88").FrontSide})}function A(a,b,c,d){__p&&__p();var e=a.geometry,f=a.material;c=c.targets;var g=e.morphAttributes;g.position=[];g.normal=[];f.morphTargets=!0;for(var h=0,i=c.length;h<i;h++){var j=c[h],k="morphTarget"+h,l,m;if(j.POSITION!==undefined){l=d.accessors[j.POSITION].clone();var n=e.attributes.position;for(var o=0,p=l.count;o<p;o++)l.setXYZ(o,l.getX(o)+n.getX(o),l.getY(o)+n.getY(o),l.getZ(o)+n.getZ(o))}else e.attributes.position&&(l=e.attributes.position.clone());l!==undefined&&(l.name=k,g.position.push(l));if(j.NORMAL!==undefined){f.morphNormals=!0;m=d.accessors[j.NORMAL].clone();n=e.attributes.normal;for(var o=0,p=m.count;o<p;o++)m.setXYZ(o,m.getX(o)+n.getX(o),m.getY(o)+n.getY(o),m.getZ(o)+n.getZ(o))}else e.attributes.normal!==undefined&&(m=e.attributes.normal.clone());m!==undefined&&(m.name=k,g.normal.push(m))}a.updateMorphTargets();if(b.weights!==undefined)for(var h=0,i=b.weights.length;h<i;h++)a.morphTargetInfluences[h]=b.weights[h]}function B(a,d,e){this.json=a||{},this.extensions=d||{},this.options=e||{},this.cache=new c(),this.textureLoader=new(b("ThreeJS.r88").TextureLoader)(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new(b("ThreeJS.r88").FileLoader)(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}B.prototype._withDependencies=function(a){__p&&__p();var b={};for(var c=0;c<a.length;c++){var d=a[c],e="load"+d.charAt(0).toUpperCase()+d.slice(1),f=this.cache.get(d);if(f!==undefined)b[d]=f;else if(this[e]){f=this[e]();this.cache.add(d,f);b[d]=f}}return w(b,function(a){return a})};B.prototype.parse=function(a,b){var c=this.json,d=this;this.cache.removeAll();this._withDependencies(["scenes","animations"]).then(function(e){var f=e.scenes||[],g=f[c.scene||0],h=e.animations||[];d.getDependencies("camera").then(function(b){a(g,f,b,h)})["catch"](b)})["catch"](b)};B.prototype.getDependency=function(a,b){var c=a+":"+b,d=this.cache.get(c);if(!d){a="load"+a.charAt(0).toUpperCase()+a.slice(1);d=this[a](b);this.cache.add(c,d)}return d};B.prototype.getDependencies=function(a){var c=this,d=this.json[a+"s"]||[];return b("Promise").all(d.map(function(b,d){return c.getDependency(a,d)}))};B.prototype.loadBuffer=function(a){var c=this.json.buffers[a],e=this.fileLoader;if(c.type&&c.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+c.type+" buffer type is not supported.");if(c.uri===undefined&&a===0)return b("Promise").resolve(this.extensions[d.KHR_BINARY_GLTF].body);var f=this.options;return new(b("Promise"))(function(a,b){e.load(x(c.uri,f.path),a,undefined,function(){b(new Error('THREE.GLTFLoader: Failed to load buffer "'+c.uri+'".'))})})};B.prototype.loadBufferView=function(a){var b=this.json.bufferViews[a];return this.getDependency("buffer",b.buffer).then(function(a){var c=b.byteLength||0,d=b.byteOffset||0;return a.slice(d,d+c)})};B.prototype.loadAccessors=function(){__p&&__p();var a=this,c=this.json;return w(c.accessors,function(d){__p&&__p();return a.getDependency("bufferView",d.bufferView).then(function(a){var e=s[d.type],f=n[d.componentType],g=f.BYTES_PER_ELEMENT,h=g*e,i=c.bufferViews[d.bufferView].byteStride,j=d.normalized===!0;if(i&&i!==h){h=new f(a);i=new(b("ThreeJS.r88").InterleavedBuffer)(h,i/g);return new(b("ThreeJS.r88").InterleavedBufferAttribute)(i,e,d.byteOffset/g,j)}else{h=new f(a,d.byteOffset,d.count*e);return new(b("ThreeJS.r88").BufferAttribute)(h,e,j)}})})};B.prototype.loadTexture=function(a){__p&&__p();var c=this,d=this.json,e=this.options,f=this.textureLoader,g=window.URL||window.webkitURL,h=d.textures[a],i=d.images[h.source],j=i.uri,k=!1;i.bufferView!==undefined&&(j=c.getDependency("bufferView",i.bufferView).then(function(a){k=!0;a=new Blob([a],{type:i.mimeType});j=g.createObjectURL(a);return j}));return b("Promise").resolve(j).then(function(a){var c=b("ThreeJS.r88").Loader.Handlers.get(a)||f;return new(b("Promise"))(function(b,d){c.load(x(a,e.path),b,undefined,d)})}).then(function(a){__p&&__p();k===!0&&g.revokeObjectURL(j);a.flipY=!1;h.name!==undefined&&(a.name=h.name);a.format=h.format!==undefined?q[h.format]:b("ThreeJS.r88").RGBAFormat;h.internalFormat!==undefined&&a.format!==q[h.internalFormat]&&!1;a.type=h.type!==undefined?r[h.type]:b("ThreeJS.r88").UnsignedByteType;var c=d.samplers||{};c=c[h.sampler]||{};a.magFilter=o[c.magFilter]||b("ThreeJS.r88").LinearFilter;a.minFilter=o[c.minFilter]||b("ThreeJS.r88").LinearMipMapLinearFilter;a.wrapS=p[c.wrapS]||b("ThreeJS.r88").RepeatWrapping;a.wrapT=p[c.wrapT]||b("ThreeJS.r88").RepeatWrapping;return a})};B.prototype.assignTexture=function(a,b,c){return this.getDependency("texture",c).then(function(c){a[b]=c})};B.prototype.loadMaterials=function(){__p&&__p();var a=this,c=this.json,e=this.extensions;return w(c.materials,function(c){__p&&__p();var f,g={},h=c.extensions||{},i=[];if(h[d.KHR_MATERIALS_UNLIT]){var j=e[d.KHR_MATERIALS_UNLIT];f=j.getMaterialType(c);i.push(j.extendParams(g,c,a))}else if(h[d.KHR_MATERIALS_COMMON]){j=e[d.KHR_MATERIALS_COMMON];f=j.getMaterialType(c);i.push(j.extendParams(g,c,a))}else if(c.pbrMetallicRoughness!==undefined){f=b("ThreeJS.r88").MeshStandardMaterial;h=c.pbrMetallicRoughness;g.color=new(b("ThreeJS.r88").Color)(1,1,1);g.opacity=1;if(Array.isArray(h.baseColorFactor)){j=h.baseColorFactor;g.color.fromArray(j);g.opacity=j[3]}h.baseColorTexture!==undefined&&i.push(a.assignTexture(g,"map",h.baseColorTexture.index));g.metalness=h.metallicFactor!==undefined?h.metallicFactor:1;g.roughness=h.roughnessFactor!==undefined?h.roughnessFactor:1;if(h.metallicRoughnessTexture!==undefined){j=h.metallicRoughnessTexture.index;i.push(a.assignTexture(g,"metalnessMap",j));i.push(a.assignTexture(g,"roughnessMap",j))}}else f=b("ThreeJS.r88").MeshPhongMaterial;c.doubleSided===!0&&(g.side=b("ThreeJS.r88").DoubleSide);h=c.alphaMode||v.OPAQUE;h!==v.OPAQUE?(g.transparent=!0,h===v.MASK&&(g.alphaTest=c.alphaCutoff||.5)):g.transparent=!1;c.normalTexture!==undefined&&(i.push(a.assignTexture(g,"normalMap",c.normalTexture.index)),g.normalScale=new(b("ThreeJS.r88").Vector2)(1,1),c.normalTexture.scale!==undefined&&g.normalScale.set(c.normalTexture.scale,c.normalTexture.scale));c.occlusionTexture!==undefined&&(i.push(a.assignTexture(g,"aoMap",c.occlusionTexture.index)),c.occlusionTexture.strength!==undefined&&(g.aoMapIntensity=c.occlusionTexture.strength));c.emissiveFactor!==undefined&&(f===b("ThreeJS.r88").MeshBasicMaterial?g.color=new(b("ThreeJS.r88").Color)().fromArray(c.emissiveFactor):g.emissive=new(b("ThreeJS.r88").Color)().fromArray(c.emissiveFactor));c.emissiveTexture!==undefined&&(f===b("ThreeJS.r88").MeshBasicMaterial?i.push(a.assignTexture(g,"map",c.emissiveTexture.index)):i.push(a.assignTexture(g,"emissiveMap",c.emissiveTexture.index)));return b("Promise").all(i).then(function(){var a;f===b("ThreeJS.r88").ShaderMaterial?a=e[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):a=new f(g);c.name!==undefined&&(a.name=c.name);a.normalScale&&(a.normalScale.x=-a.normalScale.x);a.map&&(a.map.encoding=b("ThreeJS.r88").sRGBEncoding);a.emissiveMap&&(a.emissiveMap.encoding=b("ThreeJS.r88").sRGBEncoding);c.extras&&(a.userData=c.extras);return a})})};B.prototype.loadGeometries=function(a){__p&&__p();return this._withDependencies(["accessors"]).then(function(c){__p&&__p();return w(a,function(a){__p&&__p();var d=new(b("ThreeJS.r88").BufferGeometry)(),e=a.attributes;for(var f in e){var g=e[f];if(g===undefined)return;g=c.accessors[g];switch(f){case"POSITION":d.addAttribute("position",g);break;case"NORMAL":d.addAttribute("normal",g);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":d.addAttribute("uv",g);break;case"TEXCOORD_1":d.addAttribute("uv2",g);break;case"COLOR_0":case"COLOR0":case"COLOR":d.addAttribute("color",g);break;case"WEIGHTS_0":case"WEIGHT":d.addAttribute("skinWeight",g);break;case"JOINTS_0":case"JOINT":d.addAttribute("skinIndex",g);break}}a.indices!==undefined&&d.setIndex(c.accessors[a.indices]);return d})})};B.prototype.loadMeshes=function(){__p&&__p();var a=this,c=this.json,e=this.extensions;return this._withDependencies(["accessors","materials"]).then(function(f){__p&&__p();return w(c.meshes,function(c,g){__p&&__p();var h=new(b("ThreeJS.r88").Group)(),i=c.primitives||[];return a.loadGeometries(i).then(function(a){__p&&__p();for(var j=0;j<i.length;j++){var k=i[j],l=a[j],n=k.material===undefined?z():f.materials[k.material];n.aoMap&&l.attributes.uv2===undefined&&l.attributes.uv!==undefined&&(!1,l.addAttribute("uv2",new(b("ThreeJS.r88").BufferAttribute)(l.attributes.uv.array,2)));var o=l.attributes.color!==undefined,p=l.attributes.normal===undefined;if(o||p)if(n.isGLTFSpecularGlossinessMaterial){var q=e[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=q.cloneMaterial(n)}else n=n.clone();o&&(n.vertexColors=b("ThreeJS.r88").VertexColors,n.needsUpdate=!0);p&&(n.flatShading=!0);if(k.mode===m.TRIANGLES||k.mode===undefined)q=new(b("ThreeJS.r88").Mesh)(l,n);else if(k.mode===m.TRIANGLE_STRIP)q=new(b("ThreeJS.r88").Mesh)(l,n),q.drawMode=b("ThreeJS.r88").TriangleStripDrawMode;else if(k.mode===m.TRIANGLE_FAN)q=new(b("ThreeJS.r88").Mesh)(l,n),q.drawMode=b("ThreeJS.r88").TriangleFanDrawMode;else if(k.mode===m.LINES)q=new(b("ThreeJS.r88").LineSegments)(l,n);else if(k.mode===m.LINE_STRIP)q=new(b("ThreeJS.r88").Line)(l,n);else if(k.mode===m.LINE_LOOP)q=new(b("ThreeJS.r88").LineLoop)(l,n);else if(k.mode===m.POINTS)q=new(b("ThreeJS.r88").Points)(l,n);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: ",k.mode);q.name=c.name||"mesh_"+g;k.targets!==undefined&&A(q,c,k,f);k.extras&&(q.userData=k.extras);if(i.length>1)q.name+="_"+j,h.add(q);else return q}return h})})})};B.prototype.loadCamera=function(a){__p&&__p();var c;a=this.json.cameras[a];var d=a[a.type];if(!d){!1;return}if(a.type==="perspective"){var e=d.aspectRatio||1,f=d.yfov*e;c=new(b("ThreeJS.r88").PerspectiveCamera)(b("ThreeJS.r88").Math.radToDeg(f),e,d.znear||1,d.zfar||2e6)}else a.type==="orthographic"&&(c=new(b("ThreeJS.r88").OrthographicCamera)(d.xmag/-2,d.xmag/2,d.ymag/2,d.ymag/-2,d.znear,d.zfar));a.name!==undefined&&(c.name=a.name);a.extras&&(c.userData=a.extras);return b("Promise").resolve(c)};B.prototype.loadSkins=function(){var a=this.json;return this._withDependencies(["accessors"]).then(function(b){return w(a.skins,function(a){a={joints:a.joints,inverseBindMatrices:b.accessors[a.inverseBindMatrices]};return a})})};B.prototype.loadAnimations=function(){__p&&__p();var a=this.json;return this._withDependencies(["accessors","nodes"]).then(function(c){__p&&__p();return w(a.animations,function(a,d){__p&&__p();var e=[];for(var f=0;f<a.channels.length;f++){var g=a.channels[f],h=a.samplers[g.sampler];if(h){g=g.target;var i=g.node!==undefined?g.node:g.id,j=a.parameters!==undefined?a.parameters[h.input]:h.input,k=a.parameters!==undefined?a.parameters[h.output]:h.output;j=c.accessors[j];k=c.accessors[k];var l=c.nodes[i];if(l){l.updateMatrix();l.matrixAutoUpdate=!0;var m;switch(t[g.path]){case t.weights:m=b("ThreeJS.r88").NumberKeyframeTrack;break;case t.rotation:m=b("ThreeJS.r88").QuaternionKeyframeTrack;break;case t.position:case t.scale:default:m=b("ThreeJS.r88").VectorKeyframeTrack;break}var n=l.name?l.name:l.uuid;h.interpolation==="CATMULLROMSPLINE"&&!1;h=h.interpolation!==undefined?u[h.interpolation]:b("ThreeJS.r88").InterpolateLinear;var o=[];t[g.path]===t.weights?l.traverse(function(a){a.isMesh===!0&&a.material.morphTargets===!0&&o.push(a.name?a.name:a.uuid)}):o.push(n);for(var l=0,n=o.length;l<n;l++)e.push(new m(o[l]+"."+t[g.path],b("ThreeJS.r88").AnimationUtils.arraySlice(j.array,0),b("ThreeJS.r88").AnimationUtils.arraySlice(k.array,0),h))}}}var i=a.name!==undefined?a.name:"animation_"+d;return new(b("ThreeJS.r88").AnimationClip)(i,undefined,e)})})};B.prototype.loadNodes=function(){__p&&__p();var a=this.json,c=this.extensions,e=this,f=a.nodes||[],g=a.skins||[],h={},i={};for(var j in g){var k=g[j].joints;for(var l=0;l<k.length;++l)f[k[l]].isBone=!0}for(var m in f){l=f[m];l.mesh!==undefined&&(h[l.mesh]===undefined&&(h[l.mesh]=i[l.mesh]=0),h[l.mesh]++)}return e._withDependencies(["meshes","skins","cameras"]).then(function(f){__p&&__p();return w(a.nodes,function(a){__p&&__p();if(a.isBone===!0)return new(b("ThreeJS.r88").Bone)();else if(a.mesh!==undefined){var g=f.meshes[a.mesh].clone();h[a.mesh]>1&&(g.name+="_instance_"+i[a.mesh]++);return g}else if(a.camera!==undefined)return e.getDependency("camera",a.camera);else if(a.extensions&&a.extensions[d.KHR_LIGHTS]&&a.extensions[d.KHR_LIGHTS].light!==undefined){g=c[d.KHR_LIGHTS].lights;return g[a.extensions[d.KHR_LIGHTS].light]}else return new(b("ThreeJS.r88").Object3D)()}).then(function(c){__p&&__p();return w(c,function(g,e){__p&&__p();e=a.nodes[e];e.name!==undefined&&(g.name=b("ThreeJS.r88").PropertyBinding.sanitizeNodeName(e.name));e.extras&&(g.userData=e.extras);if(e.matrix!==undefined){var h=new(b("ThreeJS.r88").Matrix4)();h.fromArray(e.matrix);g.applyMatrix(h)}else e.translation!==undefined&&g.position.fromArray(e.translation),e.rotation!==undefined&&g.quaternion.fromArray(e.rotation),e.scale!==undefined&&g.scale.fromArray(e.scale);if(e.skin!==undefined){h=[];var i=g.children.length>0?g.children:[g];for(var d=0;d<i.length;d++){var j=i[d],k=f.skins[e.skin],l=j.geometry,m=j.material;m.skinning=!0;l=new(b("ThreeJS.r88").SkinnedMesh)(l,m);l.morphTargetInfluences=j.morphTargetInfluences;l.userData=j.userData;l.name=j.name;m=[];j=[];for(var n=0,o=k.joints.length;n<o;n++){var p=k.joints[n];p=c[p];if(p){m.push(p);p=k.inverseBindMatrices.array;p=new(b("ThreeJS.r88").Matrix4)().fromArray(p,n*16);j.push(p)}else!1}l.bind(new(b("ThreeJS.r88").Skeleton)(m,j),l.matrixWorld);h.push(l)}g.children.length>0?(g.remove.apply(g,g.children),g.add.apply(g,h)):g=h[0]}return g})})})};B.prototype.loadScenes=function(){__p&&__p();var a=this.json,c=this.extensions;function e(b,c,d){__p&&__p();var f=d[b];c.add(f);c=a.nodes[b];if(c.children){b=c.children;for(var c=0,g=b.length;c<g;c++){var h=b[c];e(h,f,d)}}}return this._withDependencies(["nodes"]).then(function(f){__p&&__p();return w(a.scenes,function(a){__p&&__p();var g=new(b("ThreeJS.r88").Scene)();a.name!==undefined&&(g.name=a.name);a.extras&&(g.userData=a.extras);var h=a.nodes||[];for(var i=0,j=h.length;i<j;i++){var k=h[i];e(k,g,f.nodes)}g.traverse(function(a){a.material&&a.material.isGLTFSpecularGlossinessMaterial&&(a.onBeforeRender=c[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)});if(a.extensions&&a.extensions[d.KHR_LIGHTS]&&a.extensions[d.KHR_LIGHTS].light!==undefined){k=c[d.KHR_LIGHTS].lights;g.add(k[a.extensions[d.KHR_LIGHTS].light])}return g})})};return a}(),e.exports=GLTFLoader}),null);
__d("GLTFLoader.r88.patch",["GLTFLoader.r88"],(function(a,b,c,d,e,f){e.exports.patch=function(){return b("GLTFLoader.r88")}}),null);
__d("Photo3dCameraControl",["Asset3dCameraControl","ThreeJS.r88","SphericalViewportControl","degToRad","getElementRect","Random","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("degToRad")(-10),i=b("degToRad")(20),j=b("degToRad")(-11),k=b("degToRad")(23),l=.01,m=1,n=24,o=.08,p=b("degToRad")(5),q=b("degToRad")(3),r=.12,s=new(b("ThreeJS.r88").Vector3)(1,0,0),t=.001,u=.4,v=.3,w=3e-4,x=6e-4,y=x/1700;c=babelHelpers.inherits(a,b("Asset3dCameraControl"));g=c&&c.prototype;function a(a,c,d,e,f,h){__p&&__p();g.constructor.call(this,a,c,d,e,f),this.$Photo3dCameraControl1=!1,this.$Photo3dCameraControl2=0,this.$Photo3dCameraControl3=0,this.$Photo3dCameraControl4=0,this.$Photo3dCameraControl5=0,this.$Photo3dCameraControl6=b("Random").random()<.5,this.$Photo3dCameraControl8=null,this.$Photo3dCameraControl14=function(){this.setDirty(!0,!0),this.$Photo3dCameraControl3+=o*(this.$Photo3dCameraControl5-this.$Photo3dCameraControl3),this.$Photo3dCameraControl2+=o*(this.$Photo3dCameraControl4-this.$Photo3dCameraControl2),Math.abs(this.$Photo3dCameraControl3-this.$Photo3dCameraControl5)>t||Math.abs(this.$Photo3dCameraControl2-this.$Photo3dCameraControl4)>t?this.$Photo3dCameraControl8=requestAnimationFrame(this.$Photo3dCameraControl14):this.$Photo3dCameraControl8=null}.bind(this),this.$Photo3dCameraControl15=function(a){__p&&__p();if(!this.__isInAttractMode)return;var b=a-this.$Photo3dCameraControl12;this.$Photo3dCameraControl12=a;a=u-this.$Photo3dCameraControl9;var c=Math.abs(a)<v;this.$Photo3dCameraControl9+=Math.min(w*b,.99)*a;if(c){a=this.$Photo3dCameraControl11+y*b;a<x&&(this.$Photo3dCameraControl11=a);if(this.$Photo3dCameraControl6){this.$Photo3dCameraControl10+=this.$Photo3dCameraControl11*b;while(this.$Photo3dCameraControl10>Math.PI)this.$Photo3dCameraControl10-=2*Math.PI}else{this.$Photo3dCameraControl10-=this.$Photo3dCameraControl11*b;while(this.$Photo3dCameraControl10<-Math.PI)this.$Photo3dCameraControl10+=2*Math.PI}}this.$Photo3dCameraControl2=this.$Photo3dCameraControl9*Math.cos(this.$Photo3dCameraControl10)*p;this.$Photo3dCameraControl3=this.$Photo3dCameraControl9*Math.sin(this.$Photo3dCameraControl10)*q;this.setDirty(!0,!1);this.__attractModeAnimationFrameID=requestAnimationFrame(this.$Photo3dCameraControl15)}.bind(this),this.__camera.name="2.5D Photo Camera",this.$Photo3dCameraControl7=h}a.prototype.setupViewportListeners=function(){__p&&__p();this.__sphericalViewportControl.addListener("mouseMove",function(a){__p&&__p();var c=a.clientX;a=a.clientY;var d=b("getElementRect")(this.$Photo3dCameraControl7);if(c>d.left&&c<d.right&&a>d.top&&a<d.bottom){var e=.5*(d.left+d.right),f=.5*(d.top+d.bottom);this.$Photo3dCameraControl4=-2*(c-e)/d.width*p;this.$Photo3dCameraControl5=2*(a-f)/d.height*q;this.$Photo3dCameraControl1=!0;this.$Photo3dCameraControl13()}}.bind(this))};a.prototype.$Photo3dCameraControl13=function(){this.$Photo3dCameraControl8||(this.$Photo3dCameraControl8=requestAnimationFrame(this.$Photo3dCameraControl14))};a.prototype.modelLoad=function(a){__p&&__p();this.setDirty(!0);a=new(b("ThreeJS.r88").Box3)().setFromObject(a);this.__camera.near=Math.max(-1-a.max.z,l);a.expandByPoint(new(b("ThreeJS.r88").Vector3)(0,0,r));this.__camera.far=a.getSize().length();this.__cameraTarget.set(0,0,-m);this.__cameraAnchor.position.set(0,0,-m);this.__camera.position.set(0,0,m);this.__camera.fov=n;this.__camera.updateProjectionMatrix()};a.prototype.update=function(a){__p&&__p();if(!this.isDirty())return;var b=h+i*(1-a),c=j+k*(1-a),d=(a-.25)*Math.PI/1.5;d=Math.max(0,d);d=r*(.6-Math.sin(d));this.__cameraTarget.set(0,0,-m);this.__cameraAnchor.position.set(0,0,-m);this.__camera.position.set(0,0,m+d);this.__camera.setRotationFromAxisAngle(s,c);d=this.$Photo3dCameraControl1?0:(this.$Photo3dCameraControl6?1-2*a:2*a-1)*p;c=this.__pitch+this.$Photo3dCameraControl3+b;a=-this.__yaw+this.$Photo3dCameraControl2+d;this.__updateCameraAnchor(c,a)};a.prototype.__exitAttractMode=function(){g.__exitAttractMode.call(this),this.$Photo3dCameraControl5=this.$Photo3dCameraControl3,this.$Photo3dCameraControl4=this.$Photo3dCameraControl2};a.prototype.__enterAttractMode=function(){g.__enterAttractMode.call(this);this.$Photo3dCameraControl8!==null&&(cancelAnimationFrame(this.$Photo3dCameraControl8),this.$Photo3dCameraControl8=null);var a=this.$Photo3dCameraControl2/p,c=this.$Photo3dCameraControl3/q;this.$Photo3dCameraControl9=Math.sqrt(a*a+c*c);this.$Photo3dCameraControl10=Math.atan2(c,a);this.$Photo3dCameraControl11=0;this.$Photo3dCameraControl12=b("performanceNow")();this.__attractModeAnimationFrameID||(this.__attractModeAnimationFrameID=requestAnimationFrame(this.$Photo3dCameraControl15))};e.exports=a}),null);
__d("SphericalMediaMouseOverlay.react",["cx","fbt","CSS","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=800,k=function(a){return{mouseRoot:"_3bxe _2660"+(a?" _2dz7":""),mouse:"_2661"+(a?" _2dz7":""),mouseRotate:"_2663"+(a?" _2dz7":""),mouseInner:"_2664"+(a?" _2dz7":""),mouseLeftButton:"_2666"+(a?" _2dz7":""),mouseBackground:"_15nj",mouseButtons:"_2665",mouseRightButton:"_2667",mouseBody:"_266m",mouseText:"_2662"}};c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$2=null,b}a.prototype.componentDidUpdate=function(a){a.isActive&&!this.props.isActive?this.$2=setTimeout(function(){return this.$3()}.bind(this),j):!this.props.isActive?this.$3():this.props.isActive&&(this.$2!==null&&(clearTimeout(this.$2),this.$2=null),this.$4())};a.prototype.componentDidMount=function(){this.props.isActive||this.$3();var a=b("ReactDOM").findDOMNode(this);a instanceof HTMLElement&&(this.$1=a)};a.prototype.componentWillUnmount=function(){this.$1=null};a.prototype.$3=function(){this.$1&&b("CSS").addClass(this.$1,"_8b2")};a.prototype.$4=function(){this.$1&&b("CSS").removeClass(this.$1,"_8b2")};a.prototype.render=function(){var a=this.props,c=a.className;a=a.isActive;var d=this.props.copy?this.props.copy:h._("Click and drag to look around");a=k(a);return b("React").createElement("div",{className:b("joinClasses")(c,a.mouseRoot)},b("React").createElement("div",{className:a.mouse},b("React").createElement("div",{className:a.mouseRotate},b("React").createElement("div",{className:a.mouseInner},b("React").createElement("div",{className:a.mouseBackground}),b("React").createElement("div",{className:a.mouseButtons},b("React").createElement("div",{className:a.mouseLeftButton}),b("React").createElement("div",{className:a.mouseRightButton})),b("React").createElement("div",{className:a.mouseBody})))),b("React").createElement("div",{className:a.mouseText},d))};e.exports=a}),null);
__d("XAsset3DForLinkShareSrcController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/linkshare/src/",{status_id:{type:"FBID",required:!0}})}),null);
__d("onViewportChanged",["EventListener","emptyFunction","getViewportDimensions","requestAnimationFrame"],(function(a,b,c,d,e,f){__p&&__p();var g=[],h=!1,i=null,j=void 0,k=void 0;function l(){var a=b("getViewportDimensions").withoutScrollbars();return{top:0,bottom:a.height,left:0,right:a.width}}function a(a,c){c={transform:c||b("emptyFunction").thatReturnsArgument,callback:a,needsUpdate:!0};g.push(c);s();n();return{remove:m.bind(null,c),scheduleCheck:q.bind(null,c)}}function m(a){a=g.indexOf(a);a!==-1&&(g.splice(a,1),g.length===0&&(o(),i=null))}function n(){k||(k=b("EventListener").listen(window,"scroll",r),j=b("EventListener").listen(window,"resize",p))}function o(){k&&(k.remove(),j.remove(),k=j=null)}function p(){i=null,r()}function q(a){a.needsUpdate=!0,s()}function r(){g.map(function(a){return a.needsUpdate=!0}),s()}function s(){h||(h=!0,b("requestAnimationFrame")(function(){h=!1,u()}))}function t(a){if(a.needsUpdate){a.needsUpdate=!1;return!0}return!1}function u(){i||(i=l());var a=g.filter(t),b=a.map(function(a){return a.transform.call(null,i)});a.forEach(function(a,c){return a.callback.call(null,b[c])})}e.exports=a}),null);
__d("Asset3dFeedViewer.react",["ix","invariant","cx","csx","fbt","ActorURI","Animation","EventListener","Image.react","Link.react","React","ThreeJS.r88","Asset3dVrManager","Asset3dThreeJsHelpers","GLTFLoader.r88.patch","SphericalMediaMouseOverlay.react","SphericalViewportControl","Asset3DUtils","GLTFSceneLoggerUtils","bind","CSS","DOMQuery","DOM","ReactDOM","Asset3dComponentContextMenu.react","Asset3dCameraControl","Asset3dTurntableCameraControl","Photo3dCameraControl","Asset3dEnterVrButton.react","asset","getElementRect","onViewportChanged","degToRad","radToDeg","gkx","Asset3DStatus","Asset3DBackground","Asset3DBackgroundSize","Asset3DCategory","promiseDone","AsyncRequest","XAsset3DForLinkShareSrcController"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m=b("GLTFLoader.r88.patch").patch(),n=10,o=.15,p=b("degToRad")(270),q=50,r=10,s=5,t=500,u=4e3,v=k._("Click and drag to look around in 3D"),w=function(a){a=!!a.composerID||!!a.attribution;return{sphericalOverlay:a?"_1r1y":""}};c=babelHelpers.inherits(a,b("React").Component);l=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=l.constructor).call.apply(a,[this].concat(e)),this.state={isNuxActive:!1,isVrDeviceReady:!1},this.$4=!0,this.$5=null,this.$7=null,this.$13=0,this.$14=!1,this.$17=0,this.$27=function(a){__p&&__p();a=a.getPayload();switch(a.status){case b("Asset3DStatus").UPLOADING:setTimeout(this.$24.bind(this),1e3);break;case b("Asset3DStatus").SUCCESS:this.$25(a.asset3d_id,a.glb_uri);break;case b("Asset3DStatus").FAIL:a=b("DOMQuery").find(this.props.initialViewContainer,this.props.category===b("Asset3DCategory").PHOTOS_3D?"._68op":"._623o");b("CSS").setClass(a,"_3gsr");a=b("DOM").create("div",{className:"_3gss"});b("DOM").setContent(a,k._("3D post failed to load"));b("DOM").appendContent(this.props.initialViewContainer,a);break}}.bind(this),this.$28=function(a,c,d){d&&this.props.compressor&&this.props.compressionLevel&&(this.$6.logNetworkLoadEvents(d,this.props.compressor,this.props.compressionLevel),this.$6.logGlbParsingEvents(d));a=a.scene;this.$19.scene.add(a);this.$19.model=a;b("Asset3dThreeJsHelpers").onModelLoad(this.$19.model);this.$29(a);c=b("onViewportChanged")(this.$30);c.scheduleCheck();this.$18=c}.bind(this),this.update=function(){__p&&__p();if(this.$6.data.timeSinceLastFPSLogMs<=r){var a=this.$19.clock.getDelta();this.$6.data.timeSinceLastFPSLogMs+=a;this.$6.data.frameCount+=1;if(this.$6.data.timeSinceLastFPSLogMs>r){a=this.$6.data.frameCount/this.$6.data.timeSinceLastFPSLogMs;this.$6.logAverageFrameRate(Math.round(a))}}this.$3&&(this.$31(),this.$32(),this.$5=requestAnimationFrame(this.update))}.bind(this),this.$30=function(a){if(!this.$1)return;var c=b("getElementRect")(this.$1),d=a.top;a=a.bottom;var e=c.top>d&&c.top<a||c.bottom>d&&c.bottom<a||d>c.top&&a<c.bottom;d=c.top>d&&c.bottom<a;this.$12.setFullVisibility(d);e&&this.$38(c);this.$3!==e&&(this.$3=e,e?this.$36():this.$37())}.bind(this),c}a.prototype.componentDidMount=function(){__p&&__p();this.$3=!1;this.$22=this.$23.bind(this);!this.props.glbURI?this.$24():this.$25();if(this.$1){b("EventListener").listen(this.$1,"contextmenu",function(a){(a.shiftKey||!b("gkx")("AT7S1ORqqWmAizRxUYQksN69cNfhDOQYw60edwhO6Ug3ApPyf3diuITOCUjwckzPlUcN_lM9JvGiRujA6vuJGfXo"))&&a.preventDefault()});b("EventListener").listen(this.$1,"dblclick",function(a){this.$12.resetCamera()}.bind(this));if(this.$1 instanceof HTMLElement){var a=b("React").createElement(b("Asset3dComponentContextMenu.react"),{target:this.$1,fileURL:this.props.glbURI});b("ReactDOM").render(a,this.$1)}}};a.prototype.componentWillUnmount=function(){clearTimeout(this.$15),clearTimeout(this.$16),this.$26()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.glbURI&&a.glbURI!==this.props.glbURI&&(this.$3=!1,this.$4=!0,this.$26(),this.$25(a.asset3dID,a.glbURI))};a.prototype.$24=function(){if(this.$17>=n)return;var a=b("ActorURI").create(b("XAsset3DForLinkShareSrcController").getURIBuilder().setFBID("status_id",String(this.props.statusID)).getURI(),this.props.actorID);new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(b("bind")(this,this.$27)).setErrorHandler(function(a){a&&a.errorDescription&&!1}).send();this.$17+=1};a.prototype.$25=function(a,c){__p&&__p();var d=this.props,e=d.storyID,f=d.width,g=d.height;d=d.initialViewContainer;var i=this.$1;a=a?a:this.props.asset3dID;c=c?c:this.props.glbURI;if(!c||!i)return;f===1?(this.$10=d.clientWidth,this.$11=d.clientWidth):(this.$10=f,this.$11=g);i=new(b("ThreeJS.r88").Scene)();d=new(b("ThreeJS.r88").Clock)();f=new m();a||h(0);this.$6=new(b("GLTFSceneLoggerUtils"))(a,c,e);this.$19={clock:d,gltfLoader:f,light:null,scene:i,model:null};this.$7=null;f.load(c,this.$28)};a.prototype.$29=function(a){__p&&__p();var c=this.$1;if(!c)return;if(!window.asset3dRenderer){var d=new(b("ThreeJS.r88").WebGLRenderer)({antialias:!0,alpha:!0});d.gammaOutput=!0;d.setSize(this.$10,this.$11);d.setPixelRatio(window.devicePixelRatio);window.asset3dRenderer=d;window.asset3dRendererWidth=this.$10;window.asset3dRendererHeight=this.$11}else this.$10>window.asset3dRendererWidth&&(window.asset3dRenderer.setSize(this.$10,this.$11),window.asset3dRendererWidth=this.$10,window.asset3dRendererHeight=this.$11);d={enableGyro:!0,slipFactor:o,enableRubberBanding:!1,disableAutoClientSizeUpdate:!0,enableZoomWithShiftKey:!0,enablePanningWithRightMouse:!0};var e={expansionCoef:1.01,fieldOfView:q,initialHeading:b("radToDeg")(p),initialPitch:0,projectionType:"flat"};this.$2=document.createElement("canvas");this.$2.width=this.$10;this.$2.height=this.$11;c.appendChild(this.$2);this.$9=new(b("SphericalViewportControl"))(this.$2,e,d);this.$9.updateViewportClientSize({width:this.$10,height:this.$11});this.$9.addListener("updateViewportEnd",function(a,b){this.$13=0,clearTimeout(this.$15),this.$14=!1}.bind(this));this.$9.addListener("viewportChange",function(a,b,c){this.state.isNuxActive&&this.$12.shouldSuppressNux()&&this.setState({isNuxActive:!1})}.bind(this));this.$9.addListener("updateViewportMove",function(a){this.$13+=1,!this.$14&&!this.state.isNuxActive&&this.$13>s&&(this.$14=!0,this.$15=setTimeout(function(){this.setState({isNuxActive:!0},function(){this.$16=setTimeout(function(){this.state.isNuxActive&&this.setState({isNuxActive:!1})}.bind(this),u)}.bind(this)),this.$15=null}.bind(this),t))}.bind(this));this.$12=this.props.category===b("Asset3DCategory").PHOTOS_3D?new(b("Photo3dCameraControl"))(this.$9,this.$10,this.$11,this.$6,this.$19.scene,this.$2):new(b("Asset3dTurntableCameraControl"))(this.$9,this.$10,this.$11,this.$6,this.$19.scene);c=this.$12.camera();e=new(b("ThreeJS.r88").AmbientLight)(13421772,.5);this.$19.scene.add(e);this.$19.light=e;d=new(b("ThreeJS.r88").DirectionalLight)(15658734);d.position.set(1,2,1);c.add(d);this.$12.modelLoad(a);b("gkx")("AT48FWmB8_LKIn9ifpnl5Z88q4aHblWfFPq0uBpCazRb-PSc9Ulf_M6Be_QDzTo4zxt5oRiu0U-tCocoxSU2Cybn")&&new(b("ThreeJS.r88").TextureLoader)().load("/images/asset3d/iblenv_b20_02n-30.jpg",function(a){a.mapping=b("ThreeJS.r88").CubeUVReflectionMapping,a.minFilter=b("ThreeJS.r88").LinearFilter,a.magFilter=b("ThreeJS.r88").LinearFilter,this.$19.scene.traverse(function(b){b.material&&b.material.type=="MeshStandardMaterial"&&(b.material.envMap=a,b.material.envMapIntensity=1.5,b.material.needsUpdate=!0)}),this.$19.scene.remove(this.$19.light)}.bind(this));if(this.props.shouldUpdateFallbackImage){this.$8=.5;this.$31();this.$32(!1);e=b("Asset3DUtils").takeScreenshot(window.asset3dRenderer.domElement);b("Asset3DUtils").saveScreenshot(e,this.props.asset3dID,this.props.actorID)}if(this.props.enable3DPhotoWebVRSupport&&this.props.category===b("Asset3DCategory").PHOTOS_3D||this.props.enable3DModelWebVRSupport&&this.props.category!==b("Asset3DCategory").PHOTOS_3D){if(!window.asset3dVrManager){c=new(b("ThreeJS.r88").WebGLRenderer)({antialias:!0,alpha:!0});c.gammaOutput=!0;c.setSize(this.$10*2,this.$11);c.setPixelRatio(window.devicePixelRatio);window.asset3dVrManager=new(b("Asset3dVrManager"))(c)}this.$21=window.asset3dVrManager}};a.prototype.$26=function(){this.$21&&this.$33(),this.$5!=null&&(window.cancelAnimationFrame(this.$5),this.$5=null),this.$12&&this.$12.destroy(),this.$9!=null&&this.$9.destroy(),this.$1&&this.$2&&this.$2.parentNode===this.$1&&this.$1.removeChild(this.$2)};a.prototype.$31=function(){this.$12&&this.$12.update(this.$8)};a.prototype.$34=function(){var a=this;this.$21&&(function(){var c=a.$1;if(c){var d=a.props.storyProps;d||h(0);b("promiseDone")(a.$21.enterVr(a.props.category,a.$12.camera(),a.$19.model,a.$35.bind(a),d).then(function(){this.$21.domElement().parentElement===null&&(this.$20&&this.$20.setInVr(!0),window.cancelAnimationFrame(this.$5),this.$5=null,c.appendChild(this.$21.domElement()),c.removeChild(this.$2))}.bind(a)))}})()};a.prototype.$33=function(){this.$21&&b("promiseDone")(this.$21.exitVr())};a.prototype.$35=function(){var a=this.$1;a&&this.$21.domElement().parentElement===a&&(this.$20&&this.$20.setInVr(!1),a.appendChild(this.$2),a.removeChild(this.$21.domElement()),this.$12.setDirty(!0,!0),this.$5=requestAnimationFrame(this.update))};a.prototype.$36=function(){__p&&__p();if(this.$4){var a=Date.now();this.$6.logGpuUploadStart();this.$31();this.$32(!1);this.$6.logGpuUploadEnd(Date.now()-a);new(b("Animation"))(this.props.initialViewContainer).to("opacity",0).duration(350).hide().go();a=b("DOMQuery").scry(b("ReactDOM").findDOMNode(this),"._3xkn")[0];a&&new(b("Animation"))(a).to("opacity",1).duration(700).go();this.$4=!1}this.$21&&this.$21.addDeviceReadyListner(this.$22);requestAnimationFrame(this.update)};a.prototype.$37=function(){var a=this.$19.model.clone();this.$19.scene.remove(this.$19.model);b("Asset3dThreeJsHelpers").disposeModel(this.$19.model);this.$19.model=a;this.$19.scene.add(this.$19.model);this.$21&&this.$21.removeDeviceReadyListner(this.$22)};a.prototype.$23=function(a){this.setState({isVrDeviceReady:a})};a.prototype.$32=function(){var a=arguments.length<=0||arguments[0]===undefined?!0:arguments[0],b=window.asset3dRenderer,c=this.$2.getContext("2d"),d=this.$12;if(b&&c&&d&&d.isDirty()){a&&d.setDirty(!1);c.clearRect(0,0,this.$10,this.$11);b.render(this.$19.scene,this.$12.camera());var e=b.getDrawingBufferSize(),f=e.width,g=e.height;c.drawImage(b.domElement,0,0,f,g,0,0,this.$10,this.$11)}};a.prototype.$38=function(a){if(!this.$1)return;var b=window.innerHeight||document.documentElement.clientHeight;a.height>.5*b?this.$8=a.bottom/(b+a.height):a.top<0?this.$8=.25*a.bottom/a.height:a.bottom>b?this.$8=.75+.25*(a.bottom-b)/a.height:this.$8=.25+.5*a.top/(b-a.height);this.$8!==this.$7&&(this.$7=this.$8,this.$12.setDirty(!0,!0))};a.prototype.render=function(){__p&&__p();var a=null;if(this.props.attribution){var c=this.props.attribution.href,d=this.props.attribution.source,e=this.props.attribution.text;a=b("React").createElement("div",{className:"_3xkn"},b("React").createElement(b("Link.react"),{href:c,target:"_blank"},b("React").createElement(b("Image.react"),{className:"_47ru",src:g("459146")}),b("React").createElement("div",{className:"_47rt"},b("React").createElement("div",{className:"_377f"},e),b("React").createElement("div",{className:"_377g"},d?d:c))))}e={width:this.$10,overflow:"hidden"};this.props.background&&this.props.background!==b("Asset3DBackground").DEFAULT&&(e=b("Asset3DUtils").getBackgroundStyles(this.props.background,b("Asset3DBackgroundSize").STORY));d=w(this.props);c=void 0;this.props.height!==1&&(c={height:this.props.height});var f=void 0;this.state.isVrDeviceReady&&(f=b("React").createElement(b("Asset3dEnterVrButton.react"),{ref:function(a){return this.$20=a}.bind(this),enterVrCallback:function(){this.$34()}.bind(this),exitVrCallback:function(){this.$33()}.bind(this)}),a||(a=b("React").createElement("div",{className:"_2we_"})));return b("React").createElement("div",{style:e},b("React").createElement("div",{style:c,ref:function(a){return this.$1=a}.bind(this)}),b("React").createElement(b("SphericalMediaMouseOverlay.react"),{className:d.sphericalOverlay,isActive:this.state.isNuxActive,copy:v}),a,f)};a.defaultProps={storyID:null,asset3dID:null,statusID:null,glbURI:null,compressor:null,compressionLevel:null,attribution:null,height:1,width:1,composerID:null,background:null,enable3DModelWebVRSupport:!1,enable3DPhotoWebVRSupport:!1,shouldUpdateFallbackImage:!1,storyProps:null};e.exports=a}),null);
__d("EntstreamFeedObject",["csx","CSS","Parent"],(function(a,b,c,d,e,f,g){var h={getRoot:function(a){return b("Parent").bySelector(a,"._5jmm")},getHscrollOuterRootIfAvailable:function(a){a=a;b("CSS").matchesSelector(a,"._170y")&&(a=h.getRoot(a.parentNode));return a}};e.exports=h}),null);
__d("EntstreamFeedObjectTracking",["csx","CSS","DOM","EntstreamFeedObject","Focus","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();e.exports={register:function(a){var c=this.getRoot(a.nodeID);if(!c)return;var d=b("DOM").scry(c,"._5v9_"),e=d&&d.length?d:[c];a.actorIDs.forEach(function(a){var b=[].concat(h.get(a)||[]);b.push.apply(b,e);h.set(a,b)})},hideAllFromActor:function(a){var c=this.getRoot(a.nodeID);(h.get(a.actorID)||[]).forEach(function(a){if(a===c)return;b("CSS").hide(a)})},unhideAllFromActor:function(a){var c=this.getRoot(a.nodeID);(h.get(a.actorID)||[]).forEach(function(a){b("CSS").show(a)});c&&b("Focus").setWithoutOutline(c)},getRoot:function(a){a=b("ge")(a);return a?b("EntstreamFeedObject").getRoot(a):null}}}),null);
__d("FeedTrackingAsync",["Arbiter","Run","collectDataAttributes"],(function(a,b,c,d,e,f){__p&&__p();var g;e.exports.init=function(){__p&&__p();if(g)return;g=b("Arbiter").subscribe("AsyncRequest/send",function(a,c){a=c.request;c=a.getRelativeTo();if(c){a=a.getData();c=b("collectDataAttributes")(c,["ft"]);c.ft&&Object.keys(c.ft).length&&Object.assign(a,c)}});b("Run").onLeave(function(){g&&(g.unsubscribe(),g=null)})}}),null);
__d("PluginLoggedOutUserTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PluginLoggedOutUserLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PluginLoggedOutUserLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PluginLoggedOutUserLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setHref=function(a){this.$1.href=a;return this};a.prototype.setIsSDK=function(a){this.$1.is_sdk=a;return this};a.prototype.setPluginAppID=function(a){this.$1.plugin_app_id=a;return this};a.prototype.setPluginName=function(a){this.$1.plugin_name=a;return this};a.prototype.setRefererURL=function(a){this.$1.referer_url=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={href:!0,is_sdk:!0,plugin_app_id:!0,plugin_name:!0,referer_url:!0,vc:!0};e.exports=a}),null);
__d("FormSubmit",["AsyncRequest","AsyncResponse","CSS","DOMQuery","Event","Form","Parent","trackReferrer"],(function(a,b,c,d,e,f){__p&&__p();var g={buildRequest:function(a,c){__p&&__p();var d=(b("Form").getAttribute(a,"method")||"GET").toUpperCase();c=c&&b("Parent").byTag(c,"button")||c;var e=c&&b("Parent").byClass(c,"stat_elem")||a;if(b("CSS").hasClass(e,"async_saving"))return null;if(c&&(c.form!==a||c.nodeName!="INPUT"&&c.nodeName!="BUTTON"||c.type!="submit")){var f=b("DOMQuery").scry(a,".enter_submit_target")[0];f&&(c=f)}f=b("Form").serialize(a,c);b("Form").setDisabled(a,!0);c=b("Form").getAttribute(a,"ajaxify")||b("Form").getAttribute(a,"action");var g=!!b("Form").getAttribute(a,"data-cors");b("trackReferrer")(a,c);return new(b("AsyncRequest"))().setAllowCrossOrigin(g).setURI(c).setData(f).setNectarModuleDataSafe(a).setReadOnly(d=="GET").setMethod(d).setRelativeTo(a).setStatusElement(e).setInitialHandler(b("Form").setDisabled.bind(null,a,!1)).setHandler(function(c){b("Event").fire(a,"success",{response:c})}).setErrorHandler(function(c){b("Event").fire(a,"error",{response:c})!==!1&&b("AsyncResponse").defaultErrorHandler(c)}).setFinallyHandler(b("Form").setDisabled.bind(null,a,!1))},send:function(a,b){a=g.buildRequest(a,b);a&&a.send();return a}};e.exports=g}),null);
__d("AsyncFormRequestUtils",["Arbiter"],(function(a,b,c,d,e,f){a={subscribe:function(a,c,d){b("Arbiter").subscribe("AsyncRequest/"+c,function(b,c){b=c.request.relativeTo;b&&b===a&&d(c)})}};e.exports=a}),null);
__d("EmbeddedPostPluginActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click"})}),null);
__d("EmbeddedPostPluginActions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EMBEDDED_POSTS_COMMENT:"embedded_post_comment",EMBEDDED_POSTS_LIKE:"embedded_post_like",EMBEDDED_POSTS_SHARE:"embedded_post_share",EMBEDDED_POSTS_UNLIKE:"embedded_post_unlike"})}),null);
__d("XPostPluginLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/platform/plugin/post/logging/",{})}),null);
__d("PluginFeedFooterActionLogger",["AsyncRequest","DOM","EmbeddedPostPluginActions","EmbeddedPostPluginActionTypes","Event","XPostPluginLoggingController"],(function(a,b,c,d,e,f){__p&&__p();a={initializeClickLoggers:function(a,c,d,e,f,g,h,i,j){var k=function(c,d){try{c=b("DOM").find(a,"."+c);b("Event").listen(c,"click",function(a){new(b("AsyncRequest"))().setURI(b("XPostPluginLoggingController").getURIBuilder().getURI()).setData({action:d,action_type:b("EmbeddedPostPluginActionTypes").CLICK,source:g,story_token:h,referer_url:i,is_sdk:j}).send()})}catch(a){}};k(c,b("EmbeddedPostPluginActions").EMBEDDED_POSTS_LIKE);k(d,b("EmbeddedPostPluginActions").EMBEDDED_POSTS_UNLIKE);k(e,b("EmbeddedPostPluginActions").EMBEDDED_POSTS_COMMENT);k(f,b("EmbeddedPostPluginActions").EMBEDDED_POSTS_SHARE)}};e.exports=a}),null);
__d("PlatformWidgetEndpoint",["PlatformBaseVersioning"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){return b("PlatformBaseVersioning").versionAwarePath("/dialog/"+a+(c?"/"+c:""))}function c(a,c){return b("PlatformBaseVersioning").versionAwarePath("/plugins/"+a+(c?"/"+c:""))}function d(a){return/^\/plugins\//.test(b("PlatformBaseVersioning").getUnversionedPath(a))}function f(a){return/^\/dialog\//.test(b("PlatformBaseVersioning").getUnversionedPath(a))}a={dialog:a,plugins:c,isPluginEndpoint:d,isDialogEndpoint:f};e.exports=a}),null);
__d("PluginMessage",["DOMEventListener"],(function(a,b,c,d,e,f){a={listen:function(){b("DOMEventListener").add(window,"message",function(event){if(/\.facebook\.com$/.test(event.origin)&&/^FB_POPUP:/.test(event.data)){var a=JSON.parse(event.data.substring(9));"reload"in a&&/^https?:/.test(a.reload)&&document.location.replace(a.reload)}})}};e.exports=a}),null);
__d("PluginOptin",["DOMEvent","DOMEventListener","PluginMessage","PopupWindow","URI","UserAgent_DEPRECATED","PlatformWidgetEndpoint","PluginLoggedOutUserTypedLogger"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c){Object.assign(this,{return_params:b("URI").getRequestURI().getQueryData(),login_params:{},optin_params:{},plugin:a,api_key:c}),this.addReturnParams({ret:"optin"}),delete this.return_params.hash}Object.assign(g.prototype,{addReturnParams:function(a){Object.assign(this.return_params,a);return this},addLoginParams:function(a){Object.assign(this.login_params,a);return this},addOptinParams:function(a){Object.assign(this.optin_params,a);return this},start:function(){var a=this.api_key||127760087237610;b("URI").getRequestURI().getQueryData().kid_directed_site&&(this.login_params.kid_directed_site=!0);this.login_params.referrer=document.referrer;var c=new(b("URI"))(b("PlatformWidgetEndpoint").dialog("plugin.optin")).addQueryData(this.optin_params).addQueryData({app_id:a,secure:b("URI").getRequestURI().isSecure(),social_plugin:this.plugin,return_params:JSON.stringify(this.return_params),login_params:JSON.stringify(this.login_params)});b("UserAgent_DEPRECATED").mobile()?c.setSubdomain("m"):c.addQueryData({display:"popup"});this.return_params.act!==null&&this.return_params.act==="send"&&new(b("PluginLoggedOutUserTypedLogger"))().setPluginAppID(a).setPluginName(this.return_params.act).setHref(this.return_params.href).logVital();this.popup=b("PopupWindow").open(c.toString(),420,450);b("PluginMessage").listen();return this}});g.starter=function(a,b,c,d){a=new g(a);a.addReturnParams(b||{});a.addLoginParams(c||{});a.addOptinParams(d||{});return a.start.bind(a)};g.listen=function(a,c,d,e,f){b("DOMEventListener").add(a,"click",function(a){new(b("DOMEvent"))(a).kill(),g.starter(c,d,e,f)()})};e.exports=g}),null);
__d("PluginFeedLikeButton",["Arbiter","AsyncFormRequestUtils","ClientIDs","CSS","DOM","DOMEventListener","FBFeedLocations","FormSubmit","Keys","PluginOptin","URI"],(function(a,b,c,d,e,f){__p&&__p();window.resetConfirmStoryLike=function(a){b("CSS").show(b("DOM").find(document,"#likeStory_"+a)),b("DOM").remove(b("DOM").find(document,"#confirmStory_"+a))};a={addClientId:function(a){a.setAttribute("value",b("ClientIDs").getNewClientID())},loggedOutLikeButton:function(a,c,d){var e="";if(c===b("FBFeedLocations").EMBED)e="post";else if(c===b("FBFeedLocations").PAGE_PLUGIN)e="page";else throw new Error("Invalid FBFeedLocation type.");c=new(b("PluginOptin"))(e).addReturnParams({act:"like_"+a});b("DOMEventListener").add(d,"click",c.start.bind(c))},init:function(a,c,d,e,f){__p&&__p();var g=function(a){if(a.type==="keypress")if(a.keyCode===b("Keys").RETURN||a.keyCode===b("Keys").SPACE)b("FormSubmit").send(f);else return;b("FormSubmit").send(f)};b("DOMEventListener").add(c,"click",g);b("DOMEventListener").add(d,"click",g);b("DOMEventListener").add(c,"keypress",g);b("DOMEventListener").add(d,"keypress",g);g=e.getAttribute("value")==="1";b("AsyncFormRequestUtils").subscribe(f,"send",function(f){f=e.getAttribute("value")==="1";b("CSS").conditionShow(d,f);b("CSS").conditionShow(c,!f);b("Arbiter").inform("embeddedUfiToggle",{isLike:f,storyToken:a});e.setAttribute("value",f?"":"1")});b("AsyncFormRequestUtils").subscribe(f,"response",function(f){f=f.response.payload;if(f&&!f.success){f=f.isLike;b("CSS").conditionShow(c,f);b("CSS").conditionShow(d,!f);b("Arbiter").inform("revertLike",{isLike:f,storyToken:a});e.setAttribute("value",f?"1":"")}});var h=new(b("URI"))(window.location.search).getQueryData();g&&h.act==="like_"+a&&b("FormSubmit").send(f)}};e.exports=a}),null);